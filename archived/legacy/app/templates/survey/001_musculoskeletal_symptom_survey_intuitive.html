<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üè• Í±¥Í∞ï Ï≤¥ÌÅ¨ ÏÑ§Î¨∏ÏßÄ - Ïö∞Î¶¨ Î™∏Ïù¥ Ïñ¥Îñ§ÏßÄ ÏïåÏïÑÎ¥êÏöî!</title>
    <style>
        /* Ìè∞Ìä∏ Î∞è Í∏∞Î≥∏ Ïä§ÌÉÄÏùº */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', 'ÎßëÏùÄÍ≥†Îîï', sans-serif;
            font-size: 18px;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        /* Îã§ÌÅ¨Î™®Îìú ÌÜ†Í∏Ä */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50px;
            padding: 12px 20px;
            cursor: pointer;
            font-size: 16px;
            color: white;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        /* Î©îÏù∏ Ïª®ÌÖåÏù¥ÎÑà */
        .survey-container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        /* Ìó§Îçî */
        .survey-header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            text-align: center;
            padding: 40px 20px;
        }

        .survey-header h1 {
            font-size: 32px;
            margin-bottom: 15px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .survey-header p {
            font-size: 20px;
            opacity: 0.9;
        }

        /* ÏßÑÌñâÎ•† Î∞î */
        .progress-container {
            background: white;
            padding: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .progress-bar {
            background: #e0e0e0;
            border-radius: 25px;
            height: 12px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            background: linear-gradient(90deg, #43e97b 0%, #38f9d7 100%);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 25px;
        }

        .progress-text {
            text-align: center;
            color: #666;
            font-weight: bold;
            font-size: 16px;
        }

        /* Ìèº Ïª®ÌÖåÏù¥ÎÑà */
        .form-container {
            padding: 0;
        }

        /* ÏÑπÏÖò Ïπ¥Îìú */
        .section-card {
            margin: 0;
            border-bottom: 3px solid #f0f0f0;
            padding: 40px 30px;
            transition: all 0.3s ease;
            background: white;
        }

        .section-card:last-child {
            border-bottom: none;
        }

        .section-card:hover {
            background: #fafafa;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        /* ÏÑπÏÖò Ìó§Îçî */
        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .section-icon {
            font-size: 48px;
            margin-right: 20px;
            animation: bounce 2s infinite;
        }

        .section-title {
            font-size: 28px;
            font-weight: bold;
            color: #333;
        }

        /* Ïï†ÎãàÎ©îÏù¥ÏÖò */
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        /* ÌïÑÎìú Í∑∏Î£π */
        .field-group {
            margin-bottom: 25px;
            padding: 20px;
            border-radius: 15px;
            background: #f8f9fa;
            border-left: 5px solid #007bff;
            transition: all 0.3s ease;
        }

        .field-group:hover {
            background: #e3f2fd;
            border-left-color: #2196f3;
            transform: translateX(5px);
        }

        /* Î†àÏù¥Î∏î */
        .field-label {
            display: block;
            margin-bottom: 12px;
            font-weight: bold;
            font-size: 20px;
            color: #333;
            position: relative;
        }

        .required::after {
            content: " ‚≠ê";
            color: #ff4444;
        }

        .tooltip {
            position: relative;
            cursor: help;
        }

        .tooltip::before {
            content: "üí°";
            margin-left: 8px;
        }

        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            top: -40px;
            left: 0;
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
            white-space: nowrap;
            z-index: 100;
            animation: fadeIn 0.3s;
        }

        /* ÏûÖÎ†• ÌïÑÎìú */
        .form-control {
            width: 100%;
            padding: 15px 20px;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            font-size: 18px;
            transition: all 0.3s ease;
            background: white;
        }

        .form-control:focus {
            border-color: #4facfe;
            box-shadow: 0 0 20px rgba(79, 172, 254, 0.3);
            outline: none;
            transform: scale(1.02);
        }

        .form-control:invalid {
            border-color: #ff6b6b;
            background: #fff5f5;
        }

        /* ÏÑ†ÌÉù Î∞ïÏä§ */
        .select-container {
            position: relative;
        }

        select.form-control {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,<svg xmlns='http://www.w3.org/2000/svg' fill='%23666' viewBox='0 0 24 24'><path d='M7 10l5 5 5-5z'/></svg>");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 20px;
            cursor: pointer;
        }

        /* Ï≤¥ÌÅ¨Î∞ïÏä§ Ïä§ÌÉÄÏùº */
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            border-color: #4facfe;
            background: #f0f8ff;
            transform: translateY(-2px);
        }

        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            cursor: pointer;
        }

        /* ÌÜµÏ¶ù ÌèâÍ∞Ä ÏÑπÏÖò */
        .pain-section {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        }

        .pain-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }

        .body-part {
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-left: 6px solid #ff6b6b;
        }

        .body-part-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
            display: flex;
            align-items: center;
        }

        .body-icon {
            font-size: 36px;
            margin-right: 12px;
        }

        /* ÌÜµÏ¶ù Í∞ïÎèÑ Ïä¨ÎùºÏù¥Îçî */
        .pain-intensity {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 15px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .pain-emoji {
            font-size: 40px;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 10px;
            border-radius: 50%;
        }

        .pain-emoji:hover {
            transform: scale(1.2);
            background: rgba(79, 172, 254, 0.2);
        }

        .pain-emoji.selected {
            background: #4facfe;
            transform: scale(1.3);
        }

        /* Î≤ÑÌäº Ïä§ÌÉÄÏùº */
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e6cf 100%);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(86, 171, 47, 0.4);
        }

        /* Ïï°ÏÖò Î≤ÑÌäºÎì§ */
        .form-actions {
            padding: 30px;
            background: #f8f9fa;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
        }

        .auto-save-status {
            color: #28a745;
            font-weight: bold;
            display: flex;
            align-items: center;
        }

        .auto-save-status::before {
            content: "üíæ ";
            margin-right: 8px;
        }

        /* Î∞òÏùëÌòï ÎîîÏûêÏù∏ */
        @media (max-width: 768px) {
            body {
                font-size: 16px;
                padding: 10px;
            }

            .survey-header h1 {
                font-size: 24px;
            }

            .section-icon {
                font-size: 36px;
            }

            .section-title {
                font-size: 22px;
            }

            .field-label {
                font-size: 18px;
            }

            .form-control {
                padding: 12px 15px;
                font-size: 16px;
            }

            .checkbox-group {
                grid-template-columns: 1fr;
            }

            .pain-emoji {
                font-size: 32px;
            }

            .form-actions {
                flex-direction: column;
                gap: 15px;
            }
        }

        /* ÌéòÏù¥Îìú Ïù∏ Ïï†ÎãàÎ©îÏù¥ÏÖò */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-card {
            animation: fadeIn 0.6s ease forwards;
        }

        /* Îã§ÌÅ¨ Î™®Îìú */
        .dark-mode {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        }

        .dark-mode .survey-container {
            background: rgba(44, 62, 80, 0.95);
            color: #ecf0f1;
        }

        .dark-mode .section-card {
            background: #34495e;
            color: #ecf0f1;
        }

        .dark-mode .section-card:hover {
            background: #3c5a78;
        }

        .dark-mode .form-control {
            background: #2c3e50;
            color: #ecf0f1;
            border-color: #34495e;
        }

        .dark-mode .field-group {
            background: #2c3e50;
            border-left-color: #3498db;
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()">üåô Îã§ÌÅ¨Î™®Îìú</button>

    <div class="survey-container">
        <!-- Ìó§Îçî -->
        <div class="survey-header">
            <h1>üè• Í±¥Í∞ï Ï≤¥ÌÅ¨ ÏÑ§Î¨∏ÏßÄ</h1>
            <p>Ïö∞Î¶¨ Î™∏Ïù¥ Ïñ¥Îñ§ÏßÄ ÏïåÏïÑÎ¥êÏöî! Ï≤úÏ≤úÌûà ÏÜîÏßÅÌïòÍ≤å ÎãµÌï¥Ï£ºÏÑ∏Ïöî üòä</p>
        </div>

        <!-- ÏßÑÌñâÎ•† Î∞î -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">ÏãúÏûëÌïòÍ∏∞ (0%)</div>
        </div>

        <!-- ÏÑ§Î¨∏ Ìèº -->
        <form id="surveyForm" class="form-container" action="{{ url_for('survey.submit_survey', form_id='001_musculoskeletal_symptom_survey') }}" method="POST">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>

            <!-- Í∏∞Î≥∏ Ï†ïÎ≥¥ ÏÑπÏÖò -->
            <div class="section-card" data-section="basic_info">
                <div class="section-header">
                    <div class="section-icon">üë§</div>
                    <div class="section-title">Í∏∞Î≥∏ Ï†ïÎ≥¥Î•º ÏïåÎ†§Ï£ºÏÑ∏Ïöî</div>
                </div>

                <div class="field-group">
                    <label class="field-label tooltip" data-tooltip="ÌöåÏÇ¨ÏóêÏÑú ÏÇ¨Ïö©ÌïòÎäî Î≤àÌò∏ÏòàÏöî">
                        ÏßÅÏõê Î≤àÌò∏ (ÏÇ¨Î≤à)
                    </label>
                    <input type="text" name="employee_number" class="form-control" placeholder="Ïòà: 2024001">
                </div>

                <div class="field-group">
                    <label class="field-label required">
                        Ïù¥Î¶Ñ
                    </label>
                    <input type="text" name="name" class="form-control" placeholder="ÌôçÍ∏∏Îèô" required>
                </div>

                <div class="field-group">
                    <label class="field-label required tooltip" data-tooltip="Î™á ÏÇ¥Ïù∏ÏßÄ Ïà´ÏûêÎ°ú Ïç®Ï£ºÏÑ∏Ïöî">
                        ÎÇòÏù¥
                    </label>
                    <input type="number" name="age" class="form-control" placeholder="Ïòà: 30" min="18" max="100" required>
                </div>

                <div class="field-group">
                    <label class="field-label required">
                        ÏÑ±Î≥Ñ
                    </label>
                    <div class="select-container">
                        <select name="gender" class="form-control" required>
                            <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                            <option value="ÎÇ®">üë® ÎÇ®Ïûê</option>
                            <option value="Ïó¨">üë© Ïó¨Ïûê</option>
                        </select>
                    </div>
                </div>

                <div class="field-group">
                    <label class="field-label required tooltip" data-tooltip="ÏßÄÍ∏à ÌöåÏÇ¨ÏóêÏÑú ÏùºÌïú Í∏∞Í∞ÑÏù¥ÏóêÏöî">
                        ÌòÑÏû¨ ÏßÅÏû•ÏóêÏÑú ÏùºÌïú Í∏∞Í∞Ñ (ÎÖÑ)
                    </label>
                    <input type="number" name="work_experience_years" class="form-control" placeholder="Ïòà: 5" min="0" max="50" required>
                </div>

                <div class="field-group">
                    <label class="field-label tooltip" data-tooltip="1ÎÖÑÏù¥ Ïïà ÎêòÎ©¥ Í∞úÏõîÏàòÎ•º Ïç®Ï£ºÏÑ∏Ïöî">
                        Ï∂îÍ∞Ä Í∞úÏõî Ïàò
                    </label>
                    <input type="number" name="work_experience_months" class="form-control" placeholder="Ïòà: 6" min="0" max="11">
                </div>

                <div class="field-group">
                    <label class="field-label">
                        Í≤∞Ìòº Ïó¨Î∂Ä
                    </label>
                    <div class="select-container">
                        <select name="married" class="form-control">
                            <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                            <option value="Í∏∞Ìòº">üíë Í≤∞ÌòºÌñàÏñ¥Ïöî</option>
                            <option value="ÎØ∏Ìòº">üôã ÏïÑÏßÅ Ïïà ÌñàÏñ¥Ïöî</option>
                        </select>
                    </div>
                </div>

                <div class="field-group">
                    <label class="field-label required tooltip" data-tooltip="Ïñ¥Îäê Î∂ÄÏÑúÏóêÏÑú ÏùºÌïòÎäîÏßÄ Ïç®Ï£ºÏÑ∏Ïöî">
                        ÏùºÌïòÎäî Î∂ÄÏÑú
                    </label>
                    <input type="text" name="department" class="form-control" placeholder="Ïòà: ÏÉùÏÇ∞Î∂Ä, ÌíàÏßàÍ¥ÄÎ¶¨ÌåÄ" required>
                </div>

                <div class="field-group">
                    <label class="field-label tooltip" data-tooltip="ÏÉùÏÇ∞ÎùºÏù∏Ïù¥ÎÇò ÏûëÏóÖÎùºÏù∏ÏùÑ ÏùòÎØ∏Ìï¥Ïöî">
                        ÎùºÏù∏
                    </label>
                    <input type="text" name="line" class="form-control" placeholder="Ïòà: AÎùºÏù∏, 1Ìò∏Í∏∞">
                </div>

                <div class="field-group">
                    <label class="field-label tooltip" data-tooltip="Ïñ¥Îñ§ Ï¢ÖÎ•òÏùò ÏùºÏùÑ ÌïòÎäîÏßÄ Í∞ÑÎã®Ìûà Ïç®Ï£ºÏÑ∏Ïöî">
                        ÏûëÏóÖ Ï¢ÖÎ•ò
                    </label>
                    <input type="text" name="work_type" class="form-control" placeholder="Ïòà: Ï°∞Î¶ΩÏûëÏóÖ, Í≤ÄÏÇ¨ÏóÖÎ¨¥">
                </div>

                <div class="field-group">
                    <label class="field-label required tooltip" data-tooltip="Íµ¨Ï≤¥Ï†ÅÏúºÎ°ú Ïñ¥Îñ§ ÏùºÏùÑ ÌïòÎäîÏßÄ ÏûêÏÑ∏Ìûà Ïç®Ï£ºÏÑ∏Ïöî">
                        ÌòÑÏû¨ ÌïòÍ≥† ÏûàÎäî Ïùº (ÏûêÏÑ∏Ìûà)
                    </label>
                    <textarea name="work_content" class="form-control" rows="4" placeholder="Ïòà: Ïª®Î≤†Ïù¥Ïñ¥ Î≤®Ìä∏ÏóêÏÑú Î∂ÄÌíàÏùÑ Ï°∞Î¶ΩÌïòÍ≥†, ÌïòÎ£®Ïóê 200Í∞ú Ï†ïÎèÑ ÎßåÎì§Ïñ¥Ïöî. Ï£ºÎ°ú ÏÑúÏÑú ÏùºÌïòÍ≥†, ÏÜêÎ™©ÏùÑ ÎßéÏù¥ ÏÇ¨Ïö©Ìï¥Ïöî." required></textarea>
                </div>
            </div>

            <!-- Í∑ºÎ¨¥ Ï†ïÎ≥¥ ÏÑπÏÖò -->
            <div class="section-card" data-section="work_schedule">
                <div class="section-header">
                    <div class="section-icon">üíº</div>
                    <div class="section-title">ÏùºÌïòÎäî ÏãúÍ∞ÑÏùÑ ÏïåÎ†§Ï£ºÏÑ∏Ïöî</div>
                </div>

                <div class="field-group">
                    <label class="field-label tooltip" data-tooltip="ÏßÄÍ∏à ÌïòÍ≥† ÏûàÎäî ÏùºÏùÑ Î™á Í∞úÏõîÏß∏ ÌïòÍ≥† ÏûàÎÇòÏöî?">
                        ÌòÑÏû¨ ÏûëÏóÖÏùÑ Ìïú Í∏∞Í∞Ñ (Í∞úÏõî)
                    </label>
                    <input type="number" name="current_work_months" class="form-control" placeholder="Ïòà: 12" min="0" max="600">
                </div>

                <div class="field-group">
                    <label class="field-label required tooltip" data-tooltip="ÌïòÎ£®Ïóê Î™á ÏãúÍ∞Ñ ÏùºÌïòÎÇòÏöî? Ï†êÏã¨ÏãúÍ∞Ñ Ìè¨Ìï®Ìï¥ÏÑúÏöî">
                        ÌïòÎ£® Í∑ºÎ¨¥ÏãúÍ∞Ñ (ÏãúÍ∞Ñ)
                    </label>
                    <input type="number" name="daily_work_hours" class="form-control" placeholder="Ïòà: 8" min="1" max="24" step="0.5" required>
                </div>

                <div class="field-group">
                    <label class="field-label tooltip" data-tooltip="Ï†êÏã¨ÏãúÍ∞Ñ, Ìú¥Í≤åÏãúÍ∞ÑÏùÑ Î∂ÑÏúºÎ°ú Ïç®Ï£ºÏÑ∏Ïöî">
                        Ìú¥ÏãùÏãúÍ∞Ñ (Î∂Ñ)
                    </label>
                    <input type="number" name="rest_time_minutes" class="form-control" placeholder="Ïòà: 60" min="0" max="480">
                </div>

                <div class="field-group">
                    <label class="field-label tooltip" data-tooltip="ÏßÄÍ∏à Ïùº ÌïòÍ∏∞ Ï†ÑÏóê ÌñàÎçò ÏùºÏù¥ ÏûàÎã§Î©¥ Ïç®Ï£ºÏÑ∏Ïöî">
                        Ïù¥Ï†ÑÏóê ÌñàÎçò Ïùº
                    </label>
                    <textarea name="previous_work" class="form-control" rows="3" placeholder="Ïòà: Ìè¨Ïû•ÏûëÏóÖÏùÑ ÌñàÏñ¥Ïöî. Î∞ïÏä§Î•º Îì§Í≥† ÎÇòÎ•¥Îäî ÏùºÏù¥ ÎßéÏïòÏñ¥Ïöî."></textarea>
                </div>

                <div class="field-group">
                    <label class="field-label tooltip" data-tooltip="Ïù¥Ï†Ñ ÏùºÏùÑ Î™á Í∞úÏõî ÌñàÎäîÏßÄ Ïç®Ï£ºÏÑ∏Ïöî">
                        Ïù¥Ï†Ñ ÏùºÏùÑ Ìïú Í∏∞Í∞Ñ (Í∞úÏõî)
                    </label>
                    <input type="number" name="previous_work_months" class="form-control" placeholder="Ïòà: 24" min="0" max="600">
                </div>
            </div>

            <!-- Ïó¨Í∞Ä Î∞è Ï∑®ÎØ∏ÌôúÎèô ÏÑπÏÖò -->
            <div class="section-card" data-section="leisure_activity">
                <div class="section-header">
                    <div class="section-icon">üèÉ</div>
                    <div class="section-title">ÎÜÄ ÎïåÎäî Î≠ò ÌïòÏÑ∏Ïöî?</div>
                </div>

                <div class="field-group">
                    <label class="field-label tooltip" data-tooltip="Ï£ºÍ∏∞Ï†ÅÏúºÎ°ú ÌïòÎäî Ïö¥ÎèôÏù¥ÎÇò Ï∑®ÎØ∏Í∞Ä ÏûàÎÇòÏöî?">
                        Í∑úÏπôÏ†ÅÏù∏ ÌôúÎèôÏù¥ ÏûàÎÇòÏöî?
                    </label>
                    <div class="select-container">
                        <select name="regular_activity" class="form-control">
                            <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                            <option value="ÏûàÏùå">‚úÖ ÏûàÏñ¥Ïöî</option>
                            <option value="ÏóÜÏùå">‚ùå ÏóÜÏñ¥Ïöî</option>
                        </select>
                    </div>
                </div>

                <div class="field-group">
                    <label class="field-label tooltip" data-tooltip="ÏñºÎßàÎÇò ÏûêÏ£º ÌïòÏãúÎÇòÏöî?">
                        ÌôúÎèô ÎπàÎèÑ
                    </label>
                    <div class="select-container">
                        <select name="activity_frequency" class="form-control">
                            <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                            <option value="1Ï£ºÏùºÏóê 1Ìöå Ïù¥ÏÉÅ">üóìÔ∏è ÏùºÏ£ºÏùºÏóê 1Î≤à Ïù¥ÏÉÅ</option>
                            <option value="1Ï£ºÏùºÏóê 2Ìöå Ïù¥ÏÉÅ">üóìÔ∏è ÏùºÏ£ºÏùºÏóê 2Î≤à Ïù¥ÏÉÅ</option>
                            <option value="Í±∞Ïùò ÌïòÏßÄ ÏïäÏùå">üò¥ Í±∞Ïùò Ïïà Ìï¥Ïöî</option>
                        </select>
                    </div>
                </div>

                <div class="field-group">
                    <label class="field-label">Îã§Ïùå Ï§ë ÌïòÏãúÎäî Í≤ÉÎì§ÏùÑ Î™®Îëê ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî:</label>

                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="computer_related" name="computer_related" value="ÏûàÏùå">
                            <label for="computer_related">üíª Ïª¥Ìì®ÌÑ∞ Í¥ÄÎ†® ÌôúÎèô</label>
                        </div>

                        <div class="checkbox-item">
                            <input type="checkbox" id="musical_instrument" name="musical_instrument" value="ÏûàÏùå">
                            <label for="musical_instrument">üéµ ÏïÖÍ∏∞Ïó∞Ï£º (ÌîºÏïÑÎÖ∏, Î∞îÏù¥Ïò¨Î¶∞ Îì±)</label>
                        </div>

                        <div class="checkbox-item">
                            <input type="checkbox" id="handicraft" name="handicraft" value="ÏûàÏùå">
                            <label for="handicraft">üß∂ Îú®Í∞úÏßà, ÏûêÏàò, Î∂ìÍ∏ÄÏî®</label>
                        </div>

                        <div class="checkbox-item">
                            <input type="checkbox" id="sports" name="sports" value="ÏûàÏùå">
                            <label for="sports">üè∏ ÌÖåÎãàÏä§, Î∞∞ÎìúÎØºÌÑ¥, Ï∂ïÍµ¨, ÎÜçÍµ¨ Îì±</label>
                        </div>
                    </div>
                </div>

                <div class="field-group">
                    <label class="field-label tooltip" data-tooltip="ÏúÑÏóê ÏóÜÎäî Îã§Î•∏ ÌôúÎèôÏù¥ ÏûàÎã§Î©¥ Ïç®Ï£ºÏÑ∏Ïöî">
                        Í∏∞ÌÉÄ ÌôúÎèô
                    </label>
                    <textarea name="other_activity" class="form-control" rows="2" placeholder="Ïòà: Îì±ÏÇ∞, ÎÇöÏãú, ÎèÖÏÑú Îì±"></textarea>
                </div>
            </div>

            <!-- Í∞ÄÏÇ¨ÎÖ∏Îèô ÏÑπÏÖò -->
            <div class="section-card" data-section="household_work">
                <div class="section-header">
                    <div class="section-icon">üè†</div>
                    <div class="section-title">ÏßëÏóêÏÑú ÌïòÎäî ÏùºÎì§</div>
                </div>

                <div class="field-group">
                    <label class="field-label tooltip" data-tooltip="ÌïòÎ£®Ïóê ÌèâÍ∑† Î™á ÏãúÍ∞Ñ ÏßëÏïàÏùºÏùÑ ÌïòÏãúÎÇòÏöî?">
                        ÌïòÎ£® ÌèâÍ∑† ÏßëÏïàÏùº ÏãúÍ∞Ñ
                    </label>
                    <div class="select-container">
                        <select name="daily_household_hours" class="form-control">
                            <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                            <option value="Í±∞Ïùò ÌïòÏßÄ ÏïäÎäîÎã§">üò¥ Í±∞Ïùò Ïïà Ìï¥Ïöî</option>
                            <option value="1ÏãúÍ∞Ñ ÎØ∏Îßå">‚è∞ 1ÏãúÍ∞Ñ ÎØ∏Îßå</option>
                            <option value="1-2ÏãúÍ∞Ñ">‚è∞ 1-2ÏãúÍ∞Ñ</option>
                            <option value="2-3ÏãúÍ∞Ñ">‚è∞ 2-3ÏãúÍ∞Ñ</option>
                            <option value="3ÏãúÍ∞Ñ Ïù¥ÏÉÅ">‚è∞ 3ÏãúÍ∞Ñ Ïù¥ÏÉÅ</option>
                        </select>
                    </div>
                </div>

                <div class="field-group">
                    <label class="field-label">ÌïòÏãúÎäî ÏßëÏïàÏùºÏùÑ Î™®Îëê ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî:</label>

                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="cooking" name="cooking" value="ÏûàÏùå">
                            <label for="cooking">üç≥ Î∞•ÌïòÍ∏∞</label>
                        </div>

                        <div class="checkbox-item">
                            <input type="checkbox" id="laundry" name="laundry" value="ÏûàÏùå">
                            <label for="laundry">üëï Îπ®ÎûòÌïòÍ∏∞</label>
                        </div>

                        <div class="checkbox-item">
                            <input type="checkbox" id="cleaning" name="cleaning" value="ÏûàÏùå">
                            <label for="cleaning">üßπ Ï≤≠ÏÜåÌïòÍ∏∞</label>
                        </div>

                        <div class="checkbox-item">
                            <input type="checkbox" id="childcare" name="childcare" value="ÏûàÏùå">
                            <label for="childcare">üë∂ ÏïÑÏù¥ ÎèåÎ≥¥Í∏∞</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÏùòÎ£åÏßÑ ÏßÑÎã® ÏÑπÏÖò -->
            <div class="section-card" data-section="medical_history">
                <div class="section-header">
                    <div class="section-icon">üè•</div>
                    <div class="section-title">Î≥ëÏõê ÏßÑÎ£å Í≤ΩÌóò</div>
                </div>

                <div class="field-group">
                    <label class="field-label tooltip" data-tooltip="ÏùòÏÇ¨ÏÑ†ÏÉùÎãòÍªò ÏßÑÎã®Î∞õÏùÄ ÏßàÎ≥ëÏù¥ ÏûàÎã§Î©¥ Ïç®Ï£ºÏÑ∏Ïöî">
                        ÏùòÏÇ¨Î°úÎ∂ÄÌÑ∞ ÏßÑÎã®Î∞õÏùÄ ÏßàÎ≥ë
                    </label>
                    <textarea name="medical_diagnosis" class="form-control" rows="3" placeholder="Ïòà: Î™© ÎîîÏä§ÌÅ¨, ÏÜêÎ™©ÌÑ∞ÎÑêÏ¶ùÌõÑÍµ∞, ÌóàÎ¶¨ÎîîÏä§ÌÅ¨ Îì±. ÏóÜÏúºÎ©¥ 'ÏóÜÏùå'Ïù¥ÎùºÍ≥† Ïç®Ï£ºÏÑ∏Ïöî."></textarea>
                </div>

                <div class="field-group">
                    <label class="field-label tooltip" data-tooltip="ÏßÑÎã®Ïóê ÎåÄÌïú ÏûêÏÑ∏Ìïú ÎÇ¥Ïö©Ïù¥ÎÇò ÏπòÎ£å Î∞©Î≤ï Îì±ÏùÑ Ïç®Ï£ºÏÑ∏Ïöî">
                        ÏßÑÎã® ÏÑ∏Î∂ÄÏÇ¨Ìï≠
                    </label>
                    <textarea name="diagnosis_details" class="form-control" rows="3" placeholder="Ïòà: 2023ÎÖÑ 5ÏõîÏóê ÏßÑÎã®Î∞õÏïòÍ≥†, Î¨ºÎ¶¨ÏπòÎ£åÎ•º Î∞õÍ≥† ÏûàÏñ¥Ïöî."></textarea>
                </div>
            </div>

            <!-- ÌÜµÏ¶ù ÌèâÍ∞Ä ÏÑπÏÖò -->
            <div class="section-card pain-section" data-section="pain_assessment">
                <div class="section-header">
                    <div class="section-icon">üò£</div>
                    <div class="section-title">Î™∏Ïùò Ïñ¥ÎîîÍ∞Ä ÏïÑÌîàÏßÄ ÏïåÎ†§Ï£ºÏÑ∏Ïöî</div>
                </div>

                <div class="pain-grid">
                    <!-- Î™© ÌÜµÏ¶ù -->
                    <div class="body-part">
                        <div class="body-part-title">
                            <div class="body-icon">ü¶í</div>
                            Î™© Î∂ÄÏúÑ
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏñºÎßàÎÇò ÏûêÏ£º ÏïÑÌîÑÎÇòÏöî?</label>
                            <div class="select-container">
                                <select name="neck_pain_frequency" class="form-control">
                                    <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                                    <option value="ÏóÜÏùå">üòä Ïïà ÏïÑÌååÏöî</option>
                                    <option value="Í∞ÄÎÅî">üòê Í∞ÄÎÅî ÏïÑÌååÏöî</option>
                                    <option value="ÏûêÏ£º">üòü ÏûêÏ£º ÏïÑÌååÏöî</option>
                                    <option value="Ìï≠ÏÉÅ">üò¢ Ìï≠ÏÉÅ ÏïÑÌååÏöî</option>
                                </select>
                            </div>
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏñºÎßàÎÇò Ïò§Îûò ÏïÑÌîÑÎÇòÏöî?</label>
                            <div class="select-container">
                                <select name="neck_pain_duration" class="form-control">
                                    <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                                    <option value="ÏóÜÏùå">üòä Ïïà ÏïÑÌååÏöî</option>
                                    <option value="1Ï£ºÏùº ÎØ∏Îßå">üìÖ 1Ï£ºÏùºÎ≥¥Îã§ ÏßßÍ≤å</option>
                                    <option value="1Ï£ºÏùº Ïù¥ÏÉÅ">üìÖ 1Ï£ºÏùº Ïù¥ÏÉÅ</option>
                                </select>
                            </div>
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏñºÎßàÎÇò ÎßéÏù¥ ÏïÑÌîÑÎÇòÏöî?</label>
                            <div class="pain-intensity">
                                <div class="pain-emoji" data-value="ÏóÜÏùå" title="Ïïà ÏïÑÌååÏöî">üòä</div>
                                <div class="pain-emoji" data-value="ÏïΩÌïú ÌÜµÏ¶ù" title="Ï°∞Í∏à ÏïÑÌååÏöî">üòê</div>
                                <div class="pain-emoji" data-value="Ï§ëÍ∞Ñ Ï†ïÎèÑ" title="ÍΩ§ ÏïÑÌååÏöî">üòü</div>
                                <div class="pain-emoji" data-value="Ïã¨Ìïú ÌÜµÏ¶ù" title="ÎßéÏù¥ ÏïÑÌååÏöî">üò¢</div>
                                <div class="pain-emoji" data-value="Îß§Ïö∞ Ïã¨Ìïú ÌÜµÏ¶ù" title="ÎÑàÎ¨¥ ÏïÑÌååÏöî">üò≠</div>
                            </div>
                            <input type="hidden" name="neck_pain_intensity" id="neck_pain_intensity">
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏùºÌïòÎäîÎç∞ Î∞©Ìï¥Í∞Ä ÎêòÎÇòÏöî?</label>
                            <div class="select-container">
                                <select name="neck_work_interference" class="form-control">
                                    <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                                    <option value="ÏóÜÏùå">üëç Î∞©Ìï¥ Ïïà ÎèºÏöî</option>
                                    <option value="ÏûàÏùå">üëé Î∞©Ìï¥ ÎèºÏöî</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Ïñ¥Íπ® ÌÜµÏ¶ù -->
                    <div class="body-part">
                        <div class="body-part-title">
                            <div class="body-icon">üí™</div>
                            Ïñ¥Íπ® Î∂ÄÏúÑ
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏñºÎßàÎÇò ÏûêÏ£º ÏïÑÌîÑÎÇòÏöî?</label>
                            <div class="select-container">
                                <select name="shoulder_pain_frequency" class="form-control">
                                    <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                                    <option value="ÏóÜÏùå">üòä Ïïà ÏïÑÌååÏöî</option>
                                    <option value="Í∞ÄÎÅî">üòê Í∞ÄÎÅî ÏïÑÌååÏöî</option>
                                    <option value="ÏûêÏ£º">üòü ÏûêÏ£º ÏïÑÌååÏöî</option>
                                    <option value="Ìï≠ÏÉÅ">üò¢ Ìï≠ÏÉÅ ÏïÑÌååÏöî</option>
                                </select>
                            </div>
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏñºÎßàÎÇò Ïò§Îûò ÏïÑÌîÑÎÇòÏöî?</label>
                            <div class="select-container">
                                <select name="shoulder_pain_duration" class="form-control">
                                    <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                                    <option value="ÏóÜÏùå">üòä Ïïà ÏïÑÌååÏöî</option>
                                    <option value="1Ï£ºÏùº ÎØ∏Îßå">üìÖ 1Ï£ºÏùºÎ≥¥Îã§ ÏßßÍ≤å</option>
                                    <option value="1Ï£ºÏùº Ïù¥ÏÉÅ">üìÖ 1Ï£ºÏùº Ïù¥ÏÉÅ</option>
                                </select>
                            </div>
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏñºÎßàÎÇò ÎßéÏù¥ ÏïÑÌîÑÎÇòÏöî?</label>
                            <div class="pain-intensity">
                                <div class="pain-emoji" data-value="ÏóÜÏùå" title="Ïïà ÏïÑÌååÏöî">üòä</div>
                                <div class="pain-emoji" data-value="ÏïΩÌïú ÌÜµÏ¶ù" title="Ï°∞Í∏à ÏïÑÌååÏöî">üòê</div>
                                <div class="pain-emoji" data-value="Ï§ëÍ∞Ñ Ï†ïÎèÑ" title="ÍΩ§ ÏïÑÌååÏöî">üòü</div>
                                <div class="pain-emoji" data-value="Ïã¨Ìïú ÌÜµÏ¶ù" title="ÎßéÏù¥ ÏïÑÌååÏöî">üò¢</div>
                                <div class="pain-emoji" data-value="Îß§Ïö∞ Ïã¨Ìïú ÌÜµÏ¶ù" title="ÎÑàÎ¨¥ ÏïÑÌååÏöî">üò≠</div>
                            </div>
                            <input type="hidden" name="shoulder_pain_intensity" id="shoulder_pain_intensity">
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏùºÌïòÎäîÎç∞ Î∞©Ìï¥Í∞Ä ÎêòÎÇòÏöî?</label>
                            <div class="select-container">
                                <select name="shoulder_work_interference" class="form-control">
                                    <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                                    <option value="ÏóÜÏùå">üëç Î∞©Ìï¥ Ïïà ÎèºÏöî</option>
                                    <option value="ÏûàÏùå">üëé Î∞©Ìï¥ ÎèºÏöî</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Ìåî/ÌåîÍøàÏπò ÌÜµÏ¶ù -->
                    <div class="body-part">
                        <div class="body-part-title">
                            <div class="body-icon">ü¶æ</div>
                            Ìåî/ÌåîÍøàÏπò Î∂ÄÏúÑ
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏñºÎßàÎÇò ÏûêÏ£º ÏïÑÌîÑÎÇòÏöî?</label>
                            <div class="select-container">
                                <select name="arm_elbow_pain_frequency" class="form-control">
                                    <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                                    <option value="ÏóÜÏùå">üòä Ïïà ÏïÑÌååÏöî</option>
                                    <option value="Í∞ÄÎÅî">üòê Í∞ÄÎÅî ÏïÑÌååÏöî</option>
                                    <option value="ÏûêÏ£º">üòü ÏûêÏ£º ÏïÑÌååÏöî</option>
                                    <option value="Ìï≠ÏÉÅ">üò¢ Ìï≠ÏÉÅ ÏïÑÌååÏöî</option>
                                </select>
                            </div>
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏñºÎßàÎÇò Ïò§Îûò ÏïÑÌîÑÎÇòÏöî?</label>
                            <div class="select-container">
                                <select name="arm_elbow_pain_duration" class="form-control">
                                    <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                                    <option value="ÏóÜÏùå">üòä Ïïà ÏïÑÌååÏöî</option>
                                    <option value="1Ï£ºÏùº ÎØ∏Îßå">üìÖ 1Ï£ºÏùºÎ≥¥Îã§ ÏßßÍ≤å</option>
                                    <option value="1Ï£ºÏùº Ïù¥ÏÉÅ">üìÖ 1Ï£ºÏùº Ïù¥ÏÉÅ</option>
                                </select>
                            </div>
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏñºÎßàÎÇò ÎßéÏù¥ ÏïÑÌîÑÎÇòÏöî?</label>
                            <div class="pain-intensity">
                                <div class="pain-emoji" data-value="ÏóÜÏùå" title="Ïïà ÏïÑÌååÏöî">üòä</div>
                                <div class="pain-emoji" data-value="ÏïΩÌïú ÌÜµÏ¶ù" title="Ï°∞Í∏à ÏïÑÌååÏöî">üòê</div>
                                <div class="pain-emoji" data-value="Ï§ëÍ∞Ñ Ï†ïÎèÑ" title="ÍΩ§ ÏïÑÌååÏöî">üòü</div>
                                <div class="pain-emoji" data-value="Ïã¨Ìïú ÌÜµÏ¶ù" title="ÎßéÏù¥ ÏïÑÌååÏöî">üò¢</div>
                                <div class="pain-emoji" data-value="Îß§Ïö∞ Ïã¨Ìïú ÌÜµÏ¶ù" title="ÎÑàÎ¨¥ ÏïÑÌååÏöî">üò≠</div>
                            </div>
                            <input type="hidden" name="arm_elbow_pain_intensity" id="arm_elbow_pain_intensity">
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏùºÌïòÎäîÎç∞ Î∞©Ìï¥Í∞Ä ÎêòÎÇòÏöî?</label>
                            <div class="select-container">
                                <select name="arm_elbow_work_interference" class="form-control">
                                    <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                                    <option value="ÏóÜÏùå">üëç Î∞©Ìï¥ Ïïà ÎèºÏöî</option>
                                    <option value="ÏûàÏùå">üëé Î∞©Ìï¥ ÎèºÏöî</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- ÏÜêÎ™©/ÏÜê ÌÜµÏ¶ù -->
                    <div class="body-part">
                        <div class="body-part-title">
                            <div class="body-icon">üëã</div>
                            ÏÜêÎ™©/ÏÜê Î∂ÄÏúÑ
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏñºÎßàÎÇò ÏûêÏ£º ÏïÑÌîÑÎÇòÏöî?</label>
                            <div class="select-container">
                                <select name="wrist_hand_pain_frequency" class="form-control">
                                    <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                                    <option value="ÏóÜÏùå">üòä Ïïà ÏïÑÌååÏöî</option>
                                    <option value="Í∞ÄÎÅî">üòê Í∞ÄÎÅî ÏïÑÌååÏöî</option>
                                    <option value="ÏûêÏ£º">üòü ÏûêÏ£º ÏïÑÌååÏöî</option>
                                    <option value="Ìï≠ÏÉÅ">üò¢ Ìï≠ÏÉÅ ÏïÑÌååÏöî</option>
                                </select>
                            </div>
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏñºÎßàÎÇò Ïò§Îûò ÏïÑÌîÑÎÇòÏöî?</label>
                            <div class="select-container">
                                <select name="wrist_hand_pain_duration" class="form-control">
                                    <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                                    <option value="ÏóÜÏùå">üòä Ïïà ÏïÑÌååÏöî</option>
                                    <option value="1Ï£ºÏùº ÎØ∏Îßå">üìÖ 1Ï£ºÏùºÎ≥¥Îã§ ÏßßÍ≤å</option>
                                    <option value="1Ï£ºÏùº Ïù¥ÏÉÅ">üìÖ 1Ï£ºÏùº Ïù¥ÏÉÅ</option>
                                </select>
                            </div>
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏñºÎßàÎÇò ÎßéÏù¥ ÏïÑÌîÑÎÇòÏöî?</label>
                            <div class="pain-intensity">
                                <div class="pain-emoji" data-value="ÏóÜÏùå" title="Ïïà ÏïÑÌååÏöî">üòä</div>
                                <div class="pain-emoji" data-value="ÏïΩÌïú ÌÜµÏ¶ù" title="Ï°∞Í∏à ÏïÑÌååÏöî">üòê</div>
                                <div class="pain-emoji" data-value="Ï§ëÍ∞Ñ Ï†ïÎèÑ" title="ÍΩ§ ÏïÑÌååÏöî">üòü</div>
                                <div class="pain-emoji" data-value="Ïã¨Ìïú ÌÜµÏ¶ù" title="ÎßéÏù¥ ÏïÑÌååÏöî">üò¢</div>
                                <div class="pain-emoji" data-value="Îß§Ïö∞ Ïã¨Ìïú ÌÜµÏ¶ù" title="ÎÑàÎ¨¥ ÏïÑÌååÏöî">üò≠</div>
                            </div>
                            <input type="hidden" name="wrist_hand_pain_intensity" id="wrist_hand_pain_intensity">
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏùºÌïòÎäîÎç∞ Î∞©Ìï¥Í∞Ä ÎêòÎÇòÏöî?</label>
                            <div class="select-container">
                                <select name="wrist_hand_work_interference" class="form-control">
                                    <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                                    <option value="ÏóÜÏùå">üëç Î∞©Ìï¥ Ïïà ÎèºÏöî</option>
                                    <option value="ÏûàÏùå">üëé Î∞©Ìï¥ ÎèºÏöî</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- ÌóàÎ¶¨ ÌÜµÏ¶ù -->
                    <div class="body-part">
                        <div class="body-part-title">
                            <div class="body-icon">ü¶¥</div>
                            ÌóàÎ¶¨ Î∂ÄÏúÑ
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏñºÎßàÎÇò ÏûêÏ£º ÏïÑÌîÑÎÇòÏöî?</label>
                            <div class="select-container">
                                <select name="back_pain_frequency" class="form-control">
                                    <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                                    <option value="ÏóÜÏùå">üòä Ïïà ÏïÑÌååÏöî</option>
                                    <option value="Í∞ÄÎÅî">üòê Í∞ÄÎÅî ÏïÑÌååÏöî</option>
                                    <option value="ÏûêÏ£º">üòü ÏûêÏ£º ÏïÑÌååÏöî</option>
                                    <option value="Ìï≠ÏÉÅ">üò¢ Ìï≠ÏÉÅ ÏïÑÌååÏöî</option>
                                </select>
                            </div>
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏñºÎßàÎÇò Ïò§Îûò ÏïÑÌîÑÎÇòÏöî?</label>
                            <div class="select-container">
                                <select name="back_pain_duration" class="form-control">
                                    <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                                    <option value="ÏóÜÏùå">üòä Ïïà ÏïÑÌååÏöî</option>
                                    <option value="1Ï£ºÏùº ÎØ∏Îßå">üìÖ 1Ï£ºÏùºÎ≥¥Îã§ ÏßßÍ≤å</option>
                                    <option value="1Ï£ºÏùº Ïù¥ÏÉÅ">üìÖ 1Ï£ºÏùº Ïù¥ÏÉÅ</option>
                                </select>
                            </div>
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏñºÎßàÎÇò ÎßéÏù¥ ÏïÑÌîÑÎÇòÏöî?</label>
                            <div class="pain-intensity">
                                <div class="pain-emoji" data-value="ÏóÜÏùå" title="Ïïà ÏïÑÌååÏöî">üòä</div>
                                <div class="pain-emoji" data-value="ÏïΩÌïú ÌÜµÏ¶ù" title="Ï°∞Í∏à ÏïÑÌååÏöî">üòê</div>
                                <div class="pain-emoji" data-value="Ï§ëÍ∞Ñ Ï†ïÎèÑ" title="ÍΩ§ ÏïÑÌååÏöî">üòü</div>
                                <div class="pain-emoji" data-value="Ïã¨Ìïú ÌÜµÏ¶ù" title="ÎßéÏù¥ ÏïÑÌååÏöî">üò¢</div>
                                <div class="pain-emoji" data-value="Îß§Ïö∞ Ïã¨Ìïú ÌÜµÏ¶ù" title="ÎÑàÎ¨¥ ÏïÑÌååÏöî">üò≠</div>
                            </div>
                            <input type="hidden" name="back_pain_intensity" id="back_pain_intensity">
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏùºÌïòÎäîÎç∞ Î∞©Ìï¥Í∞Ä ÎêòÎÇòÏöî?</label>
                            <div class="select-container">
                                <select name="back_work_interference" class="form-control">
                                    <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                                    <option value="ÏóÜÏùå">üëç Î∞©Ìï¥ Ïïà ÎèºÏöî</option>
                                    <option value="ÏûàÏùå">üëé Î∞©Ìï¥ ÎèºÏöî</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Îã§Î¶¨/Î∞ú ÌÜµÏ¶ù -->
                    <div class="body-part">
                        <div class="body-part-title">
                            <div class="body-icon">ü¶µ</div>
                            Îã§Î¶¨/Î∞ú Î∂ÄÏúÑ
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏñºÎßàÎÇò ÏûêÏ£º ÏïÑÌîÑÎÇòÏöî?</label>
                            <div class="select-container">
                                <select name="leg_foot_pain_frequency" class="form-control">
                                    <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                                    <option value="ÏóÜÏùå">üòä Ïïà ÏïÑÌååÏöî</option>
                                    <option value="Í∞ÄÎÅî">üòê Í∞ÄÎÅî ÏïÑÌååÏöî</option>
                                    <option value="ÏûêÏ£º">üòü ÏûêÏ£º ÏïÑÌååÏöî</option>
                                    <option value="Ìï≠ÏÉÅ">üò¢ Ìï≠ÏÉÅ ÏïÑÌååÏöî</option>
                                </select>
                            </div>
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏñºÎßàÎÇò Ïò§Îûò ÏïÑÌîÑÎÇòÏöî?</label>
                            <div class="select-container">
                                <select name="leg_foot_pain_duration" class="form-control">
                                    <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                                    <option value="ÏóÜÏùå">üòä Ïïà ÏïÑÌååÏöî</option>
                                    <option value="1Ï£ºÏùº ÎØ∏Îßå">üìÖ 1Ï£ºÏùºÎ≥¥Îã§ ÏßßÍ≤å</option>
                                    <option value="1Ï£ºÏùº Ïù¥ÏÉÅ">üìÖ 1Ï£ºÏùº Ïù¥ÏÉÅ</option>
                                </select>
                            </div>
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏñºÎßàÎÇò ÎßéÏù¥ ÏïÑÌîÑÎÇòÏöî?</label>
                            <div class="pain-intensity">
                                <div class="pain-emoji" data-value="ÏóÜÏùå" title="Ïïà ÏïÑÌååÏöî">üòä</div>
                                <div class="pain-emoji" data-value="ÏïΩÌïú ÌÜµÏ¶ù" title="Ï°∞Í∏à ÏïÑÌååÏöî">üòê</div>
                                <div class="pain-emoji" data-value="Ï§ëÍ∞Ñ Ï†ïÎèÑ" title="ÍΩ§ ÏïÑÌååÏöî">üòü</div>
                                <div class="pain-emoji" data-value="Ïã¨Ìïú ÌÜµÏ¶ù" title="ÎßéÏù¥ ÏïÑÌååÏöî">üò¢</div>
                                <div class="pain-emoji" data-value="Îß§Ïö∞ Ïã¨Ìïú ÌÜµÏ¶ù" title="ÎÑàÎ¨¥ ÏïÑÌååÏöî">üò≠</div>
                            </div>
                            <input type="hidden" name="leg_foot_pain_intensity" id="leg_foot_pain_intensity">
                        </div>

                        <div class="field-group">
                            <label class="field-label">ÏùºÌïòÎäîÎç∞ Î∞©Ìï¥Í∞Ä ÎêòÎÇòÏöî?</label>
                            <div class="select-container">
                                <select name="leg_foot_work_interference" class="form-control">
                                    <option value="">ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</option>
                                    <option value="ÏóÜÏùå">üëç Î∞©Ìï¥ Ïïà ÎèºÏöî</option>
                                    <option value="ÏûàÏùå">üëé Î∞©Ìï¥ ÎèºÏöî</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ïï°ÏÖò Î≤ÑÌäºÎì§ -->
            <div class="form-actions">
                <div class="auto-save-status" id="autoSaveStatus">ÏûêÎèô Ï†ÄÏû• Ï§ë...</div>
                <div>
                    <button type="button" class="btn btn-primary" onclick="saveProgress()">üíæ Ï†ÄÏû•ÌïòÍ∏∞</button>
                    <button type="submit" class="btn btn-success">‚úÖ Ï†úÏ∂úÌïòÍ∏∞</button>
                </div>
            </div>
        </form>
    </div>

    <script>
        // Ï†ÑÏó≠ Î≥ÄÏàò
        let currentSection = 0;
        const totalSections = document.querySelectorAll('.section-card').length;
        let autoSaveInterval;

        // DOM Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', function() {
            initializeForm();
            setupPainIntensitySelectors();
            setupCheckboxHandling();
            startAutoSave();
            updateProgress();
        });

        // Ìèº Ï¥àÍ∏∞Ìôî
        function initializeForm() {
            // Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóêÏÑú Ï†ÄÏû•Îêú Îç∞Ïù¥ÌÑ∞ Î∂àÎü¨Ïò§Í∏∞
            loadSavedData();

            // Ïä§ÌÅ¨Î°§ Ïù¥Î≤§Ìä∏Î°ú ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
            window.addEventListener('scroll', updateProgress);

            // Ìèº Î≥ÄÍ≤Ω Í∞êÏßÄ
            const form = document.getElementById('surveyForm');
            form.addEventListener('change', function() {
                updateProgress();
                saveToLocalStorage();
            });

            // ÏûÖÎ†• ÌïÑÎìú Î≥ÄÍ≤Ω Í∞êÏßÄ
            const inputs = form.querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                input.addEventListener('input', function() {
                    updateProgress();
                    saveToLocalStorage();
                });
            });
        }

        // ÌÜµÏ¶ù Í∞ïÎèÑ ÏÑ†ÌÉùÍ∏∞ ÏÑ§Ï†ï
        function setupPainIntensitySelectors() {
            const painContainers = document.querySelectorAll('.pain-intensity');

            painContainers.forEach(container => {
                const emojis = container.querySelectorAll('.pain-emoji');
                const hiddenInput = container.parentElement.querySelector('input[type="hidden"]');

                emojis.forEach((emoji, index) => {
                    emoji.addEventListener('click', function() {
                        // Î™®Îì† Ïù¥Î™®ÏßÄÏóêÏÑú selected ÌÅ¥ÎûòÏä§ Ï†úÍ±∞
                        emojis.forEach(e => e.classList.remove('selected'));

                        // ÌÅ¥Î¶≠Îêú Ïù¥Î™®ÏßÄÏóê selected ÌÅ¥ÎûòÏä§ Ï∂îÍ∞Ä
                        this.classList.add('selected');

                        // hidden inputÏóê Í∞í ÏÑ§Ï†ï
                        if (hiddenInput) {
                            hiddenInput.value = this.dataset.value;
                        }

                        // ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
                        updateProgress();
                        saveToLocalStorage();
                    });
                });
            });
        }

        // Ï≤¥ÌÅ¨Î∞ïÏä§ Ï≤òÎ¶¨ ÏÑ§Ï†ï
        function setupCheckboxHandling() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');

            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    // Ï≤¥ÌÅ¨ÎêòÏßÄ ÏïäÏùÄ Ï≤¥ÌÅ¨Î∞ïÏä§Îäî "ÏóÜÏùå" Í∞íÏùÑ Ï†ÑÏÜ°
                    if (!this.checked) {
                        // hidden input ÏÉùÏÑ±ÌïòÏó¨ "ÏóÜÏùå" Í∞í Ï†ÑÏÜ°
                        let hiddenInput = this.parentElement.querySelector('input[type="hidden"][name="' + this.name + '"]');
                        if (!hiddenInput) {
                            hiddenInput = document.createElement('input');
                            hiddenInput.type = 'hidden';
                            hiddenInput.name = this.name;
                            this.parentElement.appendChild(hiddenInput);
                        }
                        hiddenInput.value = 'ÏóÜÏùå';
                    } else {
                        // Ï≤¥ÌÅ¨Îêú Í≤ΩÏö∞ hidden input Ï†úÍ±∞
                        const hiddenInput = this.parentElement.querySelector('input[type="hidden"][name="' + this.name + '"]');
                        if (hiddenInput) {
                            hiddenInput.remove();
                        }
                    }
                });
            });
        }

        // ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
        function updateProgress() {
            const form = document.getElementById('surveyForm');
            const inputs = form.querySelectorAll('input, select, textarea');
            const requiredInputs = form.querySelectorAll('input[required], select[required], textarea[required]');

            let filledInputs = 0;
            let totalInputs = inputs.length;
            let filledRequired = 0;
            let totalRequired = requiredInputs.length;

            inputs.forEach(input => {
                if (input.type === 'hidden') return;

                if (input.type === 'checkbox') {
                    if (input.checked) filledInputs++;
                } else if (input.value.trim() !== '') {
                    filledInputs++;
                }
            });

            requiredInputs.forEach(input => {
                if (input.value.trim() !== '') {
                    filledRequired++;
                }
            });

            const progress = Math.round((filledInputs / totalInputs) * 100);
            const requiredProgress = Math.round((filledRequired / totalRequired) * 100);

            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');

            progressFill.style.width = progress + '%';

            if (progress === 100) {
                progressText.textContent = `üéâ ÏôÑÎ£å! (${progress}%)`;
                progressText.style.color = '#28a745';
            } else if (requiredProgress === 100) {
                progressText.textContent = `‚úÖ ÌïÑÏàòÌï≠Î™© ÏôÑÎ£å (Ï†ÑÏ≤¥ ${progress}%)`;
                progressText.style.color = '#007bff';
            } else {
                progressText.textContent = `ÏßÑÌñâÏ§ë... (${progress}% | ÌïÑÏàò ${requiredProgress}%)`;
                progressText.style.color = '#666';
            }
        }

        // Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóê Ï†ÄÏû•
        function saveToLocalStorage() {
            const form = document.getElementById('surveyForm');
            const formData = new FormData(form);
            const data = {};

            for (let [key, value] of formData.entries()) {
                if (data[key]) {
                    if (Array.isArray(data[key])) {
                        data[key].push(value);
                    } else {
                        data[key] = [data[key], value];
                    }
                } else {
                    data[key] = value;
                }
            }

            // ÌÜµÏ¶ù Í∞ïÎèÑ Í∞íÎì§ÎèÑ Ï†ÄÏû•
            const painIntensityInputs = document.querySelectorAll('input[type="hidden"][name*="pain_intensity"]');
            painIntensityInputs.forEach(input => {
                if (input.value) {
                    data[input.name] = input.value;
                }
            });

            localStorage.setItem('survey_001_data', JSON.stringify(data));

            // Ï†ÄÏû• ÏÉÅÌÉú ÌëúÏãú
            const status = document.getElementById('autoSaveStatus');
            status.textContent = 'üíæ ÏûêÎèô Ï†ÄÏû•Îê® (' + new Date().toLocaleTimeString() + ')';
            status.style.color = '#28a745';
        }

        // Ï†ÄÏû•Îêú Îç∞Ïù¥ÌÑ∞ Î∂àÎü¨Ïò§Í∏∞
        function loadSavedData() {
            const savedData = localStorage.getItem('survey_001_data');
            if (!savedData) return;

            try {
                const data = JSON.parse(savedData);
                const form = document.getElementById('surveyForm');

                Object.keys(data).forEach(key => {
                    const element = form.querySelector(`[name="${key}"]`);
                    if (!element) return;

                    if (element.type === 'checkbox') {
                        element.checked = data[key] === 'ÏûàÏùå';
                    } else {
                        element.value = data[key];
                    }

                    // ÌÜµÏ¶ù Í∞ïÎèÑ Ïù¥Î™®ÏßÄ ÏÑ†ÌÉù ÏÉÅÌÉú Î≥µÏõê
                    if (key.includes('pain_intensity')) {
                        const painContainer = element.closest('.field-group').querySelector('.pain-intensity');
                        if (painContainer) {
                            const emojis = painContainer.querySelectorAll('.pain-emoji');
                            emojis.forEach(emoji => {
                                emoji.classList.remove('selected');
                                if (emoji.dataset.value === data[key]) {
                                    emoji.classList.add('selected');
                                }
                            });
                        }
                    }
                });

                // ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
                updateProgress();

            } catch (e) {
                console.error('Ï†ÄÏû•Îêú Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§ÎäîÎç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§:', e);
            }
        }

        // ÏûêÎèô Ï†ÄÏû• ÏãúÏûë
        function startAutoSave() {
            autoSaveInterval = setInterval(function() {
                saveToLocalStorage();
            }, 30000); // 30Ï¥àÎßàÎã§ ÏûêÎèô Ï†ÄÏû•
        }

        // ÏàòÎèô Ï†ÄÏû•
        function saveProgress() {
            saveToLocalStorage();
            alert('üíæ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§!\n\nÏñ∏Ï†úÎì†ÏßÄ ÎèåÏïÑÏôÄÏÑú Ïù¥Ïñ¥ÏÑú ÏûëÏÑ±ÌïòÏã§ Ïàò ÏûàÏñ¥Ïöî.');
        }

        // Îã§ÌÅ¨ Î™®Îìú ÌÜ†Í∏Ä
        function toggleTheme() {
            const body = document.body;
            const button = document.querySelector('.theme-toggle');

            if (body.classList.contains('dark-mode')) {
                body.classList.remove('dark-mode');
                button.textContent = 'üåô Îã§ÌÅ¨Î™®Îìú';
                localStorage.setItem('theme', 'light');
            } else {
                body.classList.add('dark-mode');
                button.textContent = '‚òÄÔ∏è ÎùºÏù¥Ìä∏Î™®Îìú';
                localStorage.setItem('theme', 'dark');
            }
        }

        // ÌÖåÎßà ÏÑ§Ï†ï Î∂àÎü¨Ïò§Í∏∞
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                document.querySelector('.theme-toggle').textContent = '‚òÄÔ∏è ÎùºÏù¥Ìä∏Î™®Îìú';
            }
        });

        // Ìèº Ï†úÏ∂ú Ïãú Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄ Ï†ïÎ¶¨
        document.getElementById('surveyForm').addEventListener('submit', function() {
            localStorage.removeItem('survey_001_data');
        });

        // ÌéòÏù¥ÏßÄ Î≤óÏñ¥ÎÇ† Îïå Í≤ΩÍ≥†
        window.addEventListener('beforeunload', function(e) {
            const form = document.getElementById('surveyForm');
            const inputs = form.querySelectorAll('input, select, textarea');
            let hasData = false;

            inputs.forEach(input => {
                if (input.value.trim() !== '' && input.type !== 'hidden') {
                    hasData = true;
                }
            });

            if (hasData) {
                e.preventDefault();
                e.returnValue = 'ÏûëÏÑ± Ï§ëÏù∏ ÎÇ¥Ïö©Ïù¥ ÏûàÏäµÎãàÎã§. Ï†ïÎßê ÎÇòÍ∞ÄÏãúÍ≤†ÏäµÎãàÍπå?';
            }
        });

        // Ï†ëÍ∑ºÏÑ± Í∞úÏÑ†: ÌÇ§Î≥¥Îìú ÎÇ¥ÎπÑÍ≤åÏù¥ÏÖò
        document.addEventListener('keydown', function(e) {
            // Ctrl + EnterÎ°ú Ìèº Ï†úÏ∂ú
            if (e.ctrlKey && e.key === 'Enter') {
                document.getElementById('surveyForm').submit();
            }

            // Ctrl + SÎ°ú Ï†ÄÏû•
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                saveProgress();
            }
        });
    </script>
</body>
</html>