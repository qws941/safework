{% extends "base.html" %}

{% block title %}ì‹ ê·œ ì…ì‚¬ì ê±´ê°•ê²€ì§„í‘œ - {{ app_name }}{% endblock %}

{% block extra_css %}
<style>
    .survey-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 15px;
        min-width: 0;
        overflow-x: hidden;
    }
    
    .section-card {
        background: #ffffff;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        border: 1px solid #e5e7eb;
    }
    
    .section-title {
        color: #1f2937;
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #3b82f6;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .form-row {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
        flex-wrap: wrap;
    }
    
    .form-group {
        flex: 1;
        min-width: 250px;
    }
    
    .form-group.half {
        flex: 0 0 calc(50% - 7.5px);
        min-width: 150px;
    }
    
    .form-group.third {
        flex: 0 0 calc(33.333% - 10px);
        min-width: 120px;
    }
    
    .form-label {
        display: block;
        font-weight: 500;
        color: #374151;
        margin-bottom: 5px;
        font-size: 0.9rem;
    }
    
    .form-control {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        font-size: 14px;
        background: #ffffff;
        transition: border-color 0.2s, box-shadow 0.2s;
    }
    
    .form-control:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    .radio-group {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-top: 8px;
    }
    
    .radio-item {
        display: flex;
        align-items: center;
        gap: 6px;
    }
    
    .radio-item input {
        margin: 0;
    }
    
    .radio-item label {
        margin: 0;
        font-size: 0.9rem;
        color: #374151;
        cursor: pointer;
    }
    
    .btn-primary {
        background: #3b82f6;
        border: none;
        padding: 12px 30px;
        border-radius: 8px;
        font-weight: 500;
        font-size: 1rem;
        transition: background-color 0.2s;
    }
    
    .btn-primary:hover {
        background: #2563eb;
    }
    
    .text-danger {
        color: #ef4444 !important;
    }
    
    @media (max-width: 768px) {
        .survey-container {
            padding: 10px;
        }
        
        .form-group,
        .form-group.half,
        .form-group.third {
            min-width: 100%;
            flex: 1 1 100%;
        }
        
        .radio-group {
            gap: 10px;
        }
        
        .section-card {
            padding: 15px;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="survey-container">
    <div class="text-center mb-4">
        <h1 class="h2 text-primary mb-2">ì‹ ê·œ ì…ì‚¬ì ê±´ê°•ê²€ì§„í‘œ</h1>
        <p class="text-muted">ê±´ê°•í•œ ì—…ë¬´ í™˜ê²½ì„ ìœ„í•œ ì‚¬ì „ ê±´ê°• ì •ë³´ ìˆ˜ì§‘</p>
    </div>
            
    <form method="POST" action="{{ url_for('survey.new_employee_health_checkup_form') }}">
        
        <!-- I. ê¸°ë³¸ ì •ë³´ -->
        <div class="section-card">
            <h3 class="section-title">
                <span>ğŸ“‹</span> I. ê¸°ë³¸ ì •ë³´
            </h3>
            <div class="form-row">
                <div class="form-group third">
                    <label class="form-label" for="employee_number">ì‚¬ë²ˆ <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" name="employee_number" id="employee_number" required>
                </div>
                <div class="form-group third">
                    <label class="form-label" for="name">ì„±ëª… <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" name="name" id="name" required>
                </div>
                <div class="form-group third">
                    <label class="form-label" for="age">ë‚˜ì´ <span class="text-danger">*</span></label>
                    <input type="number" class="form-control" name="age" id="age" min="18" max="100" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group half">
                    <label class="form-label">ì„±ë³„ <span class="text-danger">*</span></label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" name="gender" id="gender_male" value="ë‚¨" required>
                            <label for="gender_male">ë‚¨</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="gender" id="gender_female" value="ì—¬" required>
                            <label for="gender_female">ì—¬</label>
                        </div>
                    </div>
                </div>
                <div class="form-group half">
                    <label class="form-label" for="department">ë¶€ì„œ <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" name="department" id="department" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group half">
                    <label class="form-label" for="position">ì§ê¸‰ <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" name="position" id="position" required>
                </div>
                <div class="form-group half">
                    <label class="form-label" for="hire_date">ì…ì‚¬ì˜ˆì •ì¼</label>
                    <input type="date" class="form-control" name="hire_date" id="hire_date">
                </div>
            </div>
        </div>

        <!-- II. ì‹ ì²´ ì •ë³´ -->
        <div class="section-card">
            <h3 class="section-title">
                <span>ğŸ“</span> II. ì‹ ì²´ ì •ë³´
            </h3>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="height_cm">ì‹ ì¥ (cm)</label>
                                    <input type="number" class="form-control" name="height_cm" id="height_cm" min="100" max="250" step="0.1">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="weight_kg">ì²´ì¤‘ (kg)</label>
                                    <input type="number" class="form-control" name="weight_kg" id="weight_kg" min="30" max="200" step="0.1">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="blood_type">í˜ˆì•¡í˜•</label>
                                    <select class="form-select" name="blood_type" id="blood_type">
                                        <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                                        <option value="A">A</option>
                                        <option value="B">B</option>
                                        <option value="O">O</option>
                                        <option value="AB">AB</option>
                                        <option value="unknown">ëª¨ë¦„</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="vision_left">ì‹œë ¥ (ì¢Œ)</label>
                                    <input type="number" class="form-control" name="vision_left" id="vision_left" min="0" max="2.0" step="0.1">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="vision_right">ì‹œë ¥ (ìš°)</label>
                                    <input type="number" class="form-control" name="vision_right" id="vision_right" min="0" max="2.0" step="0.1">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="hearing_left">ì²­ë ¥ (ì¢Œ)</label>
                                    <select class="form-select" name="hearing_left">
                                        <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                                        <option value="ì •ìƒ">ì •ìƒ</option>
                                        <option value="ê²½ë„ë‚œì²­">ê²½ë„ë‚œì²­</option>
                                        <option value="ì¤‘ë“±ë„ë‚œì²­">ì¤‘ë“±ë„ë‚œì²­</option>
                                        <option value="ê³ ë„ë‚œì²­">ê³ ë„ë‚œì²­</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="hearing_right">ì²­ë ¥ (ìš°)</label>
                                    <select class="form-select" name="hearing_right">
                                        <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                                        <option value="ì •ìƒ">ì •ìƒ</option>
                                        <option value="ê²½ë„ë‚œì²­">ê²½ë„ë‚œì²­</option>
                                        <option value="ì¤‘ë“±ë„ë‚œì²­">ì¤‘ë“±ë„ë‚œì²­</option>
                                        <option value="ê³ ë„ë‚œì²­">ê³ ë„ë‚œì²­</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="blood_pressure">í˜ˆì•• (ìˆ˜ì¶•ê¸°/ì´ì™„ê¸°)</label>
                                    <input type="text" class="form-control" name="blood_pressure" id="blood_pressure" placeholder="ì˜ˆ: 120/80">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ê¸°ì¡´ ì§ˆí™˜ ì´ë ¥ ì„¹ì…˜ -->
                <div class="card mb-4">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="mb-0">III. ê¸°ì¡´ ì§ˆí™˜ ë° ì˜ë£Œ ì´ë ¥</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group mb-3">
                            <label for="existing_conditions">ê¸°ì¡´ ì§ˆí™˜ (ìˆëŠ” ê²½ìš° ìƒì„¸íˆ ê¸°ì…)</label>
                            <textarea class="form-control" name="existing_conditions" id="existing_conditions" rows="3" placeholder="ê³ í˜ˆì••, ë‹¹ë‡¨ë³‘, ì‹¬ì¥ì§ˆí™˜, ê°„ì§ˆí™˜, ì‹ ì¥ì§ˆí™˜, ê·¼ê³¨ê²©ê³„ì§ˆí™˜ ë“±"></textarea>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="medication_history">ë³µìš© ì¤‘ì¸ ì•½ë¬¼</label>
                            <textarea class="form-control" name="medication_history" id="medication_history" rows="2" placeholder="í˜„ì¬ ë³µìš© ì¤‘ì¸ ì²˜ë°©ì•½ì´ë‚˜ ê±´ê°•ë³´ì¡°ì‹í’ˆ"></textarea>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="allergy_history">ì•Œë ˆë¥´ê¸° ì´ë ¥</label>
                            <textarea class="form-control" name="allergy_history" id="allergy_history" rows="2" placeholder="ìŒì‹, ì•½ë¬¼, í™˜ê²½ ì•Œë ˆë¥´ê¸° ë“±"></textarea>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="surgery_history">ìˆ˜ìˆ  ì´ë ¥</label>
                            <textarea class="form-control" name="surgery_history" id="surgery_history" rows="2" placeholder="ê³¼ê±° ë°›ì€ ìˆ˜ìˆ ì´ë‚˜ ì‹œìˆ "></textarea>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label>ê°€ì¡±ë ¥</label>
                            <div class="form-check-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="family_history" value="ê³ í˜ˆì••" id="family_hypertension">
                                    <label class="form-check-label" for="family_hypertension">ê³ í˜ˆì••</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="family_history" value="ë‹¹ë‡¨ë³‘" id="family_diabetes">
                                    <label class="form-check-label" for="family_diabetes">ë‹¹ë‡¨ë³‘</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="family_history" value="ì‹¬ì¥ì§ˆí™˜" id="family_heart">
                                    <label class="form-check-label" for="family_heart">ì‹¬ì¥ì§ˆí™˜</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="family_history" value="ì•”" id="family_cancer">
                                    <label class="form-check-label" for="family_cancer">ì•”</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="family_history" value="ê¸°íƒ€" id="family_other">
                                    <label class="form-check-label" for="family_other">ê¸°íƒ€</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ìƒí™œ ìŠµê´€ ì„¹ì…˜ -->
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">IV. ìƒí™œ ìŠµê´€</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label>í¡ì—° ìƒíƒœ</label>
                                    <div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="smoking_status" value="ë¹„í¡ì—°" id="smoking_never">
                                            <label class="form-check-label" for="smoking_never">ë¹„í¡ì—°</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="smoking_status" value="ê¸ˆì—°" id="smoking_quit">
                                            <label class="form-check-label" for="smoking_quit">ê¸ˆì—°</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="smoking_status" value="í¡ì—°" id="smoking_current">
                                            <label class="form-check-label" for="smoking_current">í¡ì—°</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group mb-3" id="smoking_details" style="display: none;">
                                    <label for="smoking_amount">ì¼ì¼ í¡ì—°ëŸ‰ (ê°œë¹„)</label>
                                    <input type="number" class="form-control" name="smoking_amount" id="smoking_amount" min="0">
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label>ìŒì£¼ ìƒíƒœ</label>
                                    <div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="drinking_status" value="ê¸ˆì£¼" id="drinking_never">
                                            <label class="form-check-label" for="drinking_never">ê¸ˆì£¼</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="drinking_status" value="ê°€ë”" id="drinking_sometimes">
                                            <label class="form-check-label" for="drinking_sometimes">ê°€ë”</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="drinking_status" value="ì •ê¸°ì " id="drinking_regular">
                                            <label class="form-check-label" for="drinking_regular">ì •ê¸°ì </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group mb-3" id="drinking_details" style="display: none;">
                                    <label for="drinking_amount">ì£¼ë‹¹ ìŒì£¼ëŸ‰ (ì”)</label>
                                    <input type="number" class="form-control" name="drinking_amount" id="drinking_amount" min="0">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="exercise_habits">ìš´ë™ ìŠµê´€</label>
                            <textarea class="form-control" name="exercise_habits" id="exercise_habits" rows="2" placeholder="ì¢…ë¥˜, ë¹ˆë„, ê°•ë„ ë“±"></textarea>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="sleep_hours">í‰ê·  ìˆ˜ë©´ ì‹œê°„ (ì‹œê°„)</label>
                            <input type="number" class="form-control" name="sleep_hours" id="sleep_hours" min="1" max="24" step="0.5">
                        </div>
                    </div>
                </div>

                <!-- ì—…ë¬´ ê´€ë ¨ ê±´ê°• ì²´í¬ ì„¹ì…˜ -->
                <div class="card mb-4">
                    <div class="card-header bg-danger text-white">
                        <h5 class="mb-0">V. ì—…ë¬´ ì í•©ì„± í‰ê°€</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group mb-3">
                            <label>ì—…ë¬´ ìˆ˜í–‰ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆëŠ” ì‹ ì²´ì  ì œì•½ì‚¬í•­</label>
                            <div class="form-check-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="physical_limitations" value="ì¤‘ëŸ‰ë¬¼ ì·¨ê¸‰ ì œí•œ" id="limit_heavy">
                                    <label class="form-check-label" for="limit_heavy">ì¤‘ëŸ‰ë¬¼ ì·¨ê¸‰ ì œí•œ</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="physical_limitations" value="ì¥ì‹œê°„ ì„œì„œ ì‘ì—… ì œí•œ" id="limit_standing">
                                    <label class="form-check-label" for="limit_standing">ì¥ì‹œê°„ ì„œì„œ ì‘ì—… ì œí•œ</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="physical_limitations" value="ê³ ì†Œ ì‘ì—… ì œí•œ" id="limit_height">
                                    <label class="form-check-label" for="limit_height">ê³ ì†Œ ì‘ì—… ì œí•œ</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="physical_limitations" value="í™”í•™ë¬¼ì§ˆ ë…¸ì¶œ ì œí•œ" id="limit_chemical">
                                    <label class="form-check-label" for="limit_chemical">í™”í•™ë¬¼ì§ˆ ë…¸ì¶œ ì œí•œ</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="physical_limitations" value="ì†ŒìŒ í™˜ê²½ ì œí•œ" id="limit_noise">
                                    <label class="form-check-label" for="limit_noise">ì†ŒìŒ í™˜ê²½ ì œí•œ</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="physical_limitations" value="ì—†ìŒ" id="limit_none">
                                    <label class="form-check-label" for="limit_none">ì—†ìŒ</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="special_considerations">íŠ¹ë³„íˆ ì£¼ì˜í•´ì•¼ í•  ì‚¬í•­</label>
                            <textarea class="form-control" name="special_considerations" id="special_considerations" rows="3"></textarea>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="emergency_contact">ì‘ê¸‰ ì—°ë½ì²˜</label>
                            <input type="text" class="form-control" name="emergency_contact" id="emergency_contact" placeholder="ì´ë¦„: í™ê¸¸ë™, ê´€ê³„: ë°°ìš°ì, ì—°ë½ì²˜: 010-1234-5678">
                        </div>
                    </div>
                </div>

                <div class="text-center mb-4">
                    <button type="submit" class="btn btn-info btn-lg">
                        <i class="bi bi-check-circle"></i> ì œì¶œí•˜ê¸°
                    </button>
                    <a href="{{ url_for('main.index') }}" class="btn btn-secondary btn-lg ms-2">
                        <i class="bi bi-arrow-left"></i> ì·¨ì†Œ
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // í¡ì—° ìƒíƒœì— ë”°ë¼ ìƒì„¸ ì •ë³´ í‘œì‹œ/ìˆ¨ê¹€
    const smokingRadios = document.querySelectorAll('input[name="smoking_status"]');
    const smokingDetails = document.getElementById('smoking_details');
    
    smokingRadios.forEach(function(radio) {
        radio.addEventListener('change', function() {
            if (this.value === 'í¡ì—°') {
                smokingDetails.style.display = 'block';
            } else {
                smokingDetails.style.display = 'none';
            }
        });
    });
    
    // ìŒì£¼ ìƒíƒœì— ë”°ë¼ ìƒì„¸ ì •ë³´ í‘œì‹œ/ìˆ¨ê¹€
    const drinkingRadios = document.querySelectorAll('input[name="drinking_status"]');
    const drinkingDetails = document.getElementById('drinking_details');
    
    drinkingRadios.forEach(function(radio) {
        radio.addEventListener('change', function() {
            if (this.value === 'ì •ê¸°ì ') {
                drinkingDetails.style.display = 'block';
            } else {
                drinkingDetails.style.display = 'none';
            }
        });
    });
});
</script>
{% endblock %}