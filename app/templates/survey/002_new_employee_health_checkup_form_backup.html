{% extends "base.html" %}

{% block title %}Ïã†Í∑ú ÏûÖÏÇ¨Ïûê Í±¥Í∞ïÍ≤ÄÏßÑÌëú - {{ app_name }}{% endblock %}

{% block extra_css %}
<style>
    .survey-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 15px;
        min-width: 0;
        overflow-x: hidden;
    }
    
    .section-card {
        background: #ffffff;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        border: 1px solid #e5e7eb;
    }
    
    .section-title {
        color: #1f2937;
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #3b82f6;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .form-row {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
        flex-wrap: wrap;
    }
    
    .form-group {
        flex: 1;
        min-width: 250px;
    }
    
    .form-group.half {
        flex: 0 0 calc(50% - 7.5px);
        min-width: 150px;
    }
    
    .form-group.third {
        flex: 0 0 calc(33.333% - 10px);
        min-width: 120px;
    }
    
    .form-label {
        display: block;
        font-weight: 500;
        color: #374151;
        margin-bottom: 5px;
        font-size: 0.9rem;
    }
    
    .form-control {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        font-size: 14px;
        background: #ffffff;
        transition: border-color 0.2s, box-shadow 0.2s;
    }
    
    .form-control:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    .radio-group {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-top: 8px;
    }
    
    .radio-item {
        display: flex;
        align-items: center;
        gap: 6px;
    }
    
    .radio-item input {
        margin: 0;
    }
    
    .radio-item label {
        margin: 0;
        font-size: 0.9rem;
        color: #374151;
        cursor: pointer;
    }
    
    .btn-primary {
        background: #3b82f6;
        border: none;
        padding: 12px 30px;
        border-radius: 8px;
        font-weight: 500;
        font-size: 1rem;
        transition: background-color 0.2s;
    }
    
    .btn-primary:hover {
        background: #2563eb;
    }
    
    .text-danger {
        color: #ef4444 !important;
    }
    
    @media (max-width: 768px) {
        .survey-container {
            padding: 10px;
        }
        
        .form-group,
        .form-group.half,
        .form-group.third {
            min-width: 100%;
            flex: 1 1 100%;
        }
        
        .radio-group {
            gap: 10px;
        }
        
        .section-card {
            padding: 15px;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="survey-container">
    <div class="text-center mb-4">
        <h1 class="h2 text-primary mb-2">Ïã†Í∑ú ÏûÖÏÇ¨Ïûê Í±¥Í∞ïÍ≤ÄÏßÑÌëú</h1>
        <p class="text-muted">Í±¥Í∞ïÌïú ÏóÖÎ¨¥ ÌôòÍ≤ΩÏùÑ ÏúÑÌïú ÏÇ¨Ï†Ñ Í±¥Í∞ï Ï†ïÎ≥¥ ÏàòÏßë</p>
    </div>
            
    <form method="POST" action="{{ url_for('survey.new_employee_health_checkup_form') }}">
        
        <!-- I. Í∏∞Î≥∏ Ï†ïÎ≥¥ -->
        <div class="section-card">
            <h3 class="section-title">
                <span>üìã</span> I. Í∏∞Î≥∏ Ï†ïÎ≥¥
            </h3>
            <div class="form-row">
                <div class="form-group third">
                    <label class="form-label" for="employee_number">ÏÇ¨Î≤à <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" name="employee_number" id="employee_number" required>
                </div>
                <div class="form-group third">
                    <label class="form-label" for="name">ÏÑ±Î™Ö <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" name="name" id="name" required>
                </div>
                <div class="form-group third">
                    <label class="form-label" for="age">ÎÇòÏù¥ <span class="text-danger">*</span></label>
                    <input type="number" class="form-control" name="age" id="age" min="18" max="100" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group half">
                    <label class="form-label">ÏÑ±Î≥Ñ <span class="text-danger">*</span></label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" name="gender" id="gender_male" value="ÎÇ®" required>
                            <label for="gender_male">ÎÇ®</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="gender" id="gender_female" value="Ïó¨" required>
                            <label for="gender_female">Ïó¨</label>
                        </div>
                    </div>
                </div>
                <div class="form-group half">
                    <label class="form-label" for="department">Î∂ÄÏÑú <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" name="department" id="department" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group half">
                    <label class="form-label" for="position">ÏßÅÍ∏â <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" name="position" id="position" required>
                </div>
                <div class="form-group half">
                    <label class="form-label" for="hire_date">ÏûÖÏÇ¨ÏòàÏ†ïÏùº</label>
                    <input type="date" class="form-control" name="hire_date" id="hire_date">
                </div>
            </div>
        </div>

        <!-- II. Ïã†Ï≤¥ Ï†ïÎ≥¥ -->
        <div class="section-card">
            <h3 class="section-title">
                <span>üìè</span> II. Ïã†Ï≤¥ Ï†ïÎ≥¥
            </h3>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="height_cm">Ïã†Ïû• (cm)</label>
                                    <input type="number" class="form-control" name="height_cm" id="height_cm" min="100" max="250" step="0.1">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="weight_kg">Ï≤¥Ï§ë (kg)</label>
                                    <input type="number" class="form-control" name="weight_kg" id="weight_kg" min="30" max="200" step="0.1">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="blood_type">ÌòàÏï°Ìòï</label>
                                    <select class="form-select" name="blood_type" id="blood_type">
                                        <option value="">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                                        <option value="A">A</option>
                                        <option value="B">B</option>
                                        <option value="O">O</option>
                                        <option value="AB">AB</option>
                                        <option value="unknown">Î™®Î¶Ñ</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="vision_left">ÏãúÎ†• (Ï¢å)</label>
                                    <input type="number" class="form-control" name="vision_left" id="vision_left" min="0" max="2.0" step="0.1">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="vision_right">ÏãúÎ†• (Ïö∞)</label>
                                    <input type="number" class="form-control" name="vision_right" id="vision_right" min="0" max="2.0" step="0.1">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="hearing_left">Ï≤≠Î†• (Ï¢å)</label>
                                    <select class="form-select" name="hearing_left">
                                        <option value="">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                                        <option value="Ï†ïÏÉÅ">Ï†ïÏÉÅ</option>
                                        <option value="Í≤ΩÎèÑÎÇúÏ≤≠">Í≤ΩÎèÑÎÇúÏ≤≠</option>
                                        <option value="Ï§ëÎì±ÎèÑÎÇúÏ≤≠">Ï§ëÎì±ÎèÑÎÇúÏ≤≠</option>
                                        <option value="Í≥†ÎèÑÎÇúÏ≤≠">Í≥†ÎèÑÎÇúÏ≤≠</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="hearing_right">Ï≤≠Î†• (Ïö∞)</label>
                                    <select class="form-select" name="hearing_right">
                                        <option value="">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                                        <option value="Ï†ïÏÉÅ">Ï†ïÏÉÅ</option>
                                        <option value="Í≤ΩÎèÑÎÇúÏ≤≠">Í≤ΩÎèÑÎÇúÏ≤≠</option>
                                        <option value="Ï§ëÎì±ÎèÑÎÇúÏ≤≠">Ï§ëÎì±ÎèÑÎÇúÏ≤≠</option>
                                        <option value="Í≥†ÎèÑÎÇúÏ≤≠">Í≥†ÎèÑÎÇúÏ≤≠</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="blood_pressure">ÌòàÏïï (ÏàòÏ∂ïÍ∏∞/Ïù¥ÏôÑÍ∏∞)</label>
                                    <input type="text" class="form-control" name="blood_pressure" id="blood_pressure" placeholder="Ïòà: 120/80">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Í∏∞Ï°¥ ÏßàÌôò Ïù¥Î†• ÏÑπÏÖò -->
                <div class="card mb-4">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="mb-0">III. Í∏∞Ï°¥ ÏßàÌôò Î∞è ÏùòÎ£å Ïù¥Î†•</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group mb-3">
                            <label for="existing_conditions">Í∏∞Ï°¥ ÏßàÌôò (ÏûàÎäî Í≤ΩÏö∞ ÏÉÅÏÑ∏Ìûà Í∏∞ÏûÖ)</label>
                            <textarea class="form-control" name="existing_conditions" id="existing_conditions" rows="3" placeholder="Í≥†ÌòàÏïï, ÎãπÎá®Î≥ë, Ïã¨Ïû•ÏßàÌôò, Í∞ÑÏßàÌôò, Ïã†Ïû•ÏßàÌôò, Í∑ºÍ≥®Í≤©Í≥ÑÏßàÌôò Îì±"></textarea>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="medication_history">Î≥µÏö© Ï§ëÏù∏ ÏïΩÎ¨º</label>
                            <textarea class="form-control" name="medication_history" id="medication_history" rows="2" placeholder="ÌòÑÏû¨ Î≥µÏö© Ï§ëÏù∏ Ï≤òÎ∞©ÏïΩÏù¥ÎÇò Í±¥Í∞ïÎ≥¥Ï°∞ÏãùÌíà"></textarea>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="allergy_history">ÏïåÎ†àÎ•¥Í∏∞ Ïù¥Î†•</label>
                            <textarea class="form-control" name="allergy_history" id="allergy_history" rows="2" placeholder="ÏùåÏãù, ÏïΩÎ¨º, ÌôòÍ≤Ω ÏïåÎ†àÎ•¥Í∏∞ Îì±"></textarea>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="surgery_history">ÏàòÏà† Ïù¥Î†•</label>
                            <textarea class="form-control" name="surgery_history" id="surgery_history" rows="2" placeholder="Í≥ºÍ±∞ Î∞õÏùÄ ÏàòÏà†Ïù¥ÎÇò ÏãúÏà†"></textarea>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label>Í∞ÄÏ°±Î†•</label>
                            <div class="form-check-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="family_history" value="Í≥†ÌòàÏïï" id="family_hypertension">
                                    <label class="form-check-label" for="family_hypertension">Í≥†ÌòàÏïï</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="family_history" value="ÎãπÎá®Î≥ë" id="family_diabetes">
                                    <label class="form-check-label" for="family_diabetes">ÎãπÎá®Î≥ë</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="family_history" value="Ïã¨Ïû•ÏßàÌôò" id="family_heart">
                                    <label class="form-check-label" for="family_heart">Ïã¨Ïû•ÏßàÌôò</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="family_history" value="Ïïî" id="family_cancer">
                                    <label class="form-check-label" for="family_cancer">Ïïî</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="family_history" value="Í∏∞ÌÉÄ" id="family_other">
                                    <label class="form-check-label" for="family_other">Í∏∞ÌÉÄ</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÏÉùÌôú ÏäµÍ¥Ä ÏÑπÏÖò -->
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">IV. ÏÉùÌôú ÏäµÍ¥Ä</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label>Ìù°Ïó∞ ÏÉÅÌÉú</label>
                                    <div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="smoking_status" value="ÎπÑÌù°Ïó∞" id="smoking_never">
                                            <label class="form-check-label" for="smoking_never">ÎπÑÌù°Ïó∞</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="smoking_status" value="Í∏àÏó∞" id="smoking_quit">
                                            <label class="form-check-label" for="smoking_quit">Í∏àÏó∞</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="smoking_status" value="Ìù°Ïó∞" id="smoking_current">
                                            <label class="form-check-label" for="smoking_current">Ìù°Ïó∞</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group mb-3" id="smoking_details" style="display: none;">
                                    <label for="smoking_amount">ÏùºÏùº Ìù°Ïó∞Îüâ (Í∞úÎπÑ)</label>
                                    <input type="number" class="form-control" name="smoking_amount" id="smoking_amount" min="0">
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label>ÏùåÏ£º ÏÉÅÌÉú</label>
                                    <div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="drinking_status" value="Í∏àÏ£º" id="drinking_never">
                                            <label class="form-check-label" for="drinking_never">Í∏àÏ£º</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="drinking_status" value="Í∞ÄÎÅî" id="drinking_sometimes">
                                            <label class="form-check-label" for="drinking_sometimes">Í∞ÄÎÅî</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="drinking_status" value="Ï†ïÍ∏∞Ï†Å" id="drinking_regular">
                                            <label class="form-check-label" for="drinking_regular">Ï†ïÍ∏∞Ï†Å</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group mb-3" id="drinking_details" style="display: none;">
                                    <label for="drinking_amount">Ï£ºÎãπ ÏùåÏ£ºÎüâ (Ïûî)</label>
                                    <input type="number" class="form-control" name="drinking_amount" id="drinking_amount" min="0">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="exercise_habits">Ïö¥Îèô ÏäµÍ¥Ä</label>
                            <textarea class="form-control" name="exercise_habits" id="exercise_habits" rows="2" placeholder="Ï¢ÖÎ•ò, ÎπàÎèÑ, Í∞ïÎèÑ Îì±"></textarea>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="sleep_hours">ÌèâÍ∑† ÏàòÎ©¥ ÏãúÍ∞Ñ (ÏãúÍ∞Ñ)</label>
                            <input type="number" class="form-control" name="sleep_hours" id="sleep_hours" min="1" max="24" step="0.5">
                        </div>
                    </div>
                </div>

                <!-- ÏóÖÎ¨¥ Í¥ÄÎ†® Í±¥Í∞ï Ï≤¥ÌÅ¨ ÏÑπÏÖò -->
                <div class="card mb-4">
                    <div class="card-header bg-danger text-white">
                        <h5 class="mb-0">V. ÏóÖÎ¨¥ Ï†ÅÌï©ÏÑ± ÌèâÍ∞Ä</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group mb-3">
                            <label>ÏóÖÎ¨¥ ÏàòÌñâÏóê ÏòÅÌñ•ÏùÑ Ï§Ñ Ïàò ÏûàÎäî Ïã†Ï≤¥Ï†Å Ï†úÏïΩÏÇ¨Ìï≠</label>
                            <div class="form-check-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="physical_limitations" value="Ï§ëÎüâÎ¨º Ï∑®Í∏â Ï†úÌïú" id="limit_heavy">
                                    <label class="form-check-label" for="limit_heavy">Ï§ëÎüâÎ¨º Ï∑®Í∏â Ï†úÌïú</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="physical_limitations" value="Ïû•ÏãúÍ∞Ñ ÏÑúÏÑú ÏûëÏóÖ Ï†úÌïú" id="limit_standing">
                                    <label class="form-check-label" for="limit_standing">Ïû•ÏãúÍ∞Ñ ÏÑúÏÑú ÏûëÏóÖ Ï†úÌïú</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="physical_limitations" value="Í≥†ÏÜå ÏûëÏóÖ Ï†úÌïú" id="limit_height">
                                    <label class="form-check-label" for="limit_height">Í≥†ÏÜå ÏûëÏóÖ Ï†úÌïú</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="physical_limitations" value="ÌôîÌïôÎ¨ºÏßà ÎÖ∏Ï∂ú Ï†úÌïú" id="limit_chemical">
                                    <label class="form-check-label" for="limit_chemical">ÌôîÌïôÎ¨ºÏßà ÎÖ∏Ï∂ú Ï†úÌïú</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="physical_limitations" value="ÏÜåÏùå ÌôòÍ≤Ω Ï†úÌïú" id="limit_noise">
                                    <label class="form-check-label" for="limit_noise">ÏÜåÏùå ÌôòÍ≤Ω Ï†úÌïú</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="physical_limitations" value="ÏóÜÏùå" id="limit_none">
                                    <label class="form-check-label" for="limit_none">ÏóÜÏùå</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="special_considerations">ÌäπÎ≥ÑÌûà Ï£ºÏùòÌï¥Ïïº Ìï† ÏÇ¨Ìï≠</label>
                            <textarea class="form-control" name="special_considerations" id="special_considerations" rows="3"></textarea>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="emergency_contact">ÏùëÍ∏â Ïó∞ÎùΩÏ≤ò</label>
                            <input type="text" class="form-control" name="emergency_contact" id="emergency_contact" placeholder="Ïù¥Î¶Ñ: ÌôçÍ∏∏Îèô, Í¥ÄÍ≥Ñ: Î∞∞Ïö∞Ïûê, Ïó∞ÎùΩÏ≤ò: 010-1234-5678">
                        </div>
                    </div>
                </div>

                <div class="text-center mb-4">
                    <button type="submit" class="btn btn-info btn-lg">
                        <i class="bi bi-check-circle"></i> Ï†úÏ∂úÌïòÍ∏∞
                    </button>
                    <a href="{{ url_for('main.index') }}" class="btn btn-secondary btn-lg ms-2">
                        <i class="bi bi-arrow-left"></i> Ï∑®ÏÜå
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Ìù°Ïó∞ ÏÉÅÌÉúÏóê Îî∞Îùº ÏÉÅÏÑ∏ Ï†ïÎ≥¥ ÌëúÏãú/Ïà®ÍπÄ
    const smokingRadios = document.querySelectorAll('input[name="smoking_status"]');
    const smokingDetails = document.getElementById('smoking_details');
    
    smokingRadios.forEach(function(radio) {
        radio.addEventListener('change', function() {
            if (this.value === 'Ìù°Ïó∞') {
                smokingDetails.style.display = 'block';
            } else {
                smokingDetails.style.display = 'none';
            }
        });
    });
    
    // ÏùåÏ£º ÏÉÅÌÉúÏóê Îî∞Îùº ÏÉÅÏÑ∏ Ï†ïÎ≥¥ ÌëúÏãú/Ïà®ÍπÄ
    const drinkingRadios = document.querySelectorAll('input[name="drinking_status"]');
    const drinkingDetails = document.getElementById('drinking_details');
    
    drinkingRadios.forEach(function(radio) {
        radio.addEventListener('change', function() {
            if (this.value === 'Ï†ïÍ∏∞Ï†Å') {
                drinkingDetails.style.display = 'block';
            } else {
                drinkingDetails.style.display = 'none';
            }
        });
    });
});
</script>
{% endblock %}