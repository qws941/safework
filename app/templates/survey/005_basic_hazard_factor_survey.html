<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>유해요인 기본조사표 - SafeWork</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        :root {
            --sw-primary: #28a745;
            --sw-primary-light: #d4edda;
            --sw-primary-dark: #1e7e34;
            --sw-secondary: #6c757d;
            --sw-success: #28a745;
            --sw-warning: #ffc107;
            --sw-danger: #dc3545;
        }
        body {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            min-height: 100vh;
            padding: 20px 0;
        }
        .survey-container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 20px;
        }
        .section-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            overflow: hidden;
            border-left: 5px solid var(--sw-primary);
        }
        .section-header {
            background: linear-gradient(135deg, var(--sw-primary) 0%, var(--sw-primary-dark) 100%);
            color: white;
            padding: 20px;
            margin: 0;
            font-weight: 600;
        }
        .section-body {
            padding: 30px;
        }
        .form-label {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }
        .required {
            color: var(--sw-danger);
        }
        .form-control, .form-select {
            border-radius: 8px;
            border: 2px solid #e9ecef;
            padding: 12px 15px;
            transition: all 0.3s ease;
        }
        .form-control:focus, .form-select:focus {
            border-color: var(--sw-primary);
            box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25);
        }
        .btn-primary {
            background: linear-gradient(135deg, var(--sw-primary) 0%, var(--sw-primary-dark) 100%);
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.3);
        }
        .alert-info {
            background: var(--sw-primary-light);
            border: 1px solid var(--sw-primary);
            color: var(--sw-primary-dark);
            border-radius: 8px;
        }
        .section-icon {
            margin-right: 10px;
            font-size: 1.2em;
        }
        .risk-matrix {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            margin-top: 10px;
        }
        .risk-cell {
            padding: 8px;
            text-align: center;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }
        .risk-low { background-color: #d4edda; color: #155724; }
        .risk-medium { background-color: #fff3cd; color: #856404; }
        .risk-high { background-color: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <div class="survey-container">
        <div class="text-center mb-4">
            <h1 class="text-white mb-3">
                <i class="bi bi-clipboard-data-fill me-3"></i>
                유해요인 기본조사표
            </h1>
            <p class="text-white-50 fs-5">작업환경 유해요인 기본조사 및 위험성 평가</p>
        </div>

        <div class="alert alert-info">
            <i class="bi bi-info-circle-fill me-2"></i>
            <strong>조사 목적:</strong> 작업환경의 물리적, 화학적, 생물학적, 인간공학적, 심리사회적 유해요인을 체계적으로 조사합니다.
        </div>

        <form id="hazardSurveyForm" method="POST" action="/survey/005_basic_hazard_factor_survey">

            <!-- 기본 정보 -->
            <div class="section-card">
                <h2 class="section-header">
                    <i class="bi bi-building section-icon"></i>기본 정보
                </h2>
                <div class="section-body">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="company_name" class="form-label">회사명 <span class="required">*</span></label>
                            <input type="text" class="form-control" id="company_name" name="company_name" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="workplace_name" class="form-label">사업장명 <span class="required">*</span></label>
                            <input type="text" class="form-control" id="workplace_name" name="workplace_name" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="department" class="form-label">부서명 <span class="required">*</span></label>
                            <input type="text" class="form-control" id="department" name="department" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="investigator_name" class="form-label">조사자명 <span class="required">*</span></label>
                            <input type="text" class="form-control" id="investigator_name" name="investigator_name" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="investigation_date" class="form-label">조사일자 <span class="required">*</span></label>
                            <input type="date" class="form-control" id="investigation_date" name="investigation_date" required>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 작업공정 -->
            <div class="section-card">
                <h2 class="section-header">
                    <i class="bi bi-gear-fill section-icon"></i>작업공정
                </h2>
                <div class="section-body">
                    <div class="row">
                        <div class="col-md-12 mb-3">
                            <label for="process_name" class="form-label">공정명 <span class="required">*</span></label>
                            <input type="text" class="form-control" id="process_name" name="process_name" required>
                        </div>
                        <div class="col-md-12 mb-3">
                            <label for="work_description" class="form-label">작업내용 <span class="required">*</span></label>
                            <textarea class="form-control" id="work_description" name="work_description" rows="4" required placeholder="구체적인 작업 내용을 상세히 기술"></textarea>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="equipment_used" class="form-label">사용장비</label>
                            <textarea class="form-control" id="equipment_used" name="equipment_used" rows="3" placeholder="사용하는 장비 및 도구"></textarea>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="materials_used" class="form-label">사용물질</label>
                            <textarea class="form-control" id="materials_used" name="materials_used" rows="3" placeholder="취급하는 화학물질 및 재료"></textarea>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="work_methods" class="form-label">작업방법</label>
                            <textarea class="form-control" id="work_methods" name="work_methods" rows="3" placeholder="작업 절차 및 방법"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 물리적 유해요인 -->
            <div class="section-card">
                <h2 class="section-header">
                    <i class="bi bi-soundwave section-icon"></i>물리적 유해요인
                </h2>
                <div class="section-body">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="noise_level" class="form-label">소음수준 <span class="required">*</span></label>
                            <select class="form-select" id="noise_level" name="noise_level" required>
                                <option value="">선택하세요</option>
                                <option value="85dB미만">85dB미만</option>
                                <option value="85-90dB">85-90dB</option>
                                <option value="90-95dB">90-95dB</option>
                                <option value="95dB이상">95dB이상</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="vibration" class="form-label">진동 <span class="required">*</span></label>
                            <select class="form-select" id="vibration" name="vibration" required>
                                <option value="">선택하세요</option>
                                <option value="없음">없음</option>
                                <option value="전신진동">전신진동</option>
                                <option value="국소진동">국소진동</option>
                                <option value="복합진동">복합진동</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="temperature" class="form-label">온도 <span class="required">*</span></label>
                            <select class="form-select" id="temperature" name="temperature" required>
                                <option value="">선택하세요</option>
                                <option value="적정">적정</option>
                                <option value="고온(28도이상)">고온(28도이상)</option>
                                <option value="저온(18도미만)">저온(18도미만)</option>
                                <option value="변동">변동</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="humidity" class="form-label">습도</label>
                            <select class="form-select" id="humidity" name="humidity">
                                <option value="">선택하세요</option>
                                <option value="적정">적정</option>
                                <option value="고습">고습</option>
                                <option value="저습">저습</option>
                                <option value="변동">변동</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="lighting" class="form-label">조명 <span class="required">*</span></label>
                            <select class="form-select" id="lighting" name="lighting" required>
                                <option value="">선택하세요</option>
                                <option value="충분">충분</option>
                                <option value="보통">보통</option>
                                <option value="부족">부족</option>
                                <option value="눈부심">눈부심</option>
                            </select>
                        </div>
                        <div class="col-md-12 mb-3">
                            <label for="radiation" class="form-label">방사선</label>
                            <select class="form-select" id="radiation" name="radiation">
                                <option value="">선택하세요</option>
                                <option value="해당없음">해당없음</option>
                                <option value="이온화방사선">이온화방사선</option>
                                <option value="비이온화방사선">비이온화방사선</option>
                                <option value="자외선">자외선</option>
                                <option value="적외선">적외선</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 화학적 유해요인 -->
            <div class="section-card">
                <h2 class="section-header">
                    <i class="bi bi-beaker section-icon"></i>화학적 유해요인
                </h2>
                <div class="section-body">
                    <div class="row">
                        <div class="col-md-12 mb-3">
                            <label for="chemical_substances" class="form-label">화학물질</label>
                            <textarea class="form-control" id="chemical_substances" name="chemical_substances" rows="3" placeholder="취급하는 화학물질명, MSDS 정보 등"></textarea>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="exposure_route" class="form-label">노출경로</label>
                            <select class="form-select" id="exposure_route" name="exposure_route">
                                <option value="">선택하세요</option>
                                <option value="흡입">흡입</option>
                                <option value="피부접촉">피부접촉</option>
                                <option value="경구">경구</option>
                                <option value="복합">복합</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="concentration_level" class="form-label">농도수준</label>
                            <select class="form-select" id="concentration_level" name="concentration_level">
                                <option value="">선택하세요</option>
                                <option value="노출기준미만">노출기준미만</option>
                                <option value="노출기준근접">노출기준근접</option>
                                <option value="노출기준초과">노출기준초과</option>
                                <option value="측정필요">측정필요</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="exposure_duration" class="form-label">노출시간</label>
                            <select class="form-select" id="exposure_duration" name="exposure_duration">
                                <option value="">선택하세요</option>
                                <option value="1시간미만">1시간미만</option>
                                <option value="1-4시간">1-4시간</option>
                                <option value="4-8시간">4-8시간</option>
                                <option value="8시간이상">8시간이상</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="ventilation_status" class="form-label">환기상태</label>
                            <select class="form-select" id="ventilation_status" name="ventilation_status">
                                <option value="">선택하세요</option>
                                <option value="양호">양호</option>
                                <option value="보통">보통</option>
                                <option value="불량">불량</option>
                                <option value="없음">없음</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 인간공학적 유해요인 -->
            <div class="section-card">
                <h2 class="section-header">
                    <i class="bi bi-person-workspace section-icon"></i>인간공학적 유해요인
                </h2>
                <div class="section-body">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="work_posture" class="form-label">작업자세 <span class="required">*</span></label>
                            <select class="form-select" id="work_posture" name="work_posture" required>
                                <option value="">선택하세요</option>
                                <option value="양호">양호</option>
                                <option value="부적절한자세">부적절한자세</option>
                                <option value="장시간동일자세">장시간동일자세</option>
                                <option value="반복작업">반복작업</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="repetitive_motion" class="form-label">반복동작 <span class="required">*</span></label>
                            <select class="form-select" id="repetitive_motion" name="repetitive_motion" required>
                                <option value="">선택하세요</option>
                                <option value="없음">없음</option>
                                <option value="분당10회미만">분당10회미만</option>
                                <option value="분당10-20회">분당10-20회</option>
                                <option value="분당20회이상">분당20회이상</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="manual_handling" class="form-label">중량물취급 <span class="required">*</span></label>
                            <select class="form-select" id="manual_handling" name="manual_handling" required>
                                <option value="">선택하세요</option>
                                <option value="5kg미만">5kg미만</option>
                                <option value="5-18kg">5-18kg</option>
                                <option value="18-25kg">18-25kg</option>
                                <option value="25kg이상">25kg이상</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="display_work" class="form-label">VDT작업</label>
                            <select class="form-select" id="display_work" name="display_work">
                                <option value="">선택하세요</option>
                                <option value="해당없음">해당없음</option>
                                <option value="2시간미만">2시간미만</option>
                                <option value="2-4시간">2-4시간</option>
                                <option value="4시간이상">4시간이상</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="workspace_design" class="form-label">작업공간설계</label>
                            <select class="form-select" id="workspace_design" name="workspace_design">
                                <option value="">선택하세요</option>
                                <option value="적정">적정</option>
                                <option value="협소">협소</option>
                                <option value="작업대높이부적절">작업대높이부적절</option>
                                <option value="접근성불량">접근성불량</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 심리사회적 유해요인 -->
            <div class="section-card">
                <h2 class="section-header">
                    <i class="bi bi-emoji-frown section-icon"></i>심리사회적 유해요인
                </h2>
                <div class="section-body">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="work_stress" class="form-label">업무스트레스 <span class="required">*</span></label>
                            <select class="form-select" id="work_stress" name="work_stress" required>
                                <option value="">선택하세요</option>
                                <option value="낮음">낮음</option>
                                <option value="보통">보통</option>
                                <option value="높음">높음</option>
                                <option value="매우높음">매우높음</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="job_demands" class="form-label">업무요구도 <span class="required">*</span></label>
                            <select class="form-select" id="job_demands" name="job_demands" required>
                                <option value="">선택하세요</option>
                                <option value="낮음">낮음</option>
                                <option value="보통">보통</option>
                                <option value="높음">높음</option>
                                <option value="매우높음">매우높음</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="work_control" class="form-label">업무자율성</label>
                            <select class="form-select" id="work_control" name="work_control">
                                <option value="">선택하세요</option>
                                <option value="높음">높음</option>
                                <option value="보통">보통</option>
                                <option value="낮음">낮음</option>
                                <option value="매우낮음">매우낮음</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="social_support" class="form-label">사회적지지</label>
                            <select class="form-select" id="social_support" name="social_support">
                                <option value="">선택하세요</option>
                                <option value="충분">충분</option>
                                <option value="보통">보통</option>
                                <option value="부족">부족</option>
                                <option value="매우부족">매우부족</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="work_schedule_stress" class="form-label">근무일정스트레스</label>
                            <select class="form-select" id="work_schedule_stress" name="work_schedule_stress">
                                <option value="">선택하세요</option>
                                <option value="낮음">낮음</option>
                                <option value="보통">보통</option>
                                <option value="높음">높음</option>
                                <option value="매우높음">매우높음</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 위험성 평가 -->
            <div class="section-card">
                <h2 class="section-header">
                    <i class="bi bi-shield-exclamation section-icon"></i>위험성 평가
                </h2>
                <div class="section-body">
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="hazard_severity" class="form-label">유해성정도 <span class="required">*</span></label>
                            <select class="form-select" id="hazard_severity" name="hazard_severity" required>
                                <option value="">선택하세요</option>
                                <option value="경미">경미</option>
                                <option value="보통">보통</option>
                                <option value="중대">중대</option>
                                <option value="치명적">치명적</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="exposure_probability" class="form-label">노출가능성 <span class="required">*</span></label>
                            <select class="form-select" id="exposure_probability" name="exposure_probability" required>
                                <option value="">선택하세요</option>
                                <option value="낮음">낮음</option>
                                <option value="보통">보통</option>
                                <option value="높음">높음</option>
                                <option value="매우높음">매우높음</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="risk_level" class="form-label">위험수준 <span class="required">*</span></label>
                            <select class="form-select" id="risk_level" name="risk_level" required>
                                <option value="">선택하세요</option>
                                <option value="허용가능">허용가능</option>
                                <option value="관심">관심</option>
                                <option value="주의">주의</option>
                                <option value="경고">경고</option>
                                <option value="위험">위험</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="control_measures" class="form-label">통제방안 <span class="required">*</span></label>
                            <textarea class="form-control" id="control_measures" name="control_measures" rows="4" required placeholder="위험요인을 통제하기 위한 구체적인 방안"></textarea>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="monitoring_plan" class="form-label">모니터링계획</label>
                            <textarea class="form-control" id="monitoring_plan" name="monitoring_plan" rows="4" placeholder="지속적인 모니터링 및 관리 계획"></textarea>
                        </div>
                    </div>

                    <!-- 위험성 매트릭스 -->
                    <div class="mt-4">
                        <h6><i class="bi bi-grid-3x3-gap me-2"></i>위험성 평가 매트릭스</h6>
                        <div class="risk-matrix">
                            <div class="risk-cell" style="background-color: #f8f9fa; font-weight: bold;">빈도/심각도</div>
                            <div class="risk-cell" style="background-color: #f8f9fa; font-weight: bold;">경미</div>
                            <div class="risk-cell" style="background-color: #f8f9fa; font-weight: bold;">보통</div>
                            <div class="risk-cell" style="background-color: #f8f9fa; font-weight: bold;">중대</div>
                            <div class="risk-cell" style="background-color: #f8f9fa; font-weight: bold;">치명적</div>

                            <div class="risk-cell" style="background-color: #f8f9fa; font-weight: bold;">매우높음</div>
                            <div class="risk-cell risk-medium">주의</div>
                            <div class="risk-cell risk-high">경고</div>
                            <div class="risk-cell risk-high">위험</div>
                            <div class="risk-cell risk-high">위험</div>

                            <div class="risk-cell" style="background-color: #f8f9fa; font-weight: bold;">높음</div>
                            <div class="risk-cell risk-low">관심</div>
                            <div class="risk-cell risk-medium">주의</div>
                            <div class="risk-cell risk-high">경고</div>
                            <div class="risk-cell risk-high">위험</div>

                            <div class="risk-cell" style="background-color: #f8f9fa; font-weight: bold;">보통</div>
                            <div class="risk-cell risk-low">허용가능</div>
                            <div class="risk-cell risk-low">관심</div>
                            <div class="risk-cell risk-medium">주의</div>
                            <div class="risk-cell risk-high">경고</div>

                            <div class="risk-cell" style="background-color: #f8f9fa; font-weight: bold;">낮음</div>
                            <div class="risk-cell risk-low">허용가능</div>
                            <div class="risk-cell risk-low">허용가능</div>
                            <div class="risk-cell risk-low">관심</div>
                            <div class="risk-cell risk-medium">주의</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="text-center mt-4">
                <button type="submit" class="btn btn-primary btn-lg">
                    <i class="bi bi-check-circle me-2"></i>조사표 제출
                </button>
            </div>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 폼 제출 시 확인
        document.getElementById('hazardSurveyForm').addEventListener('submit', function(e) {
            if (!confirm('유해요인 기본조사표를 제출하시겠습니까?')) {
                e.preventDefault();
            }
        });

        // 위험성 자동 계산
        function calculateRiskLevel() {
            const severity = document.getElementById('hazard_severity').value;
            const probability = document.getElementById('exposure_probability').value;

            const riskMatrix = {
                '경미': { '낮음': '허용가능', '보통': '허용가능', '높음': '관심', '매우높음': '주의' },
                '보통': { '낮음': '허용가능', '보통': '관심', '높음': '주의', '매우높음': '경고' },
                '중대': { '낮음': '관심', '보통': '주의', '높음': '경고', '매우높음': '위험' },
                '치명적': { '낮음': '주의', '보통': '경고', '높음': '위험', '매우높음': '위험' }
            };

            if (severity && probability && riskMatrix[severity] && riskMatrix[severity][probability]) {
                document.getElementById('risk_level').value = riskMatrix[severity][probability];
            }
        }

        document.getElementById('hazard_severity').addEventListener('change', calculateRiskLevel);
        document.getElementById('exposure_probability').addEventListener('change', calculateRiskLevel);
    </script>
</body>
</html>