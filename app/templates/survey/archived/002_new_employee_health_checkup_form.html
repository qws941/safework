{% extends "base.html" %}

{% block title %}신규 입사자 건강검진표 - {{ app_name }}{% endblock %}

{% block extra_css %}
<style>
    .survey-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 15px;
        min-width: 0;
        overflow-x: hidden;
    }
    
    .section-card {
        background: #ffffff;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        border: 1px solid #e5e7eb;
    }
    
    .section-title {
        color: #1f2937;
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #3b82f6;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .form-row {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
        flex-wrap: wrap;
    }
    
    .form-group {
        flex: 1;
        min-width: 250px;
    }
    
    .form-group.half {
        flex: 0 0 calc(50% - 7.5px);
        min-width: 150px;
    }
    
    .form-group.third {
        flex: 0 0 calc(33.333% - 10px);
        min-width: 120px;
    }
    
    .form-label {
        display: block;
        font-weight: 500;
        color: #374151;
        margin-bottom: 5px;
        font-size: 0.9rem;
    }
    
    .form-control {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        font-size: 14px;
        background: #ffffff;
        transition: border-color 0.2s, box-shadow 0.2s;
    }
    
    .form-control:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    .radio-group {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-top: 8px;
    }
    
    .radio-item {
        display: flex;
        align-items: center;
        gap: 6px;
    }
    
    .radio-item input {
        margin: 0;
    }
    
    .radio-item label {
        margin: 0;
        font-size: 0.9rem;
        color: #374151;
        cursor: pointer;
    }
    
    .btn-primary {
        background: #3b82f6;
        border: none;
        padding: 12px 30px;
        border-radius: 8px;
        font-weight: 500;
        font-size: 1rem;
        transition: background-color 0.2s;
        width: 100%;
        margin-top: 20px;
    }
    
    .btn-primary:hover {
        background: #2563eb;
    }
    
    .text-danger {
        color: #ef4444 !important;
    }
    
    @media (max-width: 768px) {
        .survey-container {
            padding: 10px;
        }
        
        .form-group,
        .form-group.half,
        .form-group.third {
            min-width: 100%;
            flex: 1 1 100%;
        }
        
        .radio-group {
            gap: 10px;
        }
        
        .section-card {
            padding: 15px;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="survey-container">
    <div class="text-center mb-4">
        <h1 class="h2 text-primary mb-2">신규 입사자 건강검진표</h1>
        <p class="text-muted">건강한 업무 환경을 위한 사전 건강 정보 수집</p>
    </div>
    
    <form method="POST" action="{{ url_for('survey.new_employee_health_checkup_form') }}">
        <!-- CSRF token disabled for survey testing -->
        
        <!-- I. 기본 정보 -->
        <div class="section-card">
            <h3 class="section-title">
                <span>📋</span> I. 기본 정보
            </h3>
            
            <div class="form-row">
                <div class="form-group third">
                    <label class="form-label" for="employee_number">사번 <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" name="employee_number" id="employee_number" required>
                </div>
                <div class="form-group third">
                    <label class="form-label" for="name">성명 <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" name="name" id="name" required>
                </div>
                <div class="form-group third">
                    <label class="form-label" for="age">나이 <span class="text-danger">*</span></label>
                    <input type="number" class="form-control" name="age" id="age" min="18" max="100" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group half">
                    <label class="form-label">성별 <span class="text-danger">*</span></label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" name="gender" id="gender_male" value="남" required>
                            <label for="gender_male">남</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="gender" id="gender_female" value="여" required>
                            <label for="gender_female">여</label>
                        </div>
                    </div>
                </div>
                <div class="form-group half">
                    <label class="form-label" for="department">부서 <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" name="department" id="department" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group half">
                    <label class="form-label" for="position">직급 <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" name="position" id="position" required>
                </div>
                <div class="form-group half">
                    <label class="form-label" for="hire_date">입사예정일</label>
                    <input type="date" class="form-control" name="hire_date" id="hire_date">
                </div>
            </div>
        </div>

        <!-- II. 신체 정보 -->
        <div class="section-card">
            <h3 class="section-title">
                <span>📏</span> II. 신체 정보
            </h3>
            
            <div class="form-row">
                <div class="form-group third">
                    <label class="form-label" for="height_cm">신장 (cm)</label>
                    <input type="number" class="form-control" name="height_cm" id="height_cm" min="100" max="250" step="0.1">
                </div>
                <div class="form-group third">
                    <label class="form-label" for="weight_kg">체중 (kg)</label>
                    <input type="number" class="form-control" name="weight_kg" id="weight_kg" min="30" max="200" step="0.1">
                </div>
                <div class="form-group third">
                    <label class="form-label" for="blood_type">혈액형</label>
                    <select class="form-control" name="blood_type" id="blood_type">
                        <option value="">선택해주세요</option>
                        <option value="A">A형</option>
                        <option value="B">B형</option>
                        <option value="AB">AB형</option>
                        <option value="O">O형</option>
                    </select>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group half">
                    <label class="form-label" for="vision_left">좌측 시력</label>
                    <input type="number" class="form-control" name="vision_left" id="vision_left" min="0" max="2.0" step="0.1">
                </div>
                <div class="form-group half">
                    <label class="form-label" for="vision_right">우측 시력</label>
                    <input type="number" class="form-control" name="vision_right" id="vision_right" min="0" max="2.0" step="0.1">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group half">
                    <label class="form-label" for="hearing_left">좌측 청력</label>
                    <select class="form-control" name="hearing_left" id="hearing_left">
                        <option value="">선택해주세요</option>
                        <option value="정상">정상</option>
                        <option value="경도난청">경도난청</option>
                        <option value="중등도난청">중등도난청</option>
                        <option value="고도난청">고도난청</option>
                    </select>
                </div>
                <div class="form-group half">
                    <label class="form-label" for="hearing_right">우측 청력</label>
                    <select class="form-control" name="hearing_right" id="hearing_right">
                        <option value="">선택해주세요</option>
                        <option value="정상">정상</option>
                        <option value="경도난청">경도난청</option>
                        <option value="중등도난청">중등도난청</option>
                        <option value="고도난청">고도난청</option>
                    </select>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="blood_pressure">혈압</label>
                    <input type="text" class="form-control" name="blood_pressure" id="blood_pressure" placeholder="예: 120/80">
                </div>
            </div>
        </div>

        <!-- III. 건강 관련 정보 -->
        <div class="section-card">
            <h3 class="section-title">
                <span>🏥</span> III. 건강 관련 정보
            </h3>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="existing_conditions">기존 질환 및 병력</label>
                    <textarea class="form-control" name="existing_conditions" id="existing_conditions" rows="3" placeholder="현재 치료받고 있는 질환이나 과거 병력이 있으면 기재해주세요"></textarea>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="medication_history">복용약물 이력</label>
                    <textarea class="form-control" name="medication_history" id="medication_history" rows="2" placeholder="현재 복용 중인 약물이 있으면 기재해주세요"></textarea>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="allergy_history">알레르기 이력</label>
                    <textarea class="form-control" name="allergy_history" id="allergy_history" rows="2" placeholder="알려진 알레르기가 있으면 기재해주세요"></textarea>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="surgery_history">수술 이력</label>
                    <textarea class="form-control" name="surgery_history" id="surgery_history" rows="2" placeholder="과거 수술 경험이 있으면 기재해주세요"></textarea>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="family_history">가족력</label>
                    <textarea class="form-control" name="family_history" id="family_history" rows="2" placeholder="가족 중 특별한 병력이 있으면 기재해주세요"></textarea>
                </div>
            </div>
        </div>

        <!-- IV. 생활 습관 -->
        <div class="section-card">
            <h3 class="section-title">
                <span>🚭</span> IV. 생활 습관
            </h3>
            
            <div class="form-row">
                <div class="form-group half">
                    <label class="form-label">흡연 여부</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" name="smoking_status" id="smoking_yes" value="흡연">
                            <label for="smoking_yes">흡연</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="smoking_status" id="smoking_no" value="비흡연">
                            <label for="smoking_no">비흡연</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="smoking_status" id="smoking_quit" value="금연">
                            <label for="smoking_quit">금연</label>
                        </div>
                    </div>
                </div>
                <div class="form-group half">
                    <label class="form-label" for="smoking_amount">흡연량 (해당시)</label>
                    <input type="text" class="form-control" name="smoking_amount" id="smoking_amount" placeholder="예: 하루 1갑">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group half">
                    <label class="form-label">음주 여부</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" name="drinking_status" id="drinking_yes" value="음주">
                            <label for="drinking_yes">음주</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="drinking_status" id="drinking_no" value="비음주">
                            <label for="drinking_no">비음주</label>
                        </div>
                    </div>
                </div>
                <div class="form-group half">
                    <label class="form-label" for="drinking_amount">음주량 (해당시)</label>
                    <input type="text" class="form-control" name="drinking_amount" id="drinking_amount" placeholder="예: 주 2-3회, 소주 1병">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="exercise_habits">운동 습관</label>
                    <textarea class="form-control" name="exercise_habits" id="exercise_habits" rows="2" placeholder="규칙적으로 하는 운동이 있으면 기재해주세요"></textarea>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="sleep_hours">평균 수면시간</label>
                    <select class="form-control" name="sleep_hours" id="sleep_hours">
                        <option value="">선택해주세요</option>
                        <option value="5시간 미만">5시간 미만</option>
                        <option value="5-6시간">5-6시간</option>
                        <option value="6-7시간">6-7시간</option>
                        <option value="7-8시간">7-8시간</option>
                        <option value="8-9시간">8-9시간</option>
                        <option value="9시간 이상">9시간 이상</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- V. 기타 정보 -->
        <div class="section-card">
            <h3 class="section-title">
                <span>📝</span> V. 기타 정보
            </h3>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="physical_limitations">신체적 제약사항</label>
                    <textarea class="form-control" name="physical_limitations" id="physical_limitations" rows="2" placeholder="업무 수행에 영향을 줄 수 있는 신체적 제약사항이 있으면 기재해주세요"></textarea>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="emergency_contact">비상연락처</label>
                    <input type="text" class="form-control" name="emergency_contact" id="emergency_contact" placeholder="응급상황 시 연락할 전화번호">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="special_considerations">특별 고려사항</label>
                    <textarea class="form-control" name="special_considerations" id="special_considerations" rows="3" placeholder="업무 배치나 환경 조성 시 특별히 고려해야 할 사항이 있으면 기재해주세요"></textarea>
                </div>
            </div>
        </div>

        <button type="submit" class="btn btn-primary">
            <span>📋</span> 건강검진표 제출
        </button>
    </form>
</div>
{% endblock %}