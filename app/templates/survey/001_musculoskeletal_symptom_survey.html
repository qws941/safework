{% extends "base.html" %}

{% block title %}ê·¼ê³¨ê²©ê³„ ì¦ìƒì¡°ì‚¬í‘œ - {{ app_name }}{% endblock %}

{% block extra_css %}
<style>
    .survey-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 15px;
        min-width: 0;
        overflow-x: hidden;
    }
    
    .section-card {
        background: #ffffff;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        border: 1px solid #e5e7eb;
    }
    
    .section-title {
        color: #1f2937;
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #3b82f6;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .form-row {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
        flex-wrap: wrap;
    }
    
    .form-group {
        flex: 1;
        min-width: 250px;
    }
    
    .form-group.half {
        flex: 0 0 calc(50% - 7.5px);
        min-width: 150px;
    }
    
    .form-group.third {
        flex: 0 0 calc(33.333% - 10px);
        min-width: 120px;
    }
    
    .form-label {
        display: block;
        font-weight: 500;
        color: #374151;
        margin-bottom: 5px;
        font-size: 0.9rem;
    }
    
    .form-control {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        font-size: 14px;
        background: #ffffff;
        transition: border-color 0.2s, box-shadow 0.2s;
    }
    
    .form-control:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    .checkbox-group,
    .radio-group {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-top: 8px;
    }
    
    .checkbox-item,
    .radio-item {
        display: flex;
        align-items: center;
        gap: 6px;
    }
    
    .checkbox-item input,
    .radio-item input {
        margin: 0;
    }
    
    .checkbox-item label,
    .radio-item label {
        margin: 0;
        font-size: 0.9rem;
        color: #374151;
        cursor: pointer;
    }
    
    .symptoms-grid {
        display: grid;
        gap: 15px;
    }
    
    .symptom-card {
        background: #f8fafc;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        padding: 15px;
        min-width: 0;
        overflow-x: auto;
    }
    
    .symptom-title {
        font-weight: 600;
        color: #1e40af;
        margin-bottom: 12px;
        font-size: 1rem;
    }
    
    .symptom-questions {
        display: grid;
        gap: 10px;
    }
    
    .question-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 0;
        border-bottom: 1px solid #e5e7eb;
    }
    
    .question-row:last-child {
        border-bottom: none;
    }
    
    .question-text {
        font-size: 0.85rem;
        color: #374151;
        flex: 1;
        line-height: 1.4;
        word-break: keep-all;
        overflow-wrap: break-word;
    }
    
    .answer-options {
        display: flex;
        gap: 6px;
        flex-wrap: wrap;
    }
    
    .option-btn {
        padding: 6px 8px;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        background: #ffffff;
        font-size: 0.75rem;
        cursor: pointer;
        min-width: 50px;
        text-align: center;
        word-break: keep-all;
        white-space: normal;
        line-height: 1.2;
        flex: 0 0 auto;
        transition: all 0.2s ease;
    }
    
    .option-btn.selected {
        background: #3b82f6;
        color: white;
        border-color: #3b82f6;
    }
    
    .question-row.disabled {
        opacity: 0.6;
        pointer-events: none;
    }
    
    .question-row.disabled .question-text {
        color: #9ca3af;
    }
    
    /* PDF í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
    .symptoms-table {
        margin-bottom: 0;
        font-size: 0.85rem;
    }
    
    .symptoms-table th {
        background-color: #e3f2fd !important;
        text-align: center;
        vertical-align: middle;
        font-weight: 600;
        padding: 12px 8px;
        border: 1px solid #90caf9;
    }
    
    .question-cell {
        background-color: #f8f9fa;
        font-weight: 500;
        vertical-align: middle;
        padding: 15px 12px;
        border: 1px solid #dee2e6;
        width: 300px;
        min-width: 300px;
    }
    
    .answer-cell {
        text-align: center;
        vertical-align: middle;
        padding: 10px 8px;
        border: 1px solid #dee2e6;
        min-width: 120px;
    }
    
    .radio-group-vertical,
    .checkbox-group-vertical {
        display: flex;
        flex-direction: column;
        gap: 6px;
        align-items: flex-start;
    }
    
    .radio-group-vertical label,
    .checkbox-group-vertical label {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 0.8rem;
        margin-bottom: 0;
        cursor: pointer;
        white-space: nowrap;
    }
    
    .radio-group-vertical input,
    .checkbox-group-vertical input[type="checkbox"],
    .checkbox-group-vertical input[type="radio"] {
        margin: 0;
        flex-shrink: 0;
    }
    
    .checkbox-group-vertical input[type="text"] {
        margin-top: 4px;
        font-size: 0.75rem;
        padding: 2px 4px;
    }
    
    .severity-guide {
        margin-top: 8px;
        padding: 8px;
        background-color: #f0f9ff;
        border-radius: 4px;
        border-left: 3px solid #0ea5e9;
    }
    
    .severity-guide small {
        line-height: 1.4;
    }
    
    .required {
        color: #ef4444;
    }
    
    .submit-section {
        text-align: center;
        margin-top: 30px;
    }
    
    .submit-btn {
        background: #3b82f6;
        color: white;
        border: none;
        padding: 15px 40px;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: background-color 0.2s;
    }
    
    .submit-btn:hover {
        background: #2563eb;
    }
    
    /* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
    @media (max-width: 768px) {
        .option-btn {
            padding: 5px 6px;
            font-size: 0.7rem;
            min-width: 45px;
        }
        .survey-container {
            padding: 10px;
        }
        
        .section-card {
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .form-row {
            flex-direction: column;
            gap: 10px;
        }
        
        .form-group,
        .form-group.half,
        .form-group.third {
            flex: 1;
            min-width: unset;
        }
        
        .checkbox-group,
        .radio-group {
            flex-direction: column;
            gap: 10px;
        }
        
        .question-row {
            flex-direction: column;
            align-items: flex-start;
            gap: 8px;
        }
        
        .answer-options {
            align-self: stretch;
            justify-content: flex-start;
            gap: 6px;
            flex-wrap: wrap;
        }
        
        .option-btn {
            flex: 1;
            min-width: 0;
            font-size: 0.75rem;
            padding: 6px 8px;
            white-space: normal;
            word-break: keep-all;
            line-height: 1.2;
            height: auto;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="survey-container">
    <form method="POST" action="{{ url_for('survey.musculoskeletal_symptom_survey') }}" id="surveyForm">
        
        <div class="text-center mb-4">
            <h2 style="color: #1f2937; margin-bottom: 5px;">
                <i class="bi bi-clipboard2-pulse"></i> ê·¼ê³¨ê²©ê³„ ì¦ìƒì¡°ì‚¬í‘œ
            </h2>
            <p style="color: #6b7280; font-size: 0.9rem;">PDF 001 - ì •í™•í•œ ë°ì´í„° ìˆ˜ì§‘</p>
        </div>

        <!-- I. ê¸°ë³¸ì •ë³´ -->
        <div class="section-card">
            <h4 class="section-title">
                <i class="bi bi-person"></i> I. ê¸°ë³¸ì •ë³´
            </h4>
            
            <div class="form-row">
                <div class="form-group third">
                    <label class="form-label">ì‚¬ë²ˆ</label>
                    <input type="text" name="employee_number" class="form-control" placeholder="EMP001">
                </div>
                <div class="form-group third">
                    <label class="form-label required">ì„±ëª…</label>
                    <input type="text" name="name" class="form-control" placeholder="í™ê¸¸ë™" required>
                </div>
                <div class="form-group third">
                    <label class="form-label required">ì—°ë ¹</label>
                    <input type="number" name="age" class="form-control" placeholder="35" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label required">ì„±ë³„</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="gender_male" name="gender" value="ë‚¨" required>
                            <label for="gender_male">ë‚¨</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="gender_female" name="gender" value="ì—¬" required>
                            <label for="gender_female">ì—¬</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group half">
                    <label class="form-label required">ì‘ì—…ë¶€ì„œ</label>
                    <input type="text" name="department" class="form-control" placeholder="ìƒì‚°1íŒ€" required>
                </div>
                <div class="form-group half">
                    <label class="form-label">ì§ìœ„</label>
                    <input type="text" name="position" class="form-control" placeholder="ì‚¬ì›">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group half">
                    <label class="form-label">í˜„ ì§ì¥ê²½ë ¥ (ë…„)</label>
                    <input type="number" name="work_years" class="form-control" placeholder="5">
                </div>
                <div class="form-group half">
                    <label class="form-label">í˜„ ì§ì¥ê²½ë ¥ (ê°œì›”)</label>
                    <input type="number" name="work_months" class="form-control" placeholder="3">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">ë¼ì¸</label>
                    <input type="text" name="line" class="form-control" placeholder="Aë¼ì¸">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">ìˆ˜í–‰ì‘ì—…</label>
                    <input type="text" name="work_name" class="form-control" placeholder="ì¡°ë¦½ ì‘ì—…">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">ê²°í˜¼ì—¬ë¶€</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="marriage_single" name="marriage_status" value="ë¯¸í˜¼">
                            <label for="marriage_single">ë¯¸í˜¼</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="marriage_married" name="marriage_status" value="ê¸°í˜¼">
                            <label for="marriage_married">ê¸°í˜¼</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- í˜„ì¬í•˜ê³  ìˆëŠ” ì‘ì—… -->
        <div class="section-card">
            <h4 class="section-title">
                <i class="bi bi-briefcase"></i> í˜„ì¬í•˜ê³  ìˆëŠ” ì‘ì—…
            </h4>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">ì‘ì—…ë‚´ìš© (êµ¬ì²´ì ìœ¼ë¡œ)</label>
                    <textarea name="current_work_details" class="form-control" rows="3" placeholder="ì˜ˆ: ì»¨ë² ì´ì–´ ë²¨íŠ¸ì—ì„œ ì œí’ˆ ì¡°ë¦½ ì‘ì—…"></textarea>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group third">
                    <label class="form-label">ì‘ì—…ê¸°ê°„ (ë…„)</label>
                    <input type="number" name="current_work_years" class="form-control" placeholder="2">
                </div>
                <div class="form-group third">
                    <label class="form-label">ì‘ì—…ê¸°ê°„ (ê°œì›”)</label>
                    <input type="number" name="current_work_months" class="form-control" placeholder="6">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group third">
                    <label class="form-label">1ì¼ ê·¼ë¬´ì‹œê°„</label>
                    <input type="number" name="work_hours_per_day" class="form-control" placeholder="8">
                </div>
                <div class="form-group third">
                    <label class="form-label">íœ´ì‹ì‹œê°„(ë¶„)</label>
                    <input type="number" name="break_time_minutes" class="form-control" placeholder="60">
                </div>
                <div class="form-group third">
                    <label class="form-label">íœ´ì‹íšŸìˆ˜</label>
                    <input type="number" name="break_frequency" class="form-control" placeholder="2">
                </div>
            </div>
        </div>

        <!-- í˜„ì‘ì—…ì„ í•˜ê¸° ì „ì— í–ˆë˜ ì‘ì—… -->
        <div class="section-card">
            <h4 class="section-title">
                <i class="bi bi-clock-history"></i> í˜„ì‘ì—…ì„ í•˜ê¸° ì „ì— í–ˆë˜ ì‘ì—…
            </h4>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">ì‘ì—…ë‚´ìš©</label>
                    <textarea name="previous_work_details" class="form-control" rows="2" placeholder="ì˜ˆ: í¬ì¥ ì‘ì—…"></textarea>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group half">
                    <label class="form-label">ì‘ì—…ê¸°ê°„ (ë…„)</label>
                    <input type="number" name="previous_work_years" class="form-control" placeholder="1">
                </div>
                <div class="form-group half">
                    <label class="form-label">ì‘ì—…ê¸°ê°„ (ê°œì›”)</label>
                    <input type="number" name="previous_work_months" class="form-control" placeholder="6">
                </div>
            </div>
        </div>

        <!-- 1. ì—¬ê°€ ë° ì·¨ë¯¸í™œë™ -->
        <div class="section-card">
            <h4 class="section-title">
                <i class="bi bi-palette"></i> 1. ì—¬ê°€ ë° ì·¨ë¯¸í™œë™
            </h4>
            <p class="mb-3"><small>ê·œì¹™ì ì¸ (í•œë²ˆì— 30ë¶„ ì´ìƒ, 1ì£¼ì¼ì— 2-3íšŒ, ì ì–´ë„ 1íšŒ ì´ìƒ) ì—¬ê°€ ë° ì·¨ë¯¸í™œë™ì„ í•˜ê³  ê³„ì‹œëŠ” ê³³ì— í‘œì‹œ(âœ“)í•˜ì—¬ ì£¼ì‹­ì‹œì˜¤.</small></p>
            
            <div class="checkbox-group">
                <div class="checkbox-item">
                    <input type="checkbox" id="hobby_computer" name="hobby_computer">
                    <label for="hobby_computer">ì»´í“¨í„° ê´€ë ¨í™œë™</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="hobby_instrument" name="hobby_instrument">
                    <label for="hobby_instrument">ì•…ê¸°ì—°ì£¼ (í”¼ì•„ë…¸, ë°”ì´ì˜¬ë¦° ë“±)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="hobby_knitting" name="hobby_knitting">
                    <label for="hobby_knitting">ëœ¨ê°œì§ˆ/ììˆ˜/ë¶“ê¸€ì”¨</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="hobby_racket_sports" name="hobby_racket_sports">
                    <label for="hobby_racket_sports">í…Œë‹ˆìŠ¤/ë°°ë“œë¯¼í„´/ìŠ¤ì¿¼ì‹œ</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="hobby_ball_sports" name="hobby_ball_sports">
                    <label for="hobby_ball_sports">ì¶•êµ¬/ì¡±êµ¬/ë†êµ¬/ìŠ¤í‚¤</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="hobby_none" name="hobby_none">
                    <label for="hobby_none">í•´ë‹¹ì‚¬í•­ ì—†ìŒ</label>
                </div>
            </div>
        </div>

        <!-- 2. ê°€ì‚¬ë…¸ë™ì‹œê°„ -->
        <div class="section-card">
            <h4 class="section-title">
                <i class="bi bi-house"></i> 2. ê°€ì‚¬ë…¸ë™ì‹œê°„
            </h4>
            <p class="mb-3"><small>ê·€í•˜ì˜ í•˜ë£¨ í‰ê·  ê°€ì‚¬ë…¸ë™ì‹œê°„ (ë°¥í•˜ê¸°, ë¹¨ë˜í•˜ê¸°, ì²­ì†Œí•˜ê¸°, 2ì‚´ ë¯¸ë§Œì˜ ì•„ì´ ëŒë³´ê¸° ë“±)ì€ ì–¼ë§ˆë‚˜ ë©ë‹ˆê¹Œ?</small></p>
            
            <div class="radio-group">
                <div class="radio-item">
                    <input type="radio" id="housework_none" name="housework_hours" value="ê±°ì˜í•˜ì§€ì•ŠëŠ”ë‹¤">
                    <label for="housework_none">ê±°ì˜ í•˜ì§€ ì•ŠëŠ”ë‹¤</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="housework_1h" name="housework_hours" value="1ì‹œê°„ë¯¸ë§Œ">
                    <label for="housework_1h">1ì‹œê°„ ë¯¸ë§Œ</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="housework_2h" name="housework_hours" value="1-2ì‹œê°„">
                    <label for="housework_2h">1-2ì‹œê°„ ë¯¸ë§Œ</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="housework_3h" name="housework_hours" value="2-3ì‹œê°„">
                    <label for="housework_3h">2-3ì‹œê°„ ë¯¸ë§Œ</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="housework_over3h" name="housework_hours" value="3ì‹œê°„ì´ìƒ">
                    <label for="housework_over3h">3ì‹œê°„ ì´ìƒ</label>
                </div>
            </div>
        </div>

        <!-- 3. ì§„ë‹¨ë°›ì€ ì§ˆë³‘ -->
        <div class="section-card">
            <h4 class="section-title">
                <i class="bi bi-heart-pulse"></i> 3. ì§„ë‹¨ë°›ì€ ì§ˆë³‘
            </h4>
            <p class="mb-3"><small>ê·€í•˜ëŠ” ì˜ì‚¬ë¡œë¶€í„° ë‹¤ìŒê³¼ ê°™ì€ ì§ˆë³‘ì— ëŒ€í•´ ì§„ë‹¨ì„ ë°›ì€ ì ì´ ìˆìŠµë‹ˆê¹Œ? (í•´ë‹¹ ì§ˆë³‘ì— ì²´í¬)</small></p>
            
            <div class="checkbox-group">
                <div class="checkbox-item">
                    <input type="checkbox" id="disease_rheumatoid" name="disease_rheumatoid">
                    <label for="disease_rheumatoid">ë¥˜ë¨¸í‹°ìŠ¤ ê´€ì ˆì—¼</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="disease_diabetes" name="disease_diabetes">
                    <label for="disease_diabetes">ë‹¹ë‡¨ë³‘</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="disease_lupus" name="disease_lupus">
                    <label for="disease_lupus">ë£¨í”„ìŠ¤ë³‘</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="disease_gout" name="disease_gout">
                    <label for="disease_gout">í†µí’</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="disease_alcoholism" name="disease_alcoholism">
                    <label for="disease_alcoholism">ì•Œì½”ì˜¬ì¤‘ë…</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="disease_none" name="disease_none">
                    <label for="disease_none">ì•„ë‹ˆì˜¤</label>
                </div>
            </div>
            
            <div id="disease_status_section" style="display: none; margin-top: 15px;">
                <label class="form-label">í˜„ì¬ìƒíƒœëŠ”?</label>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" id="disease_cured" name="disease_status" value="ì™„ì¹˜">
                        <label for="disease_cured">ì™„ì¹˜</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="disease_treating" name="disease_status" value="ì¹˜ë£Œì¤‘">
                        <label for="disease_treating">ì¹˜ë£Œë‚˜ ê´€ì°° ì¤‘</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. ê³¼ê±° ì‚¬ê³  -->
        <div class="section-card">
            <h4 class="section-title">
                <i class="bi bi-bandaid"></i> 4. ê³¼ê±° ì‚¬ê³ 
            </h4>
            <p class="mb-3"><small>ê³¼ê±°ì— ìš´ë™ ì¤‘ í˜¹ì€ ì‚¬ê³ ë¡œ (êµí†µì‚¬ê³ , ë„˜ì–´ì§, ì¶”ë½ ë“±) ì¸í•´ ì†/ì†ê°€ë½/ì†ëª©, íŒ”/íŒ”ê¿ˆì¹˜, ì–´ê¹¨, ëª©, í—ˆë¦¬, ë‹¤ë¦¬/ë°œ ë¶€ìœ„ë¥¼ ë‹¤ì¹œ ì ì´ ìˆìŠµë‹ˆê¹Œ?</small></p>
            
            <div class="radio-group">
                <div class="radio-item">
                    <input type="radio" id="accident_no" name="past_accident" value="ì•„ë‹ˆì˜¤">
                    <label for="accident_no">ì•„ë‹ˆì˜¤</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="accident_yes" name="past_accident" value="ì˜ˆ">
                    <label for="accident_yes">ì˜ˆ</label>
                </div>
            </div>
            
            <div id="accident_parts_section" style="display: none; margin-top: 15px;">
                <label class="form-label">ìƒí•´ ë¶€ìœ„ëŠ”? (ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)</label>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="accident_hand" name="accident_hand">
                        <label for="accident_hand">ì†/ì†ê°€ë½/ì†ëª©</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="accident_arm" name="accident_arm">
                        <label for="accident_arm">íŒ”/íŒ”ê¿ˆì¹˜</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="accident_shoulder" name="accident_shoulder">
                        <label for="accident_shoulder">ì–´ê¹¨</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="accident_neck" name="accident_neck">
                        <label for="accident_neck">ëª©</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="accident_waist" name="accident_waist">
                        <label for="accident_waist">í—ˆë¦¬</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="accident_leg" name="accident_leg">
                        <label for="accident_leg">ë‹¤ë¦¬/ë°œ</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- 5. ìœ¡ì²´ì  ë¶€ë‹´ ì •ë„ -->
        <div class="section-card">
            <h4 class="section-title">
                <i class="bi bi-speedometer2"></i> 5. ìœ¡ì²´ì  ë¶€ë‹´ ì •ë„
            </h4>
            <p class="mb-3"><small>í˜„ì¬ í•˜ê³  ê³„ì‹œëŠ” ì¼ì˜ ìœ¡ì²´ì  ë¶€ë‹´ ì •ë„ëŠ” ì–´ëŠ ì •ë„ë¼ê³  ìƒê°í•©ë‹ˆê¹Œ?</small></p>
            
            <div class="radio-group">
                <div class="radio-item">
                    <input type="radio" id="burden_none" name="physical_burden" value="ì „í˜€í˜ë“¤ì§€ì•ŠìŒ">
                    <label for="burden_none">ì „í˜€ í˜ë“¤ì§€ ì•ŠìŒ</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="burden_tolerable" name="physical_burden" value="ê²¬ë”œë§Œí•¨">
                    <label for="burden_tolerable">ê²¬ë”œë§Œ í•¨</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="burden_somewhat" name="physical_burden" value="ì•½ê°„í˜ë“¦">
                    <label for="burden_somewhat">ì•½ê°„ í˜ë“¦</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="burden_very" name="physical_burden" value="ë§¤ìš°í˜ë“¦">
                    <label for="burden_very">ë§¤ìš° í˜ë“¦</label>
                </div>
            </div>
        </div>

        <!-- II. ê·¼ê³¨ê²©ê³„ ì¦ìƒ ì¡°ì‚¬ -->
        <div class="section-card">
            <h4 class="section-title">
                <i class="bi bi-body-text"></i> II. ê·¼ê³¨ê²©ê³„ ì¦ìƒì¡°ì‚¬
            </h4>
            <p class="mb-3"><strong>ì§€ë‚œ 1ë…„ ë™ì•ˆ ì†/ì†ê°€ë½/ì†ëª©, íŒ”/íŒ”ê¿ˆì¹˜, ì–´ê¹¨, í—ˆë¦¬, ë‹¤ë¦¬/ë°œ ì¤‘ ì–´ëŠ í•œ ë¶€ìœ„ì—ì„œë¼ë„ ê·€í•˜ì˜ ì‘ì—…ê³¼ ê´€ë ¨í•˜ì—¬ í†µì¦ì´ë‚˜ ë¶ˆí¸í•¨(í†µì¦, ì‘¤ì‹œëŠ” ëŠë‚Œ, ë»£ë»£í•¨, í™”ëˆê±°ë¦¬ëŠ” ëŠë‚Œ, ë¬´ê°ê° í˜¹ì€ ì°Œë¦¿ì°Œë¦¿í•¨ ë“±)ì„ ëŠë¼ì‹  ì ì´ ìˆìŠµë‹ˆê¹Œ?</strong></p>
            
            <div class="radio-group">
                <div class="radio-item">
                    <input type="radio" id="symptoms_no" name="has_symptoms" value="ì•„ë‹ˆì˜¤" required>
                    <label for="symptoms_no">ì•„ë‹ˆì˜¤ (ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤. ì„¤ë¬¸ì„ ë‹¤ ë§ˆì¹˜ì…¨ìŠµë‹ˆë‹¤.)</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="symptoms_yes" name="has_symptoms" value="ì˜ˆ" required>
                    <label for="symptoms_yes">ì˜ˆ ("ì˜ˆ"ë¼ê³  ë‹µí•˜ì‹  ë¶„ì€ ì•„ë˜ í‘œì˜ í†µì¦ë¶€ìœ„ì— ì²´í¬(âœ“)í•˜ê³ , í•´ë‹¹ í†µì¦ë¶€ìœ„ì˜ ì„¸ë¡œì¤„ë¡œ ë‚´ë ¤ê°€ë©° í•´ë‹¹ì‚¬í•­ì— ì²´í¬(âœ“)í•´ ì£¼ì‹­ì‹œì˜¤)</label>
                </div>
            </div>
            
            <!-- ì¦ìƒ ìƒì„¸ ì •ë³´ëŠ” "ì˜ˆ" ì„ íƒ ì‹œ JavaScriptë¡œ ë™ì  í‘œì‹œ -->
            <div id="symptom-details" style="display: none; margin-top: 20px;">
                <div class="alert alert-info">
                    <strong>ğŸ“‹ í†µì¦ë¶€ìœ„ë³„ ìƒì„¸ ì¡°ì‚¬</strong><br>
                    ì•„ë˜ í‘œì˜ í†µì¦ë¶€ìœ„ì— í•´ë‹¹ì‚¬í•­ì— ì²´í¬(âœ“)í•˜ê³ , í•´ë‹¹ í†µì¦ë¶€ìœ„ì˜ ì„¸ë¡œì¤„ë¡œ ë‚´ë ¤ê°€ë©° í•´ë‹¹ì‚¬í•­ì— ì²´í¬(âœ“)í•´ ì£¼ì‹­ì‹œì˜¤.
                </div>
                
                <div class="table-responsive">
                    <table class="table table-bordered symptoms-table">
                        <thead class="table-primary">
                            <tr>
                                <th rowspan="2">ì§ˆë¬¸</th>
                                <th>ëª©</th>
                                <th>ì–´ê¹¨</th>
                                <th>íŒ”/íŒ”ê¿ˆì¹˜</th>
                                <th>ì†/ì†ëª©/ì†ê°€ë½</th>
                                <th>í—ˆë¦¬</th>
                                <th>ë‹¤ë¦¬/ë°œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- 1. í†µì¦ì˜ êµ¬ì²´ì  ë¶€ìœ„ -->
                            <tr>
                                <td class="question-cell"><strong>1. í†µì¦ì˜ êµ¬ì²´ì  ë¶€ìœ„ëŠ”?</strong></td>
                                {% for part in ['ëª©', 'ì–´ê¹¨', 'íŒ”/íŒ”ê¿ˆì¹˜', 'ì†/ì†ëª©/ì†ê°€ë½', 'í—ˆë¦¬', 'ë‹¤ë¦¬/ë°œ'] %}
                                <td class="answer-cell">
                                    <div class="radio-group-vertical">
                                        <label><input type="radio" name="{{ part }}_side" value="ì˜¤ë¥¸ìª½"> ì˜¤ë¥¸ìª½</label>
                                        <label><input type="radio" name="{{ part }}_side" value="ì™¼ìª½"> ì™¼ìª½</label>
                                        <label><input type="radio" name="{{ part }}_side" value="ì–‘ìª½ëª¨ë‘"> ì–‘ìª½ ëª¨ë‘</label>
                                    </div>
                                </td>
                                {% endfor %}
                            </tr>
                            
                            <!-- 2. í•œë²ˆ ì•„í”„ê¸° ì‹œì‘í•˜ë©´ í†µì¦ê¸°ê°„ì€ ì–¼ë§ˆë™ì•ˆ ì§€ì†ë©ë‹ˆê¹Œ? -->
                            <tr>
                                <td class="question-cell"><strong>2. í•œë²ˆ ì•„í”„ê¸° ì‹œì‘í•˜ë©´ í†µì¦ê¸°ê°„ì€ ì–¼ë§ˆë™ì•ˆ ì§€ì†ë©ë‹ˆê¹Œ?</strong></td>
                                {% for part in ['ëª©', 'ì–´ê¹¨', 'íŒ”/íŒ”ê¿ˆì¹˜', 'ì†/ì†ëª©/ì†ê°€ë½', 'í—ˆë¦¬', 'ë‹¤ë¦¬/ë°œ'] %}
                                <td class="answer-cell">
                                    <div class="radio-group-vertical">
                                        <label><input type="radio" name="{{ part }}_duration" value="1ì¼ë¯¸ë§Œ"> 1ì¼ ë¯¸ë§Œ</label>
                                        <label><input type="radio" name="{{ part }}_duration" value="1ì¼-1ì£¼ì¼ë¯¸ë§Œ"> 1ì¼-1ì£¼ì¼ ë¯¸ë§Œ</label>
                                        <label><input type="radio" name="{{ part }}_duration" value="1ì£¼ì¼-1ë‹¬ë¯¸ë§Œ"> 1ì£¼ì¼-1ë‹¬ ë¯¸ë§Œ</label>
                                        <label><input type="radio" name="{{ part }}_duration" value="1ë‹¬-6ê°œì›”ë¯¸ë§Œ"> 1ë‹¬-6ê°œì›” ë¯¸ë§Œ</label>
                                        <label><input type="radio" name="{{ part }}_duration" value="6ê°œì›”ì´ìƒ"> 6ê°œì›” ì´ìƒ</label>
                                    </div>
                                </td>
                                {% endfor %}
                            </tr>
                            
                            <!-- 3. ê·¸ë•Œì˜ ì•„í”ˆ ì •ë„ëŠ” ì–´ëŠ ì •ë„ì…ë‹ˆê¹Œ? -->
                            <tr>
                                <td class="question-cell">
                                    <strong>3. ê·¸ë•Œì˜ ì•„í”ˆ ì •ë„ëŠ” ì–´ëŠ ì •ë„ì…ë‹ˆê¹Œ?</strong>
                                    <div class="severity-guide">
                                        <small>
                                            <strong>ë³´ê¸°:</strong><br>
                                            <strong>ì•½í•œ í†µì¦:</strong> ì•½ê°„ ë¶ˆí¸í•œ ì •ë„ì´ë‚˜ ì‘ì—…ì— ì—´ì¤‘í•  ë•ŒëŠ” ëª» ëŠë‚€ë‹¤<br>
                                            <strong>ì¤‘ê°„ í†µì¦:</strong> ì‘ì—… ì¤‘ í†µì¦ì´ ìˆìœ¼ë‚˜ ê·€ê°€ í›„ íœ´ì‹ì„ ì·¨í•˜ë©´ ê´œì°®ë‹¤<br>
                                            <strong>ì‹¬í•œ í†µì¦:</strong> ì‘ì—… ì¤‘ í†µì¦ì´ ë¹„êµì  ì‹¬í•˜ê³  ê·€ê°€ í›„ì—ë„ í†µì¦ì´ ê³„ì†ëœë‹¤<br>
                                            <strong>ë§¤ìš° ì‹¬í•œ í†µì¦:</strong> í†µì¦ ë•Œë¬¸ì— ì‘ì—…ì€ ë¬¼ë¡  ì¼ìƒìƒí™œì„ í•˜ê¸°ê°€ ì–´ë µë‹¤
                                        </small>
                                    </div>
                                </td>
                                {% for part in ['ëª©', 'ì–´ê¹¨', 'íŒ”/íŒ”ê¿ˆì¹˜', 'ì†/ì†ëª©/ì†ê°€ë½', 'í—ˆë¦¬', 'ë‹¤ë¦¬/ë°œ'] %}
                                <td class="answer-cell">
                                    <div class="radio-group-vertical">
                                        <label><input type="radio" name="{{ part }}_severity" value="ì•½í•œí†µì¦"> ì•½í•œ í†µì¦</label>
                                        <label><input type="radio" name="{{ part }}_severity" value="ì¤‘ê°„í†µì¦"> ì¤‘ê°„ í†µì¦</label>
                                        <label><input type="radio" name="{{ part }}_severity" value="ì‹¬í•œí†µì¦"> ì‹¬í•œ í†µì¦</label>
                                        <label><input type="radio" name="{{ part }}_severity" value="ë§¤ìš°ì‹¬í•œí†µì¦"> ë§¤ìš° ì‹¬í•œ í†µì¦</label>
                                    </div>
                                </td>
                                {% endfor %}
                            </tr>
                            
                            <!-- 4. ì§€ë‚œ 1ë…„ ë™ì•ˆ ì´ëŸ¬í•œ ì¦ìƒì„ ì–¼ë§ˆë‚˜ ìì£¼ ê²½í—˜í•˜ì…¨ìŠµë‹ˆê¹Œ? -->
                            <tr>
                                <td class="question-cell"><strong>4. ì§€ë‚œ 1ë…„ ë™ì•ˆ ì´ëŸ¬í•œ ì¦ìƒì„ ì–¼ë§ˆë‚˜ ìì£¼ ê²½í—˜í•˜ì…¨ìŠµë‹ˆê¹Œ?</strong></td>
                                {% for part in ['ëª©', 'ì–´ê¹¨', 'íŒ”/íŒ”ê¿ˆì¹˜', 'ì†/ì†ëª©/ì†ê°€ë½', 'í—ˆë¦¬', 'ë‹¤ë¦¬/ë°œ'] %}
                                <td class="answer-cell">
                                    <div class="radio-group-vertical">
                                        <label><input type="radio" name="{{ part }}_frequency" value="6ê°œì›”ì—1ë²ˆ"> 6ê°œì›”ì— 1ë²ˆ</label>
                                        <label><input type="radio" name="{{ part }}_frequency" value="2-3ë‹¬ì—1ë²ˆ"> 2-3ë‹¬ì— 1ë²ˆ</label>
                                        <label><input type="radio" name="{{ part }}_frequency" value="1ë‹¬ì—1ë²ˆ"> 1ë‹¬ì— 1ë²ˆ</label>
                                        <label><input type="radio" name="{{ part }}_frequency" value="1ì£¼ì¼ì—1ë²ˆ"> 1ì£¼ì¼ì— 1ë²ˆ</label>
                                        <label><input type="radio" name="{{ part }}_frequency" value="ë§¤ì¼"> ë§¤ì¼</label>
                                    </div>
                                </td>
                                {% endfor %}
                            </tr>
                            
                            <!-- 5. ì§€ë‚œ 1ì£¼ì¼ ë™ì•ˆì—ë„ ì´ëŸ¬í•œ ì¦ìƒì´ ìˆì—ˆìŠµë‹ˆê¹Œ? -->
                            <tr>
                                <td class="question-cell"><strong>5. ì§€ë‚œ 1ì£¼ì¼ ë™ì•ˆì—ë„ ì´ëŸ¬í•œ ì¦ìƒì´ ìˆì—ˆìŠµë‹ˆê¹Œ?</strong></td>
                                {% for part in ['ëª©', 'ì–´ê¹¨', 'íŒ”/íŒ”ê¿ˆì¹˜', 'ì†/ì†ëª©/ì†ê°€ë½', 'í—ˆë¦¬', 'ë‹¤ë¦¬/ë°œ'] %}
                                <td class="answer-cell">
                                    <div class="radio-group-vertical">
                                        <label><input type="radio" name="{{ part }}_last_week" value="ì•„ë‹ˆì˜¤"> ì•„ë‹ˆì˜¤</label>
                                        <label><input type="radio" name="{{ part }}_last_week" value="ì˜ˆ"> ì˜ˆ</label>
                                    </div>
                                </td>
                                {% endfor %}
                            </tr>
                            
                            <!-- 6. ì§€ë‚œ 1ë…„ ë™ì•ˆ ì´ëŸ¬í•œ í†µì¦ìœ¼ë¡œ ì¸í•´ ì–´ë–¤ ì¼ì´ ìˆì—ˆìŠµë‹ˆê¹Œ? -->
                            <tr>
                                <td class="question-cell"><strong>6. ì§€ë‚œ 1ë…„ ë™ì•ˆ ì´ëŸ¬í•œ í†µì¦ìœ¼ë¡œ ì¸í•´ ì–´ë–¤ ì¼ì´ ìˆì—ˆìŠµë‹ˆê¹Œ?</strong></td>
                                {% for part in ['ëª©', 'ì–´ê¹¨', 'íŒ”/íŒ”ê¿ˆì¹˜', 'ì†/ì†ëª©/ì†ê°€ë½', 'í—ˆë¦¬', 'ë‹¤ë¦¬/ë°œ'] %}
                                <td class="answer-cell">
                                    <div class="checkbox-group-vertical">
                                        <label><input type="checkbox" name="{{ part }}_treatment" value="ë³‘ì›í•œì˜ì›ì¹˜ë£Œ"> ë³‘ì›Â·í•œì˜ì› ì¹˜ë£Œ</label>
                                        <label><input type="checkbox" name="{{ part }}_treatment" value="ì•½êµ­ì¹˜ë£Œ"> ì•½êµ­ì¹˜ë£Œ</label>
                                        <label><input type="checkbox" name="{{ part }}_treatment" value="ë³‘ê°€ì‚°ì¬"> ë³‘ê°€, ì‚°ì¬</label>
                                        <label><input type="checkbox" name="{{ part }}_treatment" value="ì‘ì—…ì „í™˜"> ì‘ì—… ì „í™˜</label>
                                        <label><input type="checkbox" name="{{ part }}_treatment" value="í•´ë‹¹ì‚¬í•­ì—†ìŒ"> í•´ë‹¹ì‚¬í•­ ì—†ìŒ</label>
                                        <label><input type="text" name="{{ part }}_treatment_other" placeholder="ê¸°íƒ€ (êµ¬ì²´ì ìœ¼ë¡œ)" class="form-control form-control-sm"></label>
                                    </div>
                                </td>
                                {% endfor %}
                            </tr>
                        </tbody>
                    </table>
                </div>
                            <input type="radio" id="marriage_married" name="marriage_status" value="ê¸°í˜¼">
                            <label for="marriage_married">ê¸°í˜¼</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- í˜„ì¬ ì‘ì—… ì •ë³´ -->
        <div class="section-card">
            <h4 class="section-title">
                <i class="bi bi-briefcase"></i> í˜„ì¬í•˜ê³  ìˆëŠ” ì‘ì—…
            </h4>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">ì‘ì—…ë‚´ìš©</label>
                    <textarea name="current_work_details" class="form-control" rows="3" placeholder="í˜„ì¬ ìˆ˜í–‰í•˜ê³  ìˆëŠ” ì‘ì—…ì— ëŒ€í•´ ìƒì„¸íˆ ê¸°ìˆ í•´ì£¼ì„¸ìš”"></textarea>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group half">
                    <label class="form-label">ì‘ì—…ê¸°ê°„ (ë…„)</label>
                    <input type="number" name="current_work_years" class="form-control" placeholder="3">
                </div>
                <div class="form-group half">
                    <label class="form-label">ì‘ì—…ê¸°ê°„ (ê°œì›”)</label>
                    <input type="number" name="current_work_months" class="form-control" placeholder="6">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group third">
                    <label class="form-label">1ì¼ ê·¼ë¬´ì‹œê°„</label>
                    <input type="number" name="work_hours_per_day" class="form-control" placeholder="8">
                </div>
                <div class="form-group third">
                    <label class="form-label">íœ´ì‹ì‹œê°„ (ë¶„)</label>
                    <input type="number" name="break_time_minutes" class="form-control" placeholder="60">
                </div>
                <div class="form-group third">
                    <label class="form-label">íœ´ì‹íšŸìˆ˜</label>
                    <input type="number" name="break_frequency" class="form-control" placeholder="2">
                </div>
            </div>
        </div>

        <!-- ì´ì „ ì‘ì—… ì •ë³´ -->
        <div class="section-card">
            <h4 class="section-title">
                <i class="bi bi-clock-history"></i> í˜„ì‘ì—… í•˜ê¸° ì „ ì‘ì—…
            </h4>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">ì´ì „ ì‘ì—…ë‚´ìš©</label>
                    <textarea name="previous_work_details" class="form-control" rows="3" placeholder="ì´ì „ì— ìˆ˜í–‰í–ˆë˜ ì‘ì—…ì— ëŒ€í•´ ê¸°ìˆ í•´ì£¼ì„¸ìš”"></textarea>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group half">
                    <label class="form-label">ì´ì „ ì‘ì—…ê¸°ê°„ (ë…„)</label>
                    <input type="number" name="previous_work_years" class="form-control" placeholder="2">
                </div>
                <div class="form-group half">
                    <label class="form-label">ì´ì „ ì‘ì—…ê¸°ê°„ (ê°œì›”)</label>
                    <input type="number" name="previous_work_months" class="form-control" placeholder="4">
                </div>
            </div>
        </div>

        <!-- ì—¬ê°€ ë° ì·¨ë¯¸í™œë™ -->
        <div class="section-card">
            <h4 class="section-title">
                <i class="bi bi-palette"></i> 1. ì—¬ê°€ ë° ì·¨ë¯¸í™œë™
            </h4>
            
            <div class="checkbox-group">
                <div class="checkbox-item">
                    <input type="checkbox" name="hobby_computer" id="hobby_computer">
                    <label for="hobby_computer">ì»´í“¨í„° ê´€ë ¨í™œë™</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="hobby_instrument" id="hobby_instrument">
                    <label for="hobby_instrument">ì•…ê¸°ì—°ì£¼(í”¼ì•„ë…¸, ë°”ì´ì˜¬ë¦° ë“±)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="hobby_knitting" id="hobby_knitting">
                    <label for="hobby_knitting">ëœ¨ê°œì§ˆ/ììˆ˜/ë¶“ê¸€ì”¨</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="hobby_racket_sports" id="hobby_racket_sports">
                    <label for="hobby_racket_sports">í…Œë‹ˆìŠ¤/ë°°ë“œë¯¼í„´/ìŠ¤ì¿¼ì‹œ</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="hobby_ball_sports" id="hobby_ball_sports">
                    <label for="hobby_ball_sports">ì¶•êµ¬/ì¡±êµ¬/ë†êµ¬/ìŠ¤í‚¤</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="hobby_none" id="hobby_none">
                    <label for="hobby_none">í•´ë‹¹ì‚¬í•­ ì—†ìŒ</label>
                </div>
            </div>
        </div>

        <!-- ê°€ì‚¬ë…¸ë™ì‹œê°„ -->
        <div class="section-card">
            <h4 class="section-title">
                <i class="bi bi-house"></i> 2. ê°€ì‚¬ë…¸ë™ì‹œê°„
            </h4>
            
            <div class="form-group">
                <label class="form-label">í•˜ë£¨ í‰ê·  ê°€ì‚¬ë…¸ë™ì‹œê°„</label>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" id="housework_1" name="housework_hours" value="ê±°ì˜ì•ˆí•¨">
                        <label for="housework_1">ê±°ì˜ì•ˆí•¨</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="housework_2" name="housework_hours" value="1ì‹œê°„ë¯¸ë§Œ">
                        <label for="housework_2">1ì‹œê°„ë¯¸ë§Œ</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="housework_3" name="housework_hours" value="1-2ì‹œê°„">
                        <label for="housework_3">1-2ì‹œê°„</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="housework_4" name="housework_hours" value="2-3ì‹œê°„">
                        <label for="housework_4">2-3ì‹œê°„</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="housework_5" name="housework_hours" value="3ì‹œê°„ì´ìƒ">
                        <label for="housework_5">3ì‹œê°„ì´ìƒ</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì§„ë‹¨ë°›ì€ ì§ˆë³‘ -->
        <div class="section-card">
            <h4 class="section-title">
                <i class="bi bi-heart-pulse"></i> 3. ì§„ë‹¨ë°›ì€ ì§ˆë³‘
            </h4>
            
            <div class="checkbox-group">
                <div class="checkbox-item">
                    <input type="checkbox" name="disease_rheumatoid" id="disease_rheumatoid">
                    <label for="disease_rheumatoid">ë¥˜ë¨¸í‹°ìŠ¤ ê´€ì ˆì—¼</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="disease_diabetes" id="disease_diabetes">
                    <label for="disease_diabetes">ë‹¹ë‡¨ë³‘</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="disease_lupus" id="disease_lupus">
                    <label for="disease_lupus">ë£¨í”„ìŠ¤ë³‘</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="disease_gout" id="disease_gout">
                    <label for="disease_gout">í†µí’</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="disease_alcoholism" id="disease_alcoholism">
                    <label for="disease_alcoholism">ì•Œì½”ì˜¬ì¤‘ë…</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="disease_none" id="disease_none">
                    <label for="disease_none">ì•„ë‹ˆì˜¤</label>
                </div>
            </div>
            
            <div class="form-row" style="margin-top: 15px;">
                <div class="form-group">
                    <label class="form-label">í˜„ì¬ìƒíƒœ</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="disease_status_cured" name="disease_status" value="ì™„ì¹˜">
                            <label for="disease_status_cured">ì™„ì¹˜</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="disease_status_treatment" name="disease_status" value="ì¹˜ë£Œë‚˜ ê´€ì°° ì¤‘">
                            <label for="disease_status_treatment">ì¹˜ë£Œë‚˜ ê´€ì°° ì¤‘</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ê³¼ê±° ì‚¬ê³  -->
        <div class="section-card">
            <h4 class="section-title">
                <i class="bi bi-bandaid"></i> 4. ê³¼ê±° ì‚¬ê³ 
            </h4>
            
            <div class="form-group">
                <label class="form-label">ê³¼ê±° ìš´ë™/ì‚¬ê³ ë¡œ ë‹¤ì¹œ ì ì´ ìˆìŠµë‹ˆê¹Œ?</label>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" id="past_accident_yes" name="past_accident" value="ì˜ˆ">
                        <label for="past_accident_yes">ì˜ˆ</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="past_accident_no" name="past_accident" value="ì•„ë‹ˆì˜¤">
                        <label for="past_accident_no">ì•„ë‹ˆì˜¤</label>
                    </div>
                </div>
            </div>
            
            <div id="accident_details_section" class="checkbox-group" style="margin-top: 15px; display: none;">
                <div class="checkbox-item">
                    <input type="checkbox" name="accident_hand" id="accident_hand">
                    <label for="accident_hand">ì†/ì†ê°€ë½/ì†ëª©</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="accident_arm" id="accident_arm">
                    <label for="accident_arm">íŒ”/íŒ”ê¿ˆì¹˜</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="accident_shoulder" id="accident_shoulder">
                    <label for="accident_shoulder">ì–´ê¹¨</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="accident_neck" id="accident_neck">
                    <label for="accident_neck">ëª©</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="accident_waist" id="accident_waist">
                    <label for="accident_waist">í—ˆë¦¬</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="accident_leg" id="accident_leg">
                    <label for="accident_leg">ë‹¤ë¦¬/ë°œ</label>
                </div>
            </div>
        </div>

        <!-- ìœ¡ì²´ì  ë¶€ë‹´ ì •ë„ -->
        <div class="section-card">
            <h4 class="section-title">
                <i class="bi bi-speedometer2"></i> 5. ìœ¡ì²´ì  ë¶€ë‹´ ì •ë„
            </h4>
            
            <div class="form-group">
                <label class="form-label">í˜„ì¬ ì¼ì˜ ìœ¡ì²´ì  ë¶€ë‹´ ì •ë„</label>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" id="physical_1" name="physical_burden" value="ì „í˜€í˜ë“¤ì§€ì•ŠìŒ">
                        <label for="physical_1">ì „í˜€í˜ë“¤ì§€ì•ŠìŒ</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="physical_2" name="physical_burden" value="ê²¬ë”œë§Œí•¨">
                        <label for="physical_2">ê²¬ë”œë§Œí•¨</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="physical_3" name="physical_burden" value="ì•½ê°„í˜ë“¦">
                        <label for="physical_3">ì•½ê°„í˜ë“¦</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="physical_4" name="physical_burden" value="ë§¤ìš°í˜ë“¦">
                        <label for="physical_4">ë§¤ìš°í˜ë“¦</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- II. ê·¼ê³¨ê²©ê³„ ì¦ìƒ -->
        <div class="section-card">
            <h4 class="section-title">
                <i class="bi bi-heart-pulse"></i> II. ê·¼ê³¨ê²©ê³„ ì¦ìƒ
            </h4>
            
            <div class="form-group">
                <label class="form-label required">ì§€ë‚œ 1ë…„ ë™ì•ˆ í†µì¦ì´ë‚˜ ë¶ˆí¸í•¨ì„ ëŠë¼ì‹  ì ì´ ìˆìŠµë‹ˆê¹Œ?</label>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" id="has_symptoms_yes" name="has_symptoms" value="ì˜ˆ" required>
                        <label for="has_symptoms_yes">ì˜ˆ</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="has_symptoms_no" name="has_symptoms" value="ì•„ë‹ˆì˜¤" required>
                        <label for="has_symptoms_no">ì•„ë‹ˆì˜¤</label>
                    </div>
                </div>
            </div>
            
            <!-- ì¦ìƒ ìƒì„¸ ì •ë³´ëŠ” "ì˜ˆ" ì„ íƒ ì‹œ JavaScriptë¡œ ë™ì  í‘œì‹œ -->
            <div id="symptom-details" style="display: none; margin-top: 20px;">
                <div class="alert alert-info">
                    <strong>ğŸ“‹ í†µì¦ë¶€ìœ„ë³„ ìƒì„¸ ì¡°ì‚¬</strong><br>
                    ì•„ë˜ í‘œì˜ í†µì¦ë¶€ìœ„ì— í•´ë‹¹ì‚¬í•­ì— ì²´í¬(âœ“)í•˜ê³ , í•´ë‹¹ í†µì¦ë¶€ìœ„ì˜ ì„¸ë¡œì¤„ë¡œ ë‚´ë ¤ê°€ë©° í•´ë‹¹ì‚¬í•­ì— ì²´í¬(âœ“)í•´ ì£¼ì‹­ì‹œì˜¤.
                </div>
                
                <div class="table-responsive">
                    <table class="table table-bordered symptoms-table">
                        <thead class="table-primary">
                            <tr>
                                <th rowspan="2">ì§ˆë¬¸</th>
                                <th>ëª©</th>
                                <th>ì–´ê¹¨</th>
                                <th>íŒ”/íŒ”ê¿ˆì¹˜</th>
                                <th>ì†/ì†ëª©/ì†ê°€ë½</th>
                                <th>í—ˆë¦¬</th>
                                <th>ë‹¤ë¦¬/ë°œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- 1. í†µì¦ì˜ êµ¬ì²´ì  ë¶€ìœ„ -->
                            <tr>
                                <td class="question-cell"><strong>1. í†µì¦ì˜ êµ¬ì²´ì  ë¶€ìœ„ëŠ”?</strong></td>
                                {% for part in ['ëª©', 'ì–´ê¹¨', 'íŒ”/íŒ”ê¿ˆì¹˜', 'ì†/ì†ëª©/ì†ê°€ë½', 'í—ˆë¦¬', 'ë‹¤ë¦¬/ë°œ'] %}
                                <td class="answer-cell">
                                    <div class="radio-group-vertical">
                                        <label><input type="radio" name="{{ part }}_side" value="ì˜¤ë¥¸ìª½"> ì˜¤ë¥¸ìª½</label>
                                        <label><input type="radio" name="{{ part }}_side" value="ì™¼ìª½"> ì™¼ìª½</label>
                                        <label><input type="radio" name="{{ part }}_side" value="ì–‘ìª½ëª¨ë‘"> ì–‘ìª½ ëª¨ë‘</label>
                                    </div>
                                </td>
                                {% endfor %}
                            </tr>
                            
                            <!-- 2. í•œë²ˆ ì•„í”„ê¸° ì‹œì‘í•˜ë©´ í†µì¦ê¸°ê°„ì€ ì–¼ë§ˆë™ì•ˆ ì§€ì†ë©ë‹ˆê¹Œ? -->
                            <tr>
                                <td class="question-cell"><strong>2. í•œë²ˆ ì•„í”„ê¸° ì‹œì‘í•˜ë©´ í†µì¦ê¸°ê°„ì€ ì–¼ë§ˆë™ì•ˆ ì§€ì†ë©ë‹ˆê¹Œ?</strong></td>
                                {% for part in ['ëª©', 'ì–´ê¹¨', 'íŒ”/íŒ”ê¿ˆì¹˜', 'ì†/ì†ëª©/ì†ê°€ë½', 'í—ˆë¦¬', 'ë‹¤ë¦¬/ë°œ'] %}
                                <td class="answer-cell">
                                    <div class="radio-group-vertical">
                                        <label><input type="radio" name="{{ part }}_duration" value="1ì¼ë¯¸ë§Œ"> 1ì¼ ë¯¸ë§Œ</label>
                                        <label><input type="radio" name="{{ part }}_duration" value="1ì¼-1ì£¼ì¼ë¯¸ë§Œ"> 1ì¼-1ì£¼ì¼ ë¯¸ë§Œ</label>
                                        <label><input type="radio" name="{{ part }}_duration" value="1ì£¼ì¼-1ë‹¬ë¯¸ë§Œ"> 1ì£¼ì¼-1ë‹¬ ë¯¸ë§Œ</label>
                                        <label><input type="radio" name="{{ part }}_duration" value="1ë‹¬-6ê°œì›”ë¯¸ë§Œ"> 1ë‹¬-6ê°œì›” ë¯¸ë§Œ</label>
                                        <label><input type="radio" name="{{ part }}_duration" value="6ê°œì›”ì´ìƒ"> 6ê°œì›” ì´ìƒ</label>
                                    </div>
                                </td>
                                {% endfor %}
                            </tr>
                            
                            <!-- 3. ê·¸ë•Œì˜ ì•„í”ˆ ì •ë„ëŠ” ì–´ëŠ ì •ë„ì…ë‹ˆê¹Œ? -->
                            <tr>
                                <td class="question-cell">
                                    <strong>3. ê·¸ë•Œì˜ ì•„í”ˆ ì •ë„ëŠ” ì–´ëŠ ì •ë„ì…ë‹ˆê¹Œ?</strong>
                                    <div class="severity-guide">
                                        <small>
                                            <strong>ë³´ê¸°:</strong><br>
                                            <strong>ì•½í•œ í†µì¦:</strong> ì•½ê°„ ë¶ˆí¸í•œ ì •ë„ì´ë‚˜ ì‘ì—…ì— ì—´ì¤‘í•  ë•ŒëŠ” ëª» ëŠë‚€ë‹¤<br>
                                            <strong>ì¤‘ê°„ í†µì¦:</strong> ì‘ì—… ì¤‘ í†µì¦ì´ ìˆìœ¼ë‚˜ ê·€ê°€ í›„ íœ´ì‹ì„ ì·¨í•˜ë©´ ê´œì°®ë‹¤<br>
                                            <strong>ì‹¬í•œ í†µì¦:</strong> ì‘ì—… ì¤‘ í†µì¦ì´ ë¹„êµì  ì‹¬í•˜ê³  ê·€ê°€ í›„ì—ë„ í†µì¦ì´ ê³„ì†ëœë‹¤<br>
                                            <strong>ë§¤ìš° ì‹¬í•œ í†µì¦:</strong> í†µì¦ ë•Œë¬¸ì— ì‘ì—…ì€ ë¬¼ë¡  ì¼ìƒìƒí™œì„ í•˜ê¸°ê°€ ì–´ë µë‹¤
                                        </small>
                                    </div>
                                </td>
                                {% for part in ['ëª©', 'ì–´ê¹¨', 'íŒ”/íŒ”ê¿ˆì¹˜', 'ì†/ì†ëª©/ì†ê°€ë½', 'í—ˆë¦¬', 'ë‹¤ë¦¬/ë°œ'] %}
                                <td class="answer-cell">
                                    <div class="radio-group-vertical">
                                        <label><input type="radio" name="{{ part }}_severity" value="ì•½í•œí†µì¦"> ì•½í•œ í†µì¦</label>
                                        <label><input type="radio" name="{{ part }}_severity" value="ì¤‘ê°„í†µì¦"> ì¤‘ê°„ í†µì¦</label>
                                        <label><input type="radio" name="{{ part }}_severity" value="ì‹¬í•œí†µì¦"> ì‹¬í•œ í†µì¦</label>
                                        <label><input type="radio" name="{{ part }}_severity" value="ë§¤ìš°ì‹¬í•œí†µì¦"> ë§¤ìš° ì‹¬í•œ í†µì¦</label>
                                    </div>
                                </td>
                                {% endfor %}
                            </tr>
                            
                            <!-- 4. ì§€ë‚œ 1ë…„ ë™ì•ˆ ì´ëŸ¬í•œ ì¦ìƒì„ ì–¼ë§ˆë‚˜ ìì£¼ ê²½í—˜í•˜ì…¨ìŠµë‹ˆê¹Œ? -->
                            <tr>
                                <td class="question-cell"><strong>4. ì§€ë‚œ 1ë…„ ë™ì•ˆ ì´ëŸ¬í•œ ì¦ìƒì„ ì–¼ë§ˆë‚˜ ìì£¼ ê²½í—˜í•˜ì…¨ìŠµë‹ˆê¹Œ?</strong></td>
                                {% for part in ['ëª©', 'ì–´ê¹¨', 'íŒ”/íŒ”ê¿ˆì¹˜', 'ì†/ì†ëª©/ì†ê°€ë½', 'í—ˆë¦¬', 'ë‹¤ë¦¬/ë°œ'] %}
                                <td class="answer-cell">
                                    <div class="radio-group-vertical">
                                        <label><input type="radio" name="{{ part }}_frequency" value="6ê°œì›”ì—1ë²ˆ"> 6ê°œì›”ì— 1ë²ˆ</label>
                                        <label><input type="radio" name="{{ part }}_frequency" value="2-3ë‹¬ì—1ë²ˆ"> 2-3ë‹¬ì— 1ë²ˆ</label>
                                        <label><input type="radio" name="{{ part }}_frequency" value="1ë‹¬ì—1ë²ˆ"> 1ë‹¬ì— 1ë²ˆ</label>
                                        <label><input type="radio" name="{{ part }}_frequency" value="1ì£¼ì¼ì—1ë²ˆ"> 1ì£¼ì¼ì— 1ë²ˆ</label>
                                        <label><input type="radio" name="{{ part }}_frequency" value="ë§¤ì¼"> ë§¤ì¼</label>
                                    </div>
                                </td>
                                {% endfor %}
                            </tr>
                            
                            <!-- 5. ì§€ë‚œ 1ì£¼ì¼ ë™ì•ˆì—ë„ ì´ëŸ¬í•œ ì¦ìƒì´ ìˆì—ˆìŠµë‹ˆê¹Œ? -->
                            <tr>
                                <td class="question-cell"><strong>5. ì§€ë‚œ 1ì£¼ì¼ ë™ì•ˆì—ë„ ì´ëŸ¬í•œ ì¦ìƒì´ ìˆì—ˆìŠµë‹ˆê¹Œ?</strong></td>
                                {% for part in ['ëª©', 'ì–´ê¹¨', 'íŒ”/íŒ”ê¿ˆì¹˜', 'ì†/ì†ëª©/ì†ê°€ë½', 'í—ˆë¦¬', 'ë‹¤ë¦¬/ë°œ'] %}
                                <td class="answer-cell">
                                    <div class="radio-group-vertical">
                                        <label><input type="radio" name="{{ part }}_last_week" value="ì•„ë‹ˆì˜¤"> ì•„ë‹ˆì˜¤</label>
                                        <label><input type="radio" name="{{ part }}_last_week" value="ì˜ˆ"> ì˜ˆ</label>
                                    </div>
                                </td>
                                {% endfor %}
                            </tr>
                            
                            <!-- 6. ì§€ë‚œ 1ë…„ ë™ì•ˆ ì´ëŸ¬í•œ í†µì¦ìœ¼ë¡œ ì¸í•´ ì–´ë–¤ ì¼ì´ ìˆì—ˆìŠµë‹ˆê¹Œ? -->
                            <tr>
                                <td class="question-cell"><strong>6. ì§€ë‚œ 1ë…„ ë™ì•ˆ ì´ëŸ¬í•œ í†µì¦ìœ¼ë¡œ ì¸í•´ ì–´ë–¤ ì¼ì´ ìˆì—ˆìŠµë‹ˆê¹Œ?</strong></td>
                                {% for part in ['ëª©', 'ì–´ê¹¨', 'íŒ”/íŒ”ê¿ˆì¹˜', 'ì†/ì†ëª©/ì†ê°€ë½', 'í—ˆë¦¬', 'ë‹¤ë¦¬/ë°œ'] %}
                                <td class="answer-cell">
                                    <div class="checkbox-group-vertical">
                                        <label><input type="checkbox" name="{{ part }}_treatment" value="ë³‘ì›í•œì˜ì›ì¹˜ë£Œ"> ë³‘ì›Â·í•œì˜ì› ì¹˜ë£Œ</label>
                                        <label><input type="checkbox" name="{{ part }}_treatment" value="ì•½êµ­ì¹˜ë£Œ"> ì•½êµ­ì¹˜ë£Œ</label>
                                        <label><input type="checkbox" name="{{ part }}_treatment" value="ë³‘ê°€ì‚°ì¬"> ë³‘ê°€, ì‚°ì¬</label>
                                        <label><input type="checkbox" name="{{ part }}_treatment" value="ì‘ì—…ì „í™˜"> ì‘ì—… ì „í™˜</label>
                                        <label><input type="checkbox" name="{{ part }}_treatment" value="í•´ë‹¹ì‚¬í•­ì—†ìŒ"> í•´ë‹¹ì‚¬í•­ ì—†ìŒ</label>
                                        <label><input type="text" name="{{ part }}_treatment_other" placeholder="ê¸°íƒ€ (êµ¬ì²´ì ìœ¼ë¡œ)" class="form-control form-control-sm"></label>
                                    </div>
                                </td>
                                {% endfor %}
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- ì œì¶œ ë²„íŠ¼ -->
        <div class="submit-section">
            <button type="submit" class="submit-btn">ì œì¶œí•˜ê¸°</button>
        </div>
    </form>
</div>

<script>
// ì¦ìƒ ìœ ë¬´ì— ë”°ë¥¸ ìƒì„¸ ì •ë³´ í‘œì‹œ/ìˆ¨ê¹€
document.querySelectorAll('input[name="has_symptoms"]').forEach(radio => {
    radio.addEventListener('change', function() {
        const symptomDetails = document.getElementById('symptom-details');
        if (this.value === 'ì˜ˆ') {
            symptomDetails.style.display = 'block';
        } else {
            symptomDetails.style.display = 'none';
        }
    });
});

// í¼ ê²€ì¦ ë° ì œì¶œ ì²˜ë¦¬
document.getElementById('surveyForm').addEventListener('submit', function(e) {
    const hasSymptoms = document.querySelector('input[name="has_symptoms"]:checked');
    if (!hasSymptoms) {
        e.preventDefault();
        alert('í†µì¦ ê²½í—˜ ì—¬ë¶€ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.');
        return false;
    }
    
    // "ì˜ˆ"ë¥¼ ì„ íƒí•œ ê²½ìš° ìµœì†Œ í•˜ë‚˜ì˜ ë¶€ìœ„ëŠ” ì‘ë‹µì´ ìˆì–´ì•¼ í•¨
    if (hasSymptoms.value === 'ì˜ˆ') {
        const bodyParts = ['ëª©', 'ì–´ê¹¨', 'íŒ”/íŒ”ê¿ˆì¹˜', 'ì†/ì†ëª©/ì†ê°€ë½', 'í—ˆë¦¬', 'ë‹¤ë¦¬/ë°œ'];
        let hasAnyResponse = false;
        
        bodyParts.forEach(part => {
            const sideInputs = document.querySelectorAll(`input[name="${part}_side"]:checked`);
            if (sideInputs.length > 0) {
                hasAnyResponse = true;
            }
        });
        
        if (!hasAnyResponse) {
            e.preventDefault();
            alert('í†µì¦ ë¶€ìœ„ë¥¼ í•˜ë‚˜ ì´ìƒ ì„ íƒí•´ ì£¼ì„¸ìš”.');
            return false;
        }
        
        // ì¦ìƒ ë°ì´í„° ìˆ˜ì§‘
        collectSymptomData();
    }
});

// ì§ˆë³‘ ìƒíƒœ ì¡°ê±´ë¶€ í‘œì‹œ
const diseaseCheckboxes = document.querySelectorAll('input[name^="disease_"]:not([name="disease_none"])');
const diseaseStatusDiv = document.getElementById('disease_status_section');

function toggleDiseaseStatus() {
    const hasDisease = Array.from(diseaseCheckboxes).some(cb => cb.checked);
    if (diseaseStatusDiv) {
        diseaseStatusDiv.style.display = hasDisease ? 'block' : 'none';
    }
}

diseaseCheckboxes.forEach(checkbox => {
    checkbox.addEventListener('change', toggleDiseaseStatus);
});

// "ì•„ë‹ˆì˜¤" ì²´í¬ë°•ìŠ¤ ì²˜ë¦¬
const diseaseNone = document.querySelector('input[name="disease_none"]');
if (diseaseNone) {
    diseaseNone.addEventListener('change', function() {
        if (this.checked) {
            diseaseCheckboxes.forEach(cb => cb.checked = false);
            toggleDiseaseStatus();
        }
    });
    
    diseaseCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            if (this.checked) {
                diseaseNone.checked = false;
            }
        });
    });
}

// ê³¼ê±° ì‚¬ê³  ë¶€ìœ„ ì¡°ê±´ë¶€ í‘œì‹œ
const pastAccident = document.querySelectorAll('input[name="past_accident"]');
const accidentDetailsDiv = document.getElementById('accident_details_section');

pastAccident.forEach(radio => {
    radio.addEventListener('change', function() {
        if (accidentDetailsDiv) {
            accidentDetailsDiv.style.display = this.value === 'ì˜ˆ' ? 'block' : 'none';
        }
    });
});

// ì·¨ë¯¸í™œë™ "í•´ë‹¹ì‚¬í•­ ì—†ìŒ" ë°°íƒ€ì  ì„ íƒ  
const hobbyNone = document.querySelector('input[name="hobby_none"]');
const hobbyCheckboxes = document.querySelectorAll('input[name^="hobby_"]:not([name="hobby_none"])');

if (hobbyNone) {
    hobbyNone.addEventListener('change', function() {
        if (this.checked) {
            hobbyCheckboxes.forEach(cb => cb.checked = false);
        }
    });
    
    hobbyCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            if (this.checked) {
                hobbyNone.checked = false;
            }
        });
    });
}

// í¼ ì œì¶œ ì „ ì¦ìƒ ë°ì´í„° ìˆ˜ì§‘
function collectSymptomData() {
    const hasSymptoms = document.querySelector('input[name="has_symptoms"]:checked');
    if (hasSymptoms && hasSymptoms.value === 'ì˜ˆ') {
        const bodyParts = ['ëª©', 'ì–´ê¹¨', 'íŒ”/íŒ”ê¿ˆì¹˜', 'ì†/ì†ëª©/ì†ê°€ë½', 'í—ˆë¦¬', 'ë‹¤ë¦¬/ë°œ'];
        const symptomData = {};
        
        bodyParts.forEach(part => {
            const partKey = part.replace(/[\/]/g, '_');
            const sideInput = document.querySelector(`input[name="${part}_side"]:checked`);
            
            if (sideInput) {
                const durationInput = document.querySelector(`input[name="${part}_duration"]:checked`);
                const severityInput = document.querySelector(`input[name="${part}_severity"]:checked`);
                const frequencyInput = document.querySelector(`input[name="${part}_frequency"]:checked`);
                const lastWeekInput = document.querySelector(`input[name="${part}_last_week"]:checked`);
                
                const treatmentInputs = document.querySelectorAll(`input[name="${part}_treatment"]:checked`);
                const treatmentOther = document.querySelector(`input[name="${part}_treatment_other"]`);
                
                const treatments = Array.from(treatmentInputs).map(input => input.value);
                if (treatmentOther && treatmentOther.value.trim()) {
                    treatments.push(treatmentOther.value.trim());
                }
                
                symptomData[partKey] = {
                    side: sideInput.value,
                    duration: durationInput ? durationInput.value : '',
                    severity: severityInput ? severityInput.value : '',
                    frequency: frequencyInput ? frequencyInput.value : '',
                    last_week: lastWeekInput ? lastWeekInput.value === 'ì˜ˆ' : false,
                    treatment: treatments
                };
            }
        });
        
        if (Object.keys(symptomData).length > 0) {
            const existingHidden = document.querySelector('input[name="symptoms_json_data"]');
            if (existingHidden) {
                existingHidden.remove();
            }
            
            const hiddenInput = document.createElement('input');
            hiddenInput.type = 'hidden';
            hiddenInput.name = 'symptoms_json_data';
            hiddenInput.value = JSON.stringify(symptomData);
            document.getElementById('surveyForm').appendChild(hiddenInput);
        }
    }
}

// ì´ˆê¸° ìƒíƒœ ì„¤ì •
document.addEventListener('DOMContentLoaded', function() {
    toggleDiseaseStatus();
});
</script>
{% endblock %}