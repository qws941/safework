{% extends "base.html" %}

{% block title %}근골격계 증상조사표 - {{ app_name }}{% endblock %}

{% block extra_css %}
<style>
    .pdf-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        font-size: 14px;
    }
    
    .pdf-table th,
    .pdf-table td {
        border: 1px solid #333;
        padding: 8px;
        vertical-align: top;
    }
    
    .pdf-table th {
        background-color: #f0f0f0;
        font-weight: bold;
        text-align: center;
    }
    
    .form-control {
        border: none;
        background: transparent;
        width: 100%;
        font-size: 14px;
    }
    
    .checkbox-inline {
        margin-right: 15px;
    }
    
    .radio-inline {
        margin-right: 15px;
    }
    
    .symptoms-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
    }
    
    .symptoms-table th,
    .symptoms-table td {
        border: 1px solid #333;
        padding: 8px;
        text-align: center;
        vertical-align: middle;
    }
    
    .symptoms-table th {
        background-color: #f0f0f0;
        font-weight: bold;
    }
    
    .body-part-header {
        writing-mode: vertical-rl;
        text-orientation: mixed;
        min-width: 30px;
    }
    
    .question-cell {
        text-align: left;
        padding-left: 10px;
        width: 200px;
    }
    
    .checkbox-group {
        display: flex;
        justify-content: space-around;
        flex-wrap: wrap;
    }
    
    .checkbox-group label {
        margin: 2px;
        font-size: 12px;
    }
    
    @media (max-width: 768px) {
        .pdf-table {
            font-size: 12px;
        }
        
        .symptoms-table {
            font-size: 11px;
        }
        
        .checkbox-group {
            flex-direction: column;
        }
    }
</style>
{% endblock %}

{% block content %}
<form method="POST" action="{{ url_for('survey.musculoskeletal_symptom_survey') }}" id="surveyForm">
    {{ form.hidden_tag() }}
    
    <h2 class="text-center mb-4">근골격계 증상조사표</h2>
    
    <!-- I. 기본정보 테이블 -->
    <h4>I. 아래 사항을 직접 기입해 주시기 바랍니다.</h4>
    
    <table class="pdf-table">
        <tr>
            <td style="width: 80px;">성 명</td>
            <td style="width: 200px;">{{ form.name(class="form-control") }}</td>
            <td style="width: 80px;">연 령</td>
            <td style="width: 80px;">만 {{ form.age(class="form-control", style="width: 60px; display: inline;") }} 세</td>
        </tr>
        <tr>
            <td>성 별</td>
            <td>
                {{ form.gender(class="") }} 남 
                {{ form.gender(class="") }} 여
            </td>
            <td>현 직장경력</td>
            <td>{{ form.work_years(class="form-control", style="width: 40px; display: inline;") }}년 {{ form.work_months(class="form-control", style="width: 40px; display: inline;") }}개월째 근무 중</td>
        </tr>
        <tr>
            <td>작업부서</td>
            <td>{{ form.department(class="form-control") }}부</td>
            <td>라인</td>
            <td rowspan="2">
                결혼여부 
                {{ form.marriage_status(class="") }} 기혼
                {{ form.marriage_status(class="") }} 미혼
            </td>
        </tr>
        <tr>
            <td>작업</td>
            <td>수행작업: {{ form.work_name(class="form-control") }}</td>
            <td></td>
        </tr>
        <tr>
            <td rowspan="2">현재하고 있는<br>작업(구체적으로)</td>
            <td colspan="3">
                작업내용: {{ form.current_work_details(class="form-control") }}
            </td>
        </tr>
        <tr>
            <td colspan="3">
                작업기간: {{ form.current_work_years(class="form-control", style="width: 60px; display: inline;") }}년 {{ form.current_work_months(class="form-control", style="width: 60px; display: inline;") }}개월째 하고 있음
            </td>
        </tr>
        <tr>
            <td>1일 근무시간</td>
            <td>{{ form.work_hours_per_day(class="form-control", style="width: 60px; display: inline;") }}시간</td>
            <td colspan="2">근무 중 휴식시간 (식사시간 제외) {{ form.break_time_minutes(class="form-control", style="width: 60px; display: inline;") }}분씩 {{ form.break_frequency(class="form-control", style="width: 40px; display: inline;") }}회 휴식</td>
        </tr>
        <tr>
            <td rowspan="2">현작업을 하기<br>전에 했던 작업</td>
            <td colspan="3">
                작업내용: {{ form.previous_work_details(class="form-control") }}
            </td>
        </tr>
        <tr>
            <td colspan="3">
                작업기간: {{ form.previous_work_years(class="form-control", style="width: 60px; display: inline;") }}년 {{ form.previous_work_months(class="form-control", style="width: 60px; display: inline;") }}개월 동안 했음
            </td>
        </tr>
    </table>
    
    <!-- 1. 여가 및 취미활동 -->
    <div class="mb-3">
        <strong>1.</strong> (규칙적인 한번에 30분 이상, 1주일에 적어도 2-3회 이상) 여가 및 취미활동을 하고 계시는 곳에 표시(∨) 하여 주십시오.
        <br>
        <div class="form-check-inline">
            {{ form.hobby_computer(class="form-check-input") }} {{ form.hobby_computer.label(class="form-check-label") }}
        </div>
        <div class="form-check-inline">
            {{ form.hobby_instrument(class="form-check-input") }} {{ form.hobby_instrument.label(class="form-check-label") }}
        </div>
        <div class="form-check-inline">
            {{ form.hobby_knitting(class="form-check-input") }} {{ form.hobby_knitting.label(class="form-check-label") }}
        </div>
        <br>
        <div class="form-check-inline">
            {{ form.hobby_racket_sports(class="form-check-input") }} {{ form.hobby_racket_sports.label(class="form-check-label") }}
        </div>
        <div class="form-check-inline">
            {{ form.hobby_ball_sports(class="form-check-input") }} {{ form.hobby_ball_sports.label(class="form-check-label") }}
        </div>
        <div class="form-check-inline">
            {{ form.hobby_none(class="form-check-input") }} {{ form.hobby_none.label(class="form-check-label") }}
        </div>
    </div>
    
    <!-- 2. 가사노동시간 -->
    <div class="mb-3">
        <strong>2.</strong> 귀하의 하루 평균 가사노동시간(밥하기, 빨래하기, 청소하기, 2살 미만의 아이 돌보기 등)은 얼마나 됩니까?
        <br>
        {% for value, label in form.housework_hours.choices %}
        <div class="form-check-inline">
            <input type="radio" class="form-check-input" name="housework_hours" value="{{ value }}" id="housework_{{ value }}">
            <label class="form-check-label" for="housework_{{ value }}">{{ label }}</label>
        </div>
        {% endfor %}
    </div>
    
    <!-- 3. 진단받은 질병 -->
    <div class="mb-3">
        <strong>3.</strong> 귀하는 의사로부터 다음과 같은 질병에 대해 진단을 받은 적이 있습니까? (해당 질병에 체크)
        <br>
        (보기: 
        <div class="form-check-inline">
            {{ form.disease_rheumatoid(class="form-check-input") }} {{ form.disease_rheumatoid.label(class="form-check-label") }}
        </div>
        <div class="form-check-inline">
            {{ form.disease_diabetes(class="form-check-input") }} {{ form.disease_diabetes.label(class="form-check-label") }}
        </div>
        <div class="form-check-inline">
            {{ form.disease_lupus(class="form-check-input") }} {{ form.disease_lupus.label(class="form-check-label") }}
        </div>
        <div class="form-check-inline">
            {{ form.disease_gout(class="form-check-input") }} {{ form.disease_gout.label(class="form-check-label") }}
        </div>
        <div class="form-check-inline">
            {{ form.disease_alcoholism(class="form-check-input") }} {{ form.disease_alcoholism.label(class="form-check-label") }}
        </div>
        )
        <br>
        <div class="form-check-inline">
            {{ form.disease_none(class="form-check-input") }} {{ form.disease_none.label(class="form-check-label") }}
        </div>
        ('예'인 경우 현재상태는? 
        {% for value, label in form.disease_status.choices %}
        <div class="form-check-inline">
            <input type="radio" class="form-check-input" name="disease_status" value="{{ value }}" id="disease_status_{{ value }}">
            <label class="form-check-label" for="disease_status_{{ value }}">{{ label }}</label>
        </div>
        {% endfor %}
        )
    </div>
    
    <!-- 4. 과거 사고 -->
    <div class="mb-3">
        <strong>4.</strong> 과거에 운동 중 혹은 사고로(교통사고, 넘어짐, 추락 등) 인해 손/손가락/손목, 팔/팔꿈치, 어깨, 목, 허리, 다리/발 부위를 다친 적인 있습니까?
        <br>
        {% for value, label in form.past_accident.choices %}
        <div class="form-check-inline">
            <input type="radio" class="form-check-input" name="past_accident" value="{{ value }}" id="past_accident_{{ value }}">
            <label class="form-check-label" for="past_accident_{{ value }}">{{ label }}</label>
        </div>
        {% endfor %}
        <br>
        ('예'인 경우 상해 부위는? 
        <div class="form-check-inline">
            {{ form.accident_hand(class="form-check-input") }} {{ form.accident_hand.label(class="form-check-label") }}
        </div>
        <div class="form-check-inline">
            {{ form.accident_arm(class="form-check-input") }} {{ form.accident_arm.label(class="form-check-label") }}
        </div>
        <div class="form-check-inline">
            {{ form.accident_shoulder(class="form-check-input") }} {{ form.accident_shoulder.label(class="form-check-label") }}
        </div>
        <div class="form-check-inline">
            {{ form.accident_neck(class="form-check-input") }} {{ form.accident_neck.label(class="form-check-label") }}
        </div>
        <div class="form-check-inline">
            {{ form.accident_waist(class="form-check-input") }} {{ form.accident_waist.label(class="form-check-label") }}
        </div>
        <div class="form-check-inline">
            {{ form.accident_leg(class="form-check-input") }} {{ form.accident_leg.label(class="form-check-label") }}
        </div>
        )
    </div>
    
    <!-- 5. 육체적 부담 정도 -->
    <div class="mb-3">
        <strong>5.</strong> 현재 하고 계시는 일의 육체적 부담 정도는 어느 정도라고 생각합니까?
        <br>
        {% for value, label in form.physical_burden.choices %}
        <div class="form-check-inline">
            <input type="radio" class="form-check-input" name="physical_burden" value="{{ value }}" id="physical_burden_{{ value }}">
            <label class="form-check-label" for="physical_burden_{{ value }}">{{ label }}</label>
        </div>
        {% endfor %}
    </div>
    
    <hr style="border: 2px solid #000;">
    
    <!-- II. 근골격계 증상 -->
    <h4>II. 지난 1년 동안 손/손가락/손목, 팔/팔꿈치, 어깨, 허리, 다리/발 중 어느 한 부위에서라도 귀하의 작업과 관련하여 통증이나 불편함(통증, 쑤시는 느낌, 뻣뻣함, 화끈거리는 느낌, 무감각 혹은 찌릿찌릿함 등)을 느끼신 적이 있습니까?</h4>
    
    <div class="mb-3">
        {% for value, label in form.has_symptoms.choices %}
        <div class="form-check-inline">
            <input type="radio" class="form-check-input" name="has_symptoms" value="{{ value }}" id="has_symptoms_{{ value }}" required>
            <label class="form-check-label" for="has_symptoms_{{ value }}">{{ label }}</label>
        </div>
        {% endfor %}
        {% if form.has_symptoms.errors %}
            <div class="text-danger small">{{ form.has_symptoms.errors[0] }}</div>
        {% endif %}
    </div>
    
    <p>("아니오" - 수고하셨습니다. 설문을 다 마치셨습니다.)</p>
    <p>("예"라고 답하신 분은 아래 표의 통증부위에 체크(∨)하고, 해당 통증부위의 세로줄로 내려가며 해당사항에 체크(∨) 해 주십시오)</p>
    
    <!-- 증상 테이블 -->
    <div id="symptomsSection" style="display: none;">
        <table class="symptoms-table">
            <thead>
                <tr>
                    <th rowspan="2">통증 부위</th>
                    <th class="body-part-header">목</th>
                    <th class="body-part-header">어깨</th>
                    <th class="body-part-header">팔/팔꿈치</th>
                    <th class="body-part-header">손/손목/손가락</th>
                    <th class="body-part-header">허리</th>
                    <th class="body-part-header">다리/발</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="question-cell">1. 통증의 구체적 부위는?</td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="neck_location" value="right"> 오른쪽</label>
                            <label><input type="checkbox" name="neck_location" value="left"> 왼쪽</label>
                            <label><input type="checkbox" name="neck_location" value="both"> 양쪽 모두</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="shoulder_location" value="right"> 오른쪽</label>
                            <label><input type="checkbox" name="shoulder_location" value="left"> 왼쪽</label>
                            <label><input type="checkbox" name="shoulder_location" value="both"> 양쪽 모두</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="arm_location" value="right"> 오른쪽</label>
                            <label><input type="checkbox" name="arm_location" value="left"> 왼쪽</label>
                            <label><input type="checkbox" name="arm_location" value="both"> 양쪽 모두</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="hand_location" value="right"> 오른쪽</label>
                            <label><input type="checkbox" name="hand_location" value="left"> 왼쪽</label>
                            <label><input type="checkbox" name="hand_location" value="both"> 양쪽 모두</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="waist_location" value="right"> 오른쪽</label>
                            <label><input type="checkbox" name="waist_location" value="left"> 왼쪽</label>
                            <label><input type="checkbox" name="waist_location" value="both"> 양쪽 모두</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="leg_location" value="right"> 오른쪽</label>
                            <label><input type="checkbox" name="leg_location" value="left"> 왼쪽</label>
                            <label><input type="checkbox" name="leg_location" value="both"> 양쪽 모두</label>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="question-cell">2. 한번 아프기 시작하면 통증기간은 얼마 동안 지속됩니까?</td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="neck_duration" value="1day"> 1일 미만</label>
                            <label><input type="radio" name="neck_duration" value="1day-1week"> 1일-1주일 미만</label>
                            <label><input type="radio" name="neck_duration" value="1week-1month"> 1주일-1달 미만</label>
                            <label><input type="radio" name="neck_duration" value="1month-6months"> 1달-6개월 미만</label>
                            <label><input type="radio" name="neck_duration" value="6months+"> 6개월 이상</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="shoulder_duration" value="1day"> 1일 미만</label>
                            <label><input type="radio" name="shoulder_duration" value="1day-1week"> 1일-1주일 미만</label>
                            <label><input type="radio" name="shoulder_duration" value="1week-1month"> 1주일-1달 미만</label>
                            <label><input type="radio" name="shoulder_duration" value="1month-6months"> 1달-6개월 미만</label>
                            <label><input type="radio" name="shoulder_duration" value="6months+"> 6개월 이상</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="arm_duration" value="1day"> 1일 미만</label>
                            <label><input type="radio" name="arm_duration" value="1day-1week"> 1일-1주일 미만</label>
                            <label><input type="radio" name="arm_duration" value="1week-1month"> 1주일-1달 미만</label>
                            <label><input type="radio" name="arm_duration" value="1month-6months"> 1달-6개월 미만</label>
                            <label><input type="radio" name="arm_duration" value="6months+"> 6개월 이상</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="hand_duration" value="1day"> 1일 미만</label>
                            <label><input type="radio" name="hand_duration" value="1day-1week"> 1일-1주일 미만</label>
                            <label><input type="radio" name="hand_duration" value="1week-1month"> 1주일-1달 미만</label>
                            <label><input type="radio" name="hand_duration" value="1month-6months"> 1달-6개월 미만</label>
                            <label><input type="radio" name="hand_duration" value="6months+"> 6개월 이상</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="waist_duration" value="1day"> 1일 미만</label>
                            <label><input type="radio" name="waist_duration" value="1day-1week"> 1일-1주일 미만</label>
                            <label><input type="radio" name="waist_duration" value="1week-1month"> 1주일-1달 미만</label>
                            <label><input type="radio" name="waist_duration" value="1month-6months"> 1달-6개월 미만</label>
                            <label><input type="radio" name="waist_duration" value="6months+"> 6개월 이상</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="leg_duration" value="1day"> 1일 미만</label>
                            <label><input type="radio" name="leg_duration" value="1day-1week"> 1일-1주일 미만</label>
                            <label><input type="radio" name="leg_duration" value="1week-1month"> 1주일-1달 미만</label>
                            <label><input type="radio" name="leg_duration" value="1month-6months"> 1달-6개월 미만</label>
                            <label><input type="radio" name="leg_duration" value="6months+"> 6개월 이상</label>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="question-cell">3. 그때의 아픈 정도는 어느 정도 입니까? (보기 참조)</td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="neck_severity" value="weak"> 약한 통증</label>
                            <label><input type="radio" name="neck_severity" value="medium"> 중간 통증</label>
                            <label><input type="radio" name="neck_severity" value="severe"> 심한 통증</label>
                            <label><input type="radio" name="neck_severity" value="very_severe"> 매우 심한 통증</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="shoulder_severity" value="weak"> 약한 통증</label>
                            <label><input type="radio" name="shoulder_severity" value="medium"> 중간 통증</label>
                            <label><input type="radio" name="shoulder_severity" value="severe"> 심한 통증</label>
                            <label><input type="radio" name="shoulder_severity" value="very_severe"> 매우 심한 통증</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="arm_severity" value="weak"> 약한 통증</label>
                            <label><input type="radio" name="arm_severity" value="medium"> 중간 통증</label>
                            <label><input type="radio" name="arm_severity" value="severe"> 심한 통증</label>
                            <label><input type="radio" name="arm_severity" value="very_severe"> 매우 심한 통증</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="hand_severity" value="weak"> 약한 통증</label>
                            <label><input type="radio" name="hand_severity" value="medium"> 중간 통증</label>
                            <label><input type="radio" name="hand_severity" value="severe"> 심한 통증</label>
                            <label><input type="radio" name="hand_severity" value="very_severe"> 매우 심한 통증</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="waist_severity" value="weak"> 약한 통증</label>
                            <label><input type="radio" name="waist_severity" value="medium"> 중간 통증</label>
                            <label><input type="radio" name="waist_severity" value="severe"> 심한 통증</label>
                            <label><input type="radio" name="waist_severity" value="very_severe"> 매우 심한 통증</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="leg_severity" value="weak"> 약한 통증</label>
                            <label><input type="radio" name="leg_severity" value="medium"> 중간 통증</label>
                            <label><input type="radio" name="leg_severity" value="severe"> 심한 통증</label>
                            <label><input type="radio" name="leg_severity" value="very_severe"> 매우 심한 통증</label>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="question-cell">4. 지난 1년 동안 이러한 증상을 얼마나 자주 경험하셨습니까?</td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="neck_frequency" value="6months_1"> 6개월에 1번</label>
                            <label><input type="radio" name="neck_frequency" value="1month_2-3"> 1달에 2-3번</label>
                            <label><input type="radio" name="neck_frequency" value="1month_1"> 1달에 1번</label>
                            <label><input type="radio" name="neck_frequency" value="1week_1"> 1주일에 1번</label>
                            <label><input type="radio" name="neck_frequency" value="daily"> 매일</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="shoulder_frequency" value="6months_1"> 6개월에 1번</label>
                            <label><input type="radio" name="shoulder_frequency" value="1month_2-3"> 1달에 2-3번</label>
                            <label><input type="radio" name="shoulder_frequency" value="1month_1"> 1달에 1번</label>
                            <label><input type="radio" name="shoulder_frequency" value="1week_1"> 1주일에 1번</label>
                            <label><input type="radio" name="shoulder_frequency" value="daily"> 매일</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="arm_frequency" value="6months_1"> 6개월에 1번</label>
                            <label><input type="radio" name="arm_frequency" value="1month_2-3"> 1달에 2-3번</label>
                            <label><input type="radio" name="arm_frequency" value="1month_1"> 1달에 1번</label>
                            <label><input type="radio" name="arm_frequency" value="1week_1"> 1주일에 1번</label>
                            <label><input type="radio" name="arm_frequency" value="daily"> 매일</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="hand_frequency" value="6months_1"> 6개월에 1번</label>
                            <label><input type="radio" name="hand_frequency" value="1month_2-3"> 1달에 2-3번</label>
                            <label><input type="radio" name="hand_frequency" value="1month_1"> 1달에 1번</label>
                            <label><input type="radio" name="hand_frequency" value="1week_1"> 1주일에 1번</label>
                            <label><input type="radio" name="hand_frequency" value="daily"> 매일</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="waist_frequency" value="6months_1"> 6개월에 1번</label>
                            <label><input type="radio" name="waist_frequency" value="1month_2-3"> 1달에 2-3번</label>
                            <label><input type="radio" name="waist_frequency" value="1month_1"> 1달에 1번</label>
                            <label><input type="radio" name="waist_frequency" value="1week_1"> 1주일에 1번</label>
                            <label><input type="radio" name="waist_frequency" value="daily"> 매일</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="leg_frequency" value="6months_1"> 6개월에 1번</label>
                            <label><input type="radio" name="leg_frequency" value="1month_2-3"> 1달에 2-3번</label>
                            <label><input type="radio" name="leg_frequency" value="1month_1"> 1달에 1번</label>
                            <label><input type="radio" name="leg_frequency" value="1week_1"> 1주일에 1번</label>
                            <label><input type="radio" name="leg_frequency" value="daily"> 매일</label>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="question-cell">5. 지난 1주일 동안에도 이러한 증상이 있었습니까?</td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="neck_recent" value="no"> 아니오</label>
                            <label><input type="radio" name="neck_recent" value="yes"> 예</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="shoulder_recent" value="no"> 아니오</label>
                            <label><input type="radio" name="shoulder_recent" value="yes"> 예</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="arm_recent" value="no"> 아니오</label>
                            <label><input type="radio" name="arm_recent" value="yes"> 예</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="hand_recent" value="no"> 아니오</label>
                            <label><input type="radio" name="hand_recent" value="yes"> 예</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="waist_recent" value="no"> 아니오</label>
                            <label><input type="radio" name="waist_recent" value="yes"> 예</label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="radio" name="leg_recent" value="no"> 아니오</label>
                            <label><input type="radio" name="leg_recent" value="yes"> 예</label>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="question-cell">6. 지난 1년 동안 이러한 통증으로 인해 어떤 일이 있었습니까?</td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="neck_treatment" value="hospital"> 병원·한의원 치료</label>
                            <label><input type="checkbox" name="neck_treatment" value="pharmacy"> 약국치료</label>
                            <label><input type="checkbox" name="neck_treatment" value="leave"> 병가, 산재</label>
                            <label><input type="checkbox" name="neck_treatment" value="job_change"> 작업 전환</label>
                            <label><input type="checkbox" name="neck_treatment" value="none"> 해당사항 없음</label>
                            <label>기타: <input type="text" name="neck_treatment_other" style="width: 100px;"></label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="shoulder_treatment" value="hospital"> 병원·한의원 치료</label>
                            <label><input type="checkbox" name="shoulder_treatment" value="pharmacy"> 약국치료</label>
                            <label><input type="checkbox" name="shoulder_treatment" value="leave"> 병가, 산재</label>
                            <label><input type="checkbox" name="shoulder_treatment" value="job_change"> 작업 전환</label>
                            <label><input type="checkbox" name="shoulder_treatment" value="none"> 해당사항 없음</label>
                            <label>기타: <input type="text" name="shoulder_treatment_other" style="width: 100px;"></label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="arm_treatment" value="hospital"> 병원·한의원 치료</label>
                            <label><input type="checkbox" name="arm_treatment" value="pharmacy"> 약국치료</label>
                            <label><input type="checkbox" name="arm_treatment" value="leave"> 병가, 산재</label>
                            <label><input type="checkbox" name="arm_treatment" value="job_change"> 작업 전환</label>
                            <label><input type="checkbox" name="arm_treatment" value="none"> 해당사항 없음</label>
                            <label>기타: <input type="text" name="arm_treatment_other" style="width: 100px;"></label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="hand_treatment" value="hospital"> 병원·한의원 치료</label>
                            <label><input type="checkbox" name="hand_treatment" value="pharmacy"> 약국치료</label>
                            <label><input type="checkbox" name="hand_treatment" value="leave"> 병가, 산재</label>
                            <label><input type="checkbox" name="hand_treatment" value="job_change"> 작업 전환</label>
                            <label><input type="checkbox" name="hand_treatment" value="none"> 해당사항 없음</label>
                            <label>기타: <input type="text" name="hand_treatment_other" style="width: 100px;"></label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="waist_treatment" value="hospital"> 병원·한의원 치료</label>
                            <label><input type="checkbox" name="waist_treatment" value="pharmacy"> 약국치료</label>
                            <label><input type="checkbox" name="waist_treatment" value="leave"> 병가, 산재</label>
                            <label><input type="checkbox" name="waist_treatment" value="job_change"> 작업 전환</label>
                            <label><input type="checkbox" name="waist_treatment" value="none"> 해당사항 없음</label>
                            <label>기타: <input type="text" name="waist_treatment_other" style="width: 100px;"></label>
                        </div>
                    </td>
                    <td>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="leg_treatment" value="hospital"> 병원·한의원 치료</label>
                            <label><input type="checkbox" name="leg_treatment" value="pharmacy"> 약국치료</label>
                            <label><input type="checkbox" name="leg_treatment" value="leave"> 병가, 산재</label>
                            <label><input type="checkbox" name="leg_treatment" value="job_change"> 작업 전환</label>
                            <label><input type="checkbox" name="leg_treatment" value="none"> 해당사항 없음</label>
                            <label>기타: <input type="text" name="leg_treatment_other" style="width: 100px;"></label>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
        
        <!-- 보기 설명 -->
        <div class="alert alert-info">
            <strong>&lt;보기&gt;</strong><br>
            <strong>약한 통증:</strong> 약간 불편한 정도이나 작업에 열중할 때는 못 느낀다<br>
            <strong>중간 통증:</strong> 작업 중 통증이 있으나 귀가 후 휴식을 취하면 괜찮다<br>
            <strong>심한 통증:</strong> 작업 중 통증이 비교적 심하고 귀가 후에도 통증이 계속된다<br>
            <strong>매우 심한 통증:</strong> 통증 때문에 작업은 물론 일상생활을 하기가 어렵다
        </div>
    </div>
    
    <!-- 제출 버튼 -->
    <div class="text-center mt-4">
        {{ form.submit(class="btn btn-primary btn-lg px-5") }}
    </div>
</form>
{% endblock %}

{% block extra_js %}
<script>
    // 증상 유무에 따른 테이블 표시/숨김
    document.querySelectorAll('input[name="has_symptoms"]').forEach(function(radio) {
        radio.addEventListener('change', function() {
            const symptomsSection = document.getElementById('symptomsSection');
            if (this.value === '예') {
                symptomsSection.style.display = 'block';
            } else {
                symptomsSection.style.display = 'none';
            }
        });
    });
    
    // 폼 제출 시 유효성 검사
    document.getElementById('surveyForm').addEventListener('submit', function(e) {
        const requiredFields = document.querySelectorAll('[required]');
        let isValid = true;
        
        requiredFields.forEach(field => {
            if (!field.value && !field.checked) {
                field.classList.add('is-invalid');
                isValid = false;
            } else {
                field.classList.remove('is-invalid');
            }
        });
        
        if (!isValid) {
            e.preventDefault();
            alert('필수 항목을 모두 입력해주세요.');
        }
    });
</script>
{% endblock %}