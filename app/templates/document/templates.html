{% extends "base.html" %}

{% block title %}문서 템플릿 - SafeWork{% endblock %}

{% block content %}
<div class="container-fluid px-4">
    <h1 class="mt-4">문서 템플릿</h1>
    <ol class="breadcrumb mb-4">
        <li class="breadcrumb-item"><a href="{{ url_for('main.index') }}">홈</a></li>
        <li class="breadcrumb-item"><a href="{{ url_for('document.index') }}">문서 자료실</a></li>
        <li class="breadcrumb-item active">템플릿</li>
    </ol>

    <!-- Category Filter -->
    <div class="card mb-4">
        <div class="card-body">
            <div class="btn-group" role="group">
                <a href="{{ url_for('document.templates') }}" class="btn btn-outline-primary {% if not request.args.get('category') %}active{% endif %}">
                    전체
                </a>
                <a href="{{ url_for('document.templates', category='safety') }}" class="btn btn-outline-primary {% if request.args.get('category') == 'safety' %}active{% endif %}">
                    안전
                </a>
                <a href="{{ url_for('document.templates', category='health') }}" class="btn btn-outline-primary {% if request.args.get('category') == 'health' %}active{% endif %}">
                    보건
                </a>
                <a href="{{ url_for('document.templates', category='incident') }}" class="btn btn-outline-primary {% if request.args.get('category') == 'incident' %}active{% endif %}">
                    사고
                </a>
                <a href="{{ url_for('document.templates', category='inspection') }}" class="btn btn-outline-primary {% if request.args.get('category') == 'inspection' %}active{% endif %}">
                    점검
                </a>
                <a href="{{ url_for('document.templates', category='education') }}" class="btn btn-outline-primary {% if request.args.get('category') == 'education' %}active{% endif %}">
                    교육
                </a>
            </div>
        </div>
    </div>

    <!-- Templates Grid -->
    <div class="row">
        {% for template in templates %}
        <div class="col-xl-4 col-md-6 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <h5 class="card-title mb-0">{{ template.name }}</h5>
                        <span class="badge bg-info">{{ template.file_type|upper }}</span>
                    </div>
                    
                    {% if template.template_code %}
                    <p class="text-muted small mb-2">코드: {{ template.template_code }}</p>
                    {% endif %}
                    
                    {% if template.description %}
                    <p class="card-text">{{ template.description }}</p>
                    {% endif %}
                    
                    {% if template.instructions %}
                    <div class="alert alert-light small mb-0">
                        <i class="fas fa-info-circle"></i> {{ template.instructions }}
                    </div>
                    {% endif %}
                </div>
                <div class="card-footer bg-transparent">
                    {% if current_user.is_authenticated %}
                    <a href="{{ url_for('document.download_template', id=template.id) }}" class="btn btn-primary w-100">
                        <i class="fas fa-download"></i> 템플릿 다운로드
                    </a>
                    {% else %}
                    <button class="btn btn-secondary w-100" disabled>
                        <i class="fas fa-lock"></i> 로그인 필요
                    </button>
                    {% endif %}
                </div>
            </div>
        </div>
        {% else %}
        <div class="col-12">
            <div class="alert alert-info">
                <i class="fas fa-info-circle"></i> 등록된 템플릿이 없습니다.
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}