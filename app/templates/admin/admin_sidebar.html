<!-- Admin Sidebar Navigation -->
<div class="admin-sidebar">
    <div class="sidebar-header">
        <h4><i class="bi bi-speedometer2"></i> ê´€ë¦¬ì ë©”ë‰´</h4>
    </div>
    
    <ul class="sidebar-menu">
        <!-- SafeWork ë©”ì¸ ëŒ€ì‹œë³´ë“œ -->
        <li class="menu-item {{ 'active' if request.endpoint == 'admin.safework_dashboard' }}">
            <a href="{{ url_for('admin.safework_dashboard') }}">
                <i class="bi bi-speedometer2"></i> ë©”ì¸ ëŒ€ì‹œë³´ë“œ
            </a>
        </li>
        
        <!-- Todo ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ -->
        <li class="menu-item {{ 'active' if request.endpoint == 'admin.safework_todos' }}">
            <a href="{{ url_for('admin.safework_todos') }}">
                <i class="bi bi-list-task"></i> ğŸ“‹ Todo ê´€ë¦¬
            </a>
        </li>
        
        <!-- ê±´ê°•ê²€ì§„ ê´€ë¦¬ -->
        <li class="menu-item has-submenu">
            <a href="#" class="menu-toggle">
                <i class="bi bi-clipboard-pulse"></i> ê±´ê°•ê²€ì§„ ê´€ë¦¬
                <i class="bi bi-chevron-down"></i>
            </a>
            <ul class="submenu">
                <li>
                    <a href="{{ url_for('survey.admin_dashboard') }}">
                        <i class="bi bi-list-check"></i> ì œì¶œ í˜„í™©
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('survey.admin_001_musculoskeletal') }}">
                        <i class="bi bi-body"></i> ê·¼ê³¨ê²©ê³„ (001)
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('survey.admin_002_new_employee') }}">
                        <i class="bi bi-person-plus"></i> ì‹ ê·œì…ì‚¬ì (002)
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin.survey_statistics') }}">
                        <i class="bi bi-bar-chart"></i> ğŸ“Š í†µê³„ ë¶„ì„
                    </a>
                </li>
                <li class="divider"></li>
                <li>
                    <a href="{{ url_for('survey.admin_dashboard', form_type='001') }}">
                        <i class="bi bi-download"></i> 001 Excel ë‹¤ìš´ë¡œë“œ
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('survey.admin_dashboard', form_type='002') }}">
                        <i class="bi bi-download"></i> 002 Excel ë‹¤ìš´ë¡œë“œ
                    </a>
                </li>
            </ul>
        </li>
        
        <!-- ë³´ê±´ê´€ë¦¬ -->
        <li class="menu-item has-submenu">
            <a href="#" class="menu-toggle">
                <i class="bi bi-hospital"></i> ë³´ê±´ê´€ë¦¬
                <i class="bi bi-chevron-down"></i>
            </a>
            <ul class="submenu">
                <li>
                    <a href="/admin/safework/medical-visits">
                        <i class="bi bi-capsule"></i> ì˜ë¬´ì‹¤ ê´€ë¦¬
                    </a>
                </li>
                <li>
                    <a href="/admin/safework/consultations">
                        <i class="bi bi-chat-dots"></i> ê±´ê°•ìƒë‹´ ê¸°ë¡
                    </a>
                </li>
                <li>
                    <a href="/admin/safework/health-programs">
                        <i class="bi bi-heart-pulse"></i> ê±´ê°•ì¦ì§„ í”„ë¡œê·¸ë¨
                    </a>
                </li>
                <li>
                    <a href="/admin/safework/special-management">
                        <i class="bi bi-person-exclamation"></i> íŠ¹ë³„ê´€ë¦¬ ëŒ€ìƒì
                    </a>
                </li>
            </ul>
        </li>
        
        <!-- ì‘ì—…í™˜ê²½ ê´€ë¦¬ -->
        <li class="menu-item has-submenu">
            <a href="#" class="menu-toggle">
                <i class="bi bi-shield-exclamation"></i> ì‘ì—…í™˜ê²½ ê´€ë¦¬
                <i class="bi bi-chevron-down"></i>
            </a>
            <ul class="submenu">
                <li>
                    <a href="/admin/safework/environment-measurements">
                        <i class="bi bi-thermometer"></i> ì‘ì—…í™˜ê²½ì¸¡ì •
                    </a>
                </li>
                <li>
                    <a href="/admin/safework/risk-assessment">
                        <i class="bi bi-exclamation-triangle"></i> ìœ„í—˜ì„± í‰ê°€
                    </a>
                </li>
                <li>
                    <a href="/admin/safework/msds">
                        <i class="bi bi-radioactive"></i> MSDS ê´€ë¦¬
                    </a>
                </li>
                <li>
                    <a href="/admin/safework/protective-equipment">
                        <i class="bi bi-tools"></i> ë³´í˜¸êµ¬ ê´€ë¦¬
                    </a>
                </li>
            </ul>
        </li>
        
        <!-- ê·¼ë¡œì ê´€ë¦¬ -->
        <li class="menu-item has-submenu">
            <a href="#" class="menu-toggle">
                <i class="bi bi-people"></i> ê·¼ë¡œì ê´€ë¦¬
                <i class="bi bi-chevron-down"></i>
            </a>
            <ul class="submenu">
                <li>
                    <a href="/admin/safework/workers">
                        <i class="bi bi-person-lines-fill"></i> ê·¼ë¡œì ëª©ë¡
                    </a>
                </li>
                <li>
                    <a href="/admin/safework/education">
                        <i class="bi bi-mortarboard"></i> êµìœ¡ ì´ìˆ˜ í˜„í™©
                    </a>
                </li>
                <li>
                    <a href="/admin/safework/certifications">
                        <i class="bi bi-award"></i> ìê²©/ë©´í—ˆ ê´€ë¦¬
                    </a>
                </li>
                <li>
                    <a href="/admin/safework/departments">
                        <i class="bi bi-building"></i> ë¶€ì„œë³„ í˜„í™©
                    </a>
                </li>
            </ul>
        </li>
        
        <!-- ë²•ê·œ ì¤€ìˆ˜ -->
        <li class="menu-item has-submenu">
            <a href="#" class="menu-toggle">
                <i class="bi bi-book"></i> ë²•ê·œ ì¤€ìˆ˜
                <i class="bi bi-chevron-down"></i>
            </a>
            <ul class="submenu">
                <li>
                    <a href="#">
                        <i class="bi bi-check2-square"></i> ì¤‘ëŒ€ì¬í•´ì²˜ë²Œë²•
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="bi bi-clipboard-check"></i> ì‚°ì—…ì•ˆì „ë³´ê±´ë²•
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="bi bi-calendar-check"></i> ì ê²€ ì¼ì •
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="bi bi-file-text"></i> ë²•ì • ì„œë¥˜
                    </a>
                </li>
            </ul>
        </li>
        
        <!-- ë¬¸ì„œ ê´€ë¦¬ -->
        <li class="menu-item has-submenu">
            <a href="#" class="menu-toggle">
                <i class="bi bi-folder"></i> ë¬¸ì„œ ê´€ë¦¬
                <i class="bi bi-chevron-down"></i>
            </a>
            <ul class="submenu">
                <li>
                    <a href="{{ url_for('document_admin.index') }}">
                        <i class="bi bi-file-earmark"></i> ë¬¸ì„œ ëª©ë¡
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('document_admin.upload') }}">
                        <i class="bi bi-upload"></i> ë¬¸ì„œ ì—…ë¡œë“œ
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('document_admin.categories') }}">
                        <i class="bi bi-tags"></i> ì¹´í…Œê³ ë¦¬ ê´€ë¦¬
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('document.templates') }}">
                        <i class="bi bi-file-ruled"></i> ì–‘ì‹/í…œí”Œë¦¿
                    </a>
                </li>
            </ul>
        </li>
        
        <!-- í†µê³„/ë¶„ì„ -->
        <li class="menu-item has-submenu">
            <a href="#" class="menu-toggle">
                <i class="bi bi-graph-up"></i> í†µê³„/ë¶„ì„
                <i class="bi bi-chevron-down"></i>
            </a>
            <ul class="submenu">
                <li>
                    <a href="#">
                        <i class="bi bi-bar-chart"></i> ê±´ê°• í†µê³„
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="bi bi-pie-chart"></i> ë¶€ì„œë³„ ë¶„ì„
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="bi bi-activity"></i> KPI ê´€ë¦¬
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="bi bi-calendar3"></i> ì›”ë³„ ë³´ê³ ì„œ
                    </a>
                </li>
            </ul>
        </li>
        
        <!-- ì‹œìŠ¤í…œ ê´€ë¦¬ -->
        <li class="menu-item has-submenu">
            <a href="#" class="menu-toggle">
                <i class="bi bi-gear"></i> ì‹œìŠ¤í…œ ê´€ë¦¬
                <i class="bi bi-chevron-down"></i>
            </a>
            <ul class="submenu">
                <li>
                    <a href="{{ url_for('admin.users') }}">
                        <i class="bi bi-person-gear"></i> ì‚¬ìš©ì ê´€ë¦¬
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="bi bi-key"></i> ê¶Œí•œ ì„¤ì •
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('migration.migration_status') }}">
                        <i class="bi bi-database"></i> DB ë§ˆì´ê·¸ë ˆì´ì…˜
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="bi bi-journal-text"></i> ì‹œìŠ¤í…œ ë¡œê·¸
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="bi bi-sliders"></i> í™˜ê²½ ì„¤ì •
                    </a>
                </li>
            </ul>
        </li>
    </ul>
    
    <div class="sidebar-footer">
        <div class="user-info">
            <i class="bi bi-person-circle"></i>
            <span>{{ current_user.username }}</span>
        </div>
        <a href="{{ url_for('auth.logout') }}" class="logout-btn">
            <i class="bi bi-box-arrow-right"></i> ë¡œê·¸ì•„ì›ƒ
        </a>
    </div>
</div>

<style>
.admin-sidebar {
    width: 250px;
    background: #1a1d23;
    color: #fff;
    height: 100vh;
    position: fixed;
    left: 0;
    top: 0;
    overflow-y: auto;
    z-index: 1000;
}

.sidebar-header {
    padding: 20px;
    background: #141721;
    border-bottom: 1px solid #2a2d35;
}

.sidebar-header h4 {
    margin: 0;
    font-size: 1.2rem;
    color: #fff;
}

.sidebar-menu {
    list-style: none;
    padding: 0;
    margin: 0;
}

.menu-item {
    position: relative;
}

.menu-item > a {
    display: flex;
    align-items: center;
    padding: 12px 20px;
    color: #b8bcc8;
    text-decoration: none;
    transition: all 0.3s;
}

.menu-item > a:hover {
    background: #2a2d35;
    color: #fff;
}

.menu-item.active > a {
    background: #667eea;
    color: #fff;
}

.menu-item i {
    margin-right: 10px;
    width: 20px;
    text-align: center;
}

.menu-toggle {
    justify-content: space-between !important;
}

.menu-toggle i:last-child {
    margin-left: auto;
    margin-right: 0;
    transition: transform 0.3s;
}

.menu-item.open .menu-toggle i:last-child {
    transform: rotate(180deg);
}

.submenu {
    list-style: none;
    padding: 0;
    margin: 0;
    background: #0d0f14;
    display: none;
}

.menu-item.open .submenu {
    display: block;
}

.submenu li a {
    display: flex;
    align-items: center;
    padding: 10px 20px 10px 40px;
    color: #8b91a7;
    text-decoration: none;
    font-size: 0.9rem;
    transition: all 0.3s;
}

.submenu li a:hover {
    background: #1a1d23;
    color: #fff;
}

.submenu .divider {
    height: 1px;
    background: #2a2d35;
    margin: 5px 0;
}

.sidebar-footer {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 15px;
    background: #141721;
    border-top: 1px solid #2a2d35;
}

.user-info {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
    color: #b8bcc8;
}

.user-info i {
    margin-right: 8px;
    font-size: 1.2rem;
}

.logout-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 8px;
    background: #dc3545;
    color: #fff;
    text-decoration: none;
    border-radius: 5px;
    transition: all 0.3s;
}

.logout-btn:hover {
    background: #c82333;
}

/* Mobile responsive */
@media (max-width: 768px) {
    .admin-sidebar {
        transform: translateX(-100%);
        transition: transform 0.3s;
    }
    
    .admin-sidebar.active {
        transform: translateX(0);
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Toggle submenu
    const menuToggles = document.querySelectorAll('.menu-toggle');
    menuToggles.forEach(toggle => {
        toggle.addEventListener('click', function(e) {
            e.preventDefault();
            const parent = this.parentElement;
            parent.classList.toggle('open');
        });
    });
    
    // Keep current submenu open
    const currentPath = window.location.pathname;
    document.querySelectorAll('.submenu a').forEach(link => {
        if (link.getAttribute('href') === currentPath) {
            link.closest('.menu-item').classList.add('open');
            link.style.color = '#fff';
            link.style.background = '#1a1d23';
        }
    });
});
</script>