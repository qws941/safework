name: Claude Code - ì´ìŠˆ ìë™ í•´ê²°

on:
  issue_comment:
    types: [created]
  issues:
    types: [opened]

permissions:
  contents: write
  issues: write
  pull-requests: write
  actions: write

jobs:
  claude-auto-fix:
    if: |
      (github.event_name == 'issues' && github.event.action == 'opened') ||
      (github.event_name == 'issue_comment' && contains(github.event.comment.body, '@claude'))
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v4
      
      - name: Claude Code ì´ìŠˆ í•´ê²°
        uses: anthropics/claude-code-action@v1
        with:
          anthropic_api_key: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
          github_token: ${{ secrets.GITHUB_TOKEN }}
          prompt: |
            SafeWork í”„ë¡œì íŠ¸ì˜ ì´ìŠˆë¥¼ ì‹¤ì œë¡œ í•´ê²°í•˜ê³  PRì„ ìƒì„±í•´ì£¼ì„¸ìš”.
            
            ğŸ¯ ëª©í‘œ: ì´ìŠˆë¥¼ ì™„ì „íˆ í•´ê²°í•˜ê³  ìš´ì˜ í™˜ê²½ì— ë°°í¬ê¹Œì§€ ì™„ë£Œí•˜ê¸°
            
            ğŸ“‹ í•„ìˆ˜ ì²˜ë¦¬ ë‹¨ê³„:
            1. ì´ìŠˆ ë¶„ì„ ë° ìš”êµ¬ì‚¬í•­ íŒŒì•…
            2. ì‹¤ì œ ì½”ë“œ ìˆ˜ì •ìœ¼ë¡œ ë¬¸ì œ í•´ê²°
            3. í…ŒìŠ¤íŠ¸ ì¶”ê°€ (í•„ìš”ì‹œ)
            4. ì»¤ë°‹ & PR ìƒì„±
            5. ì´ìŠˆ í´ë¡œì¦ˆê¹Œì§€ ì™„ë£Œ
            
            ğŸ›  ê¸°ìˆ  ìŠ¤íƒ: Flask 3.0+, SQLAlchemy, MySQL 8.0, Bootstrap 4.6, jQuery, Jinja2
            
            âœ… ì„±ê³µ ê¸°ì¤€: ì‹¤ì œ ì½”ë“œ ë³€ê²½ìœ¼ë¡œ ì´ìŠˆ í•´ê²°, PR ìƒì„± ì™„ë£Œ, ìš´ì˜ í™˜ê²½ ë°˜ì˜ í™•ì¸
            
            **ì¤‘ìš”**: ë¶„ì„ë§Œ í•˜ì§€ ë§ê³  ì‹¤ì œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ë°°í¬ê¹Œì§€ ì™„ë£Œí•˜ì„¸ìš”!